<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="a53a9933-f8ce-445b-8f01-8fa2fed6baf0" discardOkResults="false" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="Order Receipt PRINT for LAFU Payment" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" zephyrTestName="" zephyrTestId="" xmlns:con="http://eviware.com/soapui/config">
  <con:description>This testcase validates that PM user can order receipt(PRINT) while creating a payment and can reorder when status is LAFU.
Verifies tag in DB tables and operational array in all the searches.</con:description>
  <con:settings>
    <con:setting id="a53a9933-f8ce-445b-8f01-8fa2fed6baf0fileName">Order-Receipt-PRINT-for-LAFU-Payment</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="properties" name="Properties" id="5a97d307-4f49-442a-b5c3-c1aa2a21e053">
    <con:settings/>
    <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:properties>
        <con:property>
          <con:name>SourceApplication</con:name>
          <con:value>EVRYINT</con:value>
        </con:property>
        <con:property>
          <con:name>credentials</con:name>
          <con:value>03110012010400425kglPboRi3h1Z4YUjUpQ0UB65Ta2kPKj1KWwkWemtrL+SoWqMxx/KuqxUVbNyTu6DsSaabKNt2t+xJppso23a37EmmmyjbdrffJeRiGWfHDGwxCWOpDYc2jgSxAz1+8eEsSaabKNt2t/XzlyjxYnxhcG46wcbIKp/sSaabKNt2t9wBUG0SyIoqFfig80Gq4uXVBtimDzTiu2xJppso23a37Emmmyjbdrf8wP73CNrvpw=apG4tU0NraPbbqKUp39erKDFa7xy6z+r4VDMr/6qBlkFniGaNeDXv4cZcZZQQI6JtwB3JYQk6WqLA7oyp1FWRM6n46ehgNmHVNly8fTnQbIuGJSF2LUyGI7aE92/dgtp8jv9bsGpNe58K+xb4LeIHwjb2nVVvt4/2oLtDQ8IPJE=</con:value>
        </con:property>
        <con:property>
          <con:name>channel</con:name>
          <con:value>NBA</con:value>
        </con:property>
        <con:property>
          <con:name>orgid</con:name>
          <con:value>4201</con:value>
        </con:property>
        <con:property>
          <con:name>item1</con:name>
          <con:value>PaymentChannel</con:value>
        </con:property>
        <con:property>
          <con:name>value1</con:name>
          <con:value>INT</con:value>
        </con:property>
        <con:property>
          <con:name>item2</con:name>
          <con:value>LogRef</con:value>
        </con:property>
        <con:property>
          <con:name>value2</con:name>
          <con:value>${= java.time.LocalDateTime.now().plusDays(1).format(java.time.format.DateTimeFormatter.ofPattern('yyyy-MM-dd'))}-${=context.getCurrentStep().getTestCase().getLabel()}</con:value>
        </con:property>
        <con:property>
          <con:name>ReqExnDate</con:name>
          <con:value>${= java.time.LocalDateTime.now().plusDays(1).format(java.time.format.DateTimeFormatter.ofPattern('yyyy-MM-dd'))}</con:value>
        </con:property>
        <con:property>
          <con:name>ConnectionString</con:name>
          <con:value>jdbc:oracle:thin:forfall/forfall@//10.246.89.97:1530/rbst5_taf</con:value>
        </con:property>
        <con:property>
          <con:name>ReceiptOrder</con:name>
          <con:value>PRINT</con:value>
        </con:property>
        <con:property>
          <con:name>PaymentStatus</con:name>
          <con:value>LAFU</con:value>
        </con:property>
        <con:property>
          <con:name>UserID</con:name>
          <con:value>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/CUSTOMERID[1]}</con:value>
        </con:property>
        <con:property>
          <con:name>customerid</con:name>
          <con:value>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/CUSTOMERID[1]}</con:value>
        </con:property>
      </con:properties>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="Fetch LAFU Data" id="fc76fbad-74dd-4ce4-b58e-894248cda4ea">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWHDATA</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:PWHDATA/pwh@//10.246.89.97:1530/pwh_g_st</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select C.TRANSACTIONSID,A.MESSAGEID,C.DEBETACCOUNTNO,A.CUSTOMERID,C.PAYMENTTYPE,C.PAYMENTSTATUS,C.RECEIPTORDER,A.MARKETTYPE,C.INITIATORBANKID
from MESSAGE A,PAYMENTINFO B, TRANSACTIONS C where A.MARKETTYPE = 'PM' and
 A.MESSAGEID = B.FK_MESSAGEID and B.PAYMENTINFOID = C.FK_PAYMENTINFOID and C.PAYMENTSTATUS = 'LAFU'
 and C.INITIATORBANKID = '4201'  order by A.MESSAGEID desc fetch first row only</con:query>
      <con:assertion type="MessageContentAssertion" id="68103f0c-135c-449d-8964-d5e2304e7268" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]</con:xpath>
            <con:element>TRANSACTIONSID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>12063</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/DEBETACCOUNTNO[1]</con:xpath>
            <con:element>DEBETACCOUNTNO</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42022512891</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENTTYPE[1]</con:xpath>
            <con:element>PAYMENTTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>DOMM</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENTSTATUS[1]</con:xpath>
            <con:element>PAYMENTSTATUS</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>LAFU</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RECEIPTORDER[1]</con:xpath>
            <con:element>RECEIPTORDER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NONE</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/MARKETTYPE[1]</con:xpath>
            <con:element>MARKETTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>PM</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INITIATORBANKID[1]</con:xpath>
            <con:element>INITIATORBANKID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>4201</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <TRANSACTIONSID>12063</TRANSACTIONSID>
         <DEBETACCOUNTNO>42022512891</DEBETACCOUNTNO>
         <PAYMENTTYPE>DOMM</PAYMENTTYPE>
         <PAYMENTSTATUS>COMP</PAYMENTSTATUS>
         <RECEIPTORDER>NONE</RECEIPTORDER>
         <MARKETTYPE>PM</MARKETTYPE>
         <INITIATORBANKID>4201</INITIATORBANKID>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="DeleteReceipt_DB" id="49ecc1af-e59e-4afc-a73c-2646e7dcdd16">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWHDATA</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:PWHDATA/pwh@//10.246.89.97:1530/pwh_g_st</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>update TRANSACTIONS set  RECEIPTORDER ='NONE' where TRANSACTIONSID = '${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}'</con:query>
      <con:assertion type="JDBC Status" id="5d3aa7dd-f3bf-40fc-a129-4c7c918396b8" name="JDBC Status"/>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="835d482a-c761-4e42-9203-7295528903f3" name="Receipt Order">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentUtil_V2_0PortTypeSoap11</con:interface>
      <con:operation>ReceiptOrderUpdate</con:operation>
      <con:request name="Receipt Order" id="242209dc-0cbd-4a5d-a3ba-a0275d33fb20">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentUtil_V2_0</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:pins.payment.evry.com:ws:paymentutil:v2_0" xmlns:urn1="urn:pins.payment.evry.com:domain:paymentutil:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:ReceiptOrderUpdateRequest>
         <urn:receiptOrder>
            <urn1:debitAccount>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/DEBETACCOUNTNO[1]}</urn1:debitAccount>
            <!--You have a CHOICE of the next 2 items at this level-->
            <urn1:transactionId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn1:transactionId>
            <urn1:receiptType>PRINT</urn1:receiptType>
         </urn:receiptOrder>
      </urn:ReceiptOrderUpdateRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="c7f02f64-aa70-48ad-985b-1ea3d37d1670" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="60581ed7-8f4d-4df8-b1ca-2a2b34f4692a" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="7368e3d8-b60b-4819-9ad2-f50794bd8763" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="MessageContentAssertion" id="5f179f28-d928-4896-bc53-56b6d0acdbd4" name="Message Content Assertion">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentutil:v2_0';
//ns3:ReceiptOrderUpdateResponse[1]/ns2:ResponseState[1]/ns1:ErrorCode[1]</con:xpath>
              <con:element>ErrorCode</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentutil:v2_0';
//ns3:ReceiptOrderUpdateResponse[1]/ns2:ResponseState[1]/ns1:Severity[1]</con:xpath>
              <con:element>Severity</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentutil:v2_0';
//ns3:ReceiptOrderUpdateResponse[1]/ns2:ResponseState[1]/ns1:ComponentId[1]</con:xpath>
              <con:element>ComponentId</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>111</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentutil:v2_0';
//ns3:ReceiptOrderUpdateResponse[1]/ns2:ResponseState[1]/ns1:Message[1]</con:xpath>
              <con:element>Message</con:element>
              <con:type>XmlString</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>OK</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentutil:v2_0';
//ns3:ReceiptOrderUpdateResponse[1]/ns2:ResponseState[1]/ns1:LogSequence[1]</con:xpath>
              <con:element>LogSequence</con:element>
              <con:type>XmlLong</con:type>
              <con:operator>exists</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue xsi:nil="true"/>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns2='http://edb.com/ws/WSCommon_v22';
declare namespace ns1='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns3='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns4='urn:pins.payment.evry.com:ws:paymentutil:v2_0';
//ns4:ReceiptOrderUpdateResponse[1]/ns3:ResponseState[1]/ns2:LogSequence[1]/@ns1:nil</con:xpath>
              <con:element>@xsi:nil</con:element>
              <con:type/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='urn:pins.payment.evry.com:domain:paymentutil:v2_0';
declare namespace ns2='urn:pins.payment.evry.com:ws:paymentutil:v2_0';
//ns2:ReceiptOrderUpdateResponse[1]/ns2:receiptOrder[1]/ns1:debitAccount[1]</con:xpath>
              <con:element>ns3:debitAccount</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/DEBETACCOUNTNO[1]}</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='urn:pins.payment.evry.com:domain:paymentutil:v2_0';
declare namespace ns2='urn:pins.payment.evry.com:ws:paymentutil:v2_0';
//ns2:ReceiptOrderUpdateResponse[1]/ns2:receiptOrder[1]/ns1:transactionId[1]</con:xpath>
              <con:element>ns3:transactionId</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>152178730</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='urn:pins.payment.evry.com:domain:paymentutil:v2_0';
declare namespace ns2='urn:pins.payment.evry.com:ws:paymentutil:v2_0';
//ns2:ReceiptOrderUpdateResponse[1]/ns2:receiptOrder[1]/ns1:receiptType[1]</con:xpath>
              <con:element>ns3:receiptType</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>PRINT</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns4:ReceiptOrderUpdateResponse xmlns:ns6="urn:pins.payment.evry.com:domain:nationalinformation-nor:v2_0" xmlns:ns5="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:ns4="urn:pins.payment.evry.com:ws:paymentutil:v2_0" xmlns:ns3="urn:pins.payment.evry.com:domain:paymentutil:v2_0" xmlns:ns2="urn:pins.payment.evry.com:domain:complex-types:v2_0" xmlns="http://edb.com/ws/WSCommon_v22">
         <ns5:ResponseState>
            <ErrorCode>0</ErrorCode>
            <Severity>0</Severity>
            <ComponentId>111</ComponentId>
            <Message>OK</Message>
            <LogSequence xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns5:ResponseState>
         <ns4:receiptOrder>
            <ns3:debitAccount>42125493704</ns3:debitAccount>
            <ns3:transactionId>152178730</ns3:transactionId>
            <ns3:receiptType>PRINT</ns3:receiptType>
         </ns4:receiptOrder>
      </ns4:ReceiptOrderUpdateResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentutil:v2_0/PINSPaymentUtil_V2_0PortType/ReceiptOrderUpdateRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="Verify ReceiptOrder" id="43a70835-dc11-4d3f-8261-3eb0379bf0c6">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWHDATA</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:PWHDATA/pwh@//10.246.89.97:1530/pwh_g_st</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select TRANSACTIONSID,PAYMENTTYPE,PAYMENTSTATUS,RECEIPTORDER from TRANSACTIONS where TRANSACTIONSID = '${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}'</con:query>
      <con:assertion type="MessageContentAssertion" id="8da21536-2427-4cde-a860-6d509bf6b1f1" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]</con:xpath>
            <con:element>TRANSACTIONSID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>68719</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENTTYPE[1]</con:xpath>
            <con:element>PAYMENTTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>DOKI</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENTSTATUS[1]</con:xpath>
            <con:element>PAYMENTSTATUS</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>LAFU</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RECEIPTORDER[1]</con:xpath>
            <con:element>RECEIPTORDER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>PRINT</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <TRANSACTIONSID>68719</TRANSACTIONSID>
         <PAYMENTTYPE>DOKI</PAYMENTTYPE>
         <PAYMENTSTATUS>COMP</PAYMENTSTATUS>
         <RECEIPTORDER>STICKER</RECEIPTORDER>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="b17d5be3-760f-4128-8273-aabbf8906267" name="PaymentRead_V2_0">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V2_0PortTypeSoap11</con:interface>
      <con:operation>PaymentRead</con:operation>
      <con:request name="PaymentRead_V2_0" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="530d89d5-87c1-419e-a07a-7e0c3748e3f5">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:22561/pin/services/PINSPayment_V2_0</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:pins.payment.evry.com:ws:paymentinitiation:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         
      <urn:transactionId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId></urn:PaymentReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="18615d4b-a0fa-47c9-bc10-3df73274eb26" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="36f6d1ca-ab63-4f6c-aff0-d48e8e46a248" name="Not SOAP Fault"/>
        <con:assertion type="XPath Match" id="71e3e525-2d5c-4f01-99fe-ecf8e2e6a32b" name="XPath Match_RECEIPT_ORDER_REMOVE">
          <con:configuration>
            <path>declare namespace ns4='urn:pins.payment.evry.com:domain:paymentinitiation:v2_0';
declare namespace ns2='urn:pins.payment.evry.com:ws:paymentinitiation:v2_0';
//ns2:PaymentReadResponse[1]/ns2:paymentResult[1]/ns4:operationsArray</path>
            <content>*RECEIPT_ORDER_REMOVE*</content>
            <allowWildcards>true</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="2bbca57a-c505-49c9-a08c-6c20cfe46241" name="XPath Match">
          <con:configuration>
            <path>declare namespace ns4='urn:pins.payment.evry.com:domain:paymentinitiation:v2_0';
declare namespace ns8='urn:pins.payment.evry.com:domain:nationalinformation-nor:v2_0';
declare namespace ns2='urn:pins.payment.evry.com:ws:paymentinitiation:v2_0';
//ns2:PaymentReadResponse[1]/ns2:paymentResult[1]/ns4:result[1]/ns4:transaction[1]/ns4:nationalSpecificPaymentInformation[1]/ns8:receiptOrder[1]</path>
            <content>${Properties#ReceiptOrder}</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="78ec1398-a6fe-4e8a-8abd-45b6a6f10d8f" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
		
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	 slurperResponse = new XmlSlurper().parseText(xmlHold)
	 receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	log.info "receiptOrderRes--" + receiptOrderRes

      receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )

assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]
//log.info slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
//log.info slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.size()

def x = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList


def tempList = [ ]
switch (paymentStatus){

	case 'COMP':
		if (receiptOrder == 'NONE' )  {
			tempList.add ('RECEIPT_ORDER_STICKER')
		}
		else if ( receiptOrder == 'STICKER'){
			tempList.add ('RECEIPT_ORDER_STICKER')					
		}		
		break
	case [ 'RFDD', 'LAFU','STOP']:
		if (receiptOrder == 'NONE' )  {
			tempList.add ('RECEIPT_ORDER_STICKER')
			tempList.add ('RECEIPT_ORDER_PRINT')
		}
		else if ( receiptOrder == 'STICKER'){
			tempList.add ('RECEIPT_ORDER_PRINT')		
			tempList.add ('RECEIPT_ORDER_REMOVE')						
		}		
		else if ( receiptOrder == 'PRINT'){
			tempList.add ('RECEIPT_ORDER_STICKER')		
			tempList.add ('RECEIPT_ORDER_REMOVE')			
		}
		break
	default:
	assert false,'No case found'
		log.info "No case found"	
}

assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentinitiation:v2_0/PINSPayment_V2_0PortType/PaymentReadRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="24c4e43d-a281-4a77-a276-86a5f11e6562" name="PaymentRead_V1_10">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V1_10PortTypeSoap11</con:interface>
      <con:operation>PaymentRead</con:operation>
      <con:request name="PaymentRead_V1_10" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4de0c497-ecb2-43ae-aeeb-7d62016cdeff">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPayment_V1_10</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentinitiation:v1_10">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         
         
      <urn:transactionId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId></urn:PaymentReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="aaf9935f-2460-46be-a311-a413b0276b6f" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="8d177336-c2cd-4698-b169-b7c50d63370c" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="b0bb07f3-b734-4f93-b7c2-6214cc15b74e" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="94c6be2a-0eca-4e19-8ff6-f0f81c5b454d" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentinitiation:v1_10/PINSPayment_V1_10PortType/PaymentReadRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="ced49fae-3672-4f93-ae2f-e69b9ff1a42f" name="PaymentRead_V1_9">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V1_9PortTypeSoap11</con:interface>
      <con:operation>PaymentRead</con:operation>
      <con:request name="PaymentRead_V1_9" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4c8ca1ec-e536-4652-9d40-a3f2852b6e90">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPayment_V1_9</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentinitiation:v1_9">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         <urn:transactionId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId>
      </urn:PaymentReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="GroovyScriptAssertion" id="bf010744-199f-4422-bd04-02b418565dee" name="Script Assertion">
          <con:configuration>
            <scriptText>import com.eviware.soapui.support.XmlHolder
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;

def path=context.expand( '${projectDir}')
String curStepName = (String)context.getCurrentStep().getLabel()

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context ) 
def response = groovyUtils.getXmlHolder(curStepName + "#Response")
def errorCode=response.getNodeValue("//*:ErrorCode");
def testCase = context.getCurrentStep().getTestCase().getLabel()
def endPoint = messageExchange.getEndpoint()

path=path+"\\results"
File dir = new File(path);
if (!dir.exists())
{
                log.info 'Creating Directory'
                dir.mkdir();
}

Date date = new Date();
SimpleDateFormat df = new SimpleDateFormat("dd-M-yyyy hh:mm:ss a zz");    
df.setTimeZone(TimeZone.getTimeZone("Europe/Oslo"));

def datetime = df.format(date)

SimpleDateFormat fn = new SimpleDateFormat("dd_M_yyyy_hh_mm_ss_a_zz");    
def fileName = fn.format(date)

//log.info path 
def fout = new File(path+"\\"+testCase+" - "+curStepName+"_"+fileName+"_"+errorCode+".txt",)


fout.write("Time Submitted		:	"+datetime+"\r\n")
fout.append("End Point Used		:	"+endPoint+"\r\n")
fout.append("Time Taken		:	"+messageExchange.timeTaken+"ms\r\n")
fout.append("Executed in test set	:	"+testCase+" - "+curStepName+"_"+fileName)
fout.append("=========================================================================================================================\r\n","UTF-8")
fout.append("                                                                                                   REQUEST\r\n\r\n","UTF-8")
fout.append(messageExchange.getRequestHeaders())
fout.append("\n\n")
fout.append(new String( messageExchange.getRequestContent() ).replace("\n","\r\n"),"UTF-8")
fout.append("\r\n\r\n","UTF-8")
fout.append("=========================================================================================================================\r\n","UTF-8")
fout.append("                                                                                                   RESPONSE\r\n\r\n","UTF-8")
fout.append(messageExchange.getResponseHeaders())
fout.append("\n\n")
fout.append(new String( messageExchange.getResponseContent() ).replace("\n","\n"),"UTF-8")
fout.append("\r\n\r\n","UTF-8")
fout.append("=========================================================================================================================\r\n","UTF-8")</scriptText>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="ba484c66-2574-4a19-8683-e1cbc577df24" name="Script Assertion 2">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			assert receiptOrder.toString().toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentinitiation:v1_9/PINSPayment_V1_9PortType/PaymentReadRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="b2648bd9-cc0b-420b-ad78-059ec1286c0a" name="PaymentRead_V1_8">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V1_8PortTypeSoap11</con:interface>
      <con:operation>PaymentRead</con:operation>
      <con:request name="PaymentRead_V1_8" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="b9ed9184-dbef-466c-a187-0f524d041acc">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPayment_V1_8</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentinitiation:v1_8">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         <urn:transactionId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId>
        
      </urn:PaymentReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="3bfec32a-b18d-462d-a202-366fba81279c" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="3aa3d478-c928-4b6c-a92a-b81ccb15ee3d" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="1f68f272-bc1a-427c-83cb-74ed6eb43cee" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="d34fe74e-e94d-457e-9a1a-44d82ef01aa9" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentinitiation:v1_8/PINSPayment_V1_8PortType/PaymentReadRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="4c9db976-d8c8-4eef-883c-0cfeb58f5b72" name="PaymentRead_V1_6" disabled="true">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V1_6PortTypeSoap11</con:interface>
      <con:operation>PaymentRead</con:operation>
      <con:request name="PaymentRead_V1_6" id="f6739e3b-4d5e-4a96-9f5c-1c831c0c3aee">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app04.man.cosng.net:22641/pin/services/PINSPayment_V1_6</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentinitiation:v1_6">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         <urn:transactionId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId>
      </urn:PaymentReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="608b0f3d-5a38-4bac-97d7-0fcb0fdb57c1" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="72d06540-5e4e-43b8-b5cb-92fa2714d343" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="70cc0595-27d9-4c3e-8b05-514e14533d32" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="44b3b502-8e61-49af-af07-19b6f1e74d6f" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.edb.com:ws:paymentinitiation:v1_6/PINSPayment_V1_6PortType/PaymentReadRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="a4de4fe1-a97d-43bf-8510-3aaa4fdb8f88" name="PaymentRead_V1_7">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V1_7PortTypeSoap11</con:interface>
      <con:operation>PaymentRead</con:operation>
      <con:request name="PaymentRead_V1_7" id="1e269f04-fc3d-4c74-91fb-2ee229452ce1">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.108:22641/pin/services/PINSPayment_V1_7Service</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentinitiation:v1_7">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         <urn:transactionId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId>
      </urn:PaymentReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="GroovyScriptAssertion" id="7ec1382a-d645-43b0-85b4-afde901c373a" name="Script Assertion">
          <con:configuration>
            <scriptText>import com.eviware.soapui.support.XmlHolder
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;

def path=context.expand( '${projectDir}')
String curStepName = (String)context.getCurrentStep().getLabel()

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context ) 
def response = groovyUtils.getXmlHolder(curStepName + "#Response")
def errorCode=response.getNodeValue("//*:ErrorCode");
def testCase = context.getCurrentStep().getTestCase().getLabel()
def endPoint = messageExchange.getEndpoint()

path=path+"\\results"
File dir = new File(path);
if (!dir.exists())
{
                log.info 'Creating Directory'
                dir.mkdir();
}

Date date = new Date();
SimpleDateFormat df = new SimpleDateFormat("dd-M-yyyy hh:mm:ss a zz");    
df.setTimeZone(TimeZone.getTimeZone("Europe/Oslo"));

def datetime = df.format(date)

SimpleDateFormat fn = new SimpleDateFormat("dd_M_yyyy_hh_mm_ss_a_zz");    
def fileName = fn.format(date)

//log.info path 
def fout = new File(path+"\\"+testCase+" - "+curStepName+"_"+fileName+"_"+errorCode+".txt",)


fout.write("Time Submitted		:	"+datetime+"\r\n")
fout.append("End Point Used		:	"+endPoint+"\r\n")
fout.append("Time Taken		:	"+messageExchange.timeTaken+"ms\r\n")
fout.append("Executed in test set	:	"+testCase+" - "+curStepName+"_"+fileName)
fout.append("=========================================================================================================================\r\n","UTF-8")
fout.append("                                                                                                   REQUEST\r\n\r\n","UTF-8")
fout.append(messageExchange.getRequestHeaders())
fout.append("\n\n")
fout.append(new String( messageExchange.getRequestContent() ).replace("\n","\r\n"),"UTF-8")
fout.append("\r\n\r\n","UTF-8")
fout.append("=========================================================================================================================\r\n","UTF-8")
fout.append("                                                                                                   RESPONSE\r\n\r\n","UTF-8")
fout.append(messageExchange.getResponseHeaders())
fout.append("\n\n")
fout.append(new String( messageExchange.getResponseContent() ).replace("\n","\n"),"UTF-8")
fout.append("\r\n\r\n","UTF-8")
fout.append("=========================================================================================================================\r\n","UTF-8")</scriptText>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="005dc888-1020-4d47-8b3d-0051a0a480a2" name="ValidateOperationalArray">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			assert receiptOrder.toString().toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.edb.com:ws:paymentinitiation:v1_7/PINSPayment_V1_7PortType/PaymentReadRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="91e2fa16-2ba0-4e34-95f4-da582dbc0f78" name="PaymentAccountSearch_V2_0">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V2_0PortTypeSoap11</con:interface>
      <con:operation>PaymentAccountSearch</con:operation>
      <con:request name="PaymentAccountSearch_V2_0" id="3f6dd37a-ca41-4453-9619-abd44cd38ea8">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app02.man.cosng.net:22411/pin/services/PINSPaymentSearch_V2_0</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v2_0" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v2_0" xmlns:urn2="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:urn3="urn:pins.payment.evry.com:domain:complex-types:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentAccountSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <urn2:StartIndex>0</urn2:StartIndex>
                  <urn2:MaximumNumberOfElements>10</urn2:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:accountCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 4 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn3:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn3:amountMaxMin>
                  <!--Optional:-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:requestedExecutionDate><urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:accountCriteria>
         </urn:searchCriteria>
      </urn:PaymentAccountSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="01d80cb6-fc27-4c6d-8480-de8ce85a6460" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="e53a59ca-2ed7-444d-95dd-f65fa703b34e" name="Not SOAP Fault"/>
        <con:assertion type="MessageContentAssertion" id="f64eb074-4789-4ffb-a392-21faff04cf1a" name="Message Content Assertion">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns3:PaymentAccountSearchResponse[1]/ns2:ResponseState[1]/ns1:ErrorCode[1]</con:xpath>
              <con:element>ErrorCode</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns3:PaymentAccountSearchResponse[1]/ns2:ResponseState[1]/ns1:Severity[1]</con:xpath>
              <con:element>Severity</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns3:PaymentAccountSearchResponse[1]/ns2:ResponseState[1]/ns1:ComponentId[1]</con:xpath>
              <con:element>ComponentId</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>111</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns3:PaymentAccountSearchResponse[1]/ns2:ResponseState[1]/ns1:Message[1]</con:xpath>
              <con:element>Message</con:element>
              <con:type>XmlString</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Not authorized for accounts</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns3:PaymentAccountSearchResponse[1]/ns2:ResponseState[1]/ns1:LogSequence[1]</con:xpath>
              <con:element>LogSequence</con:element>
              <con:type>XmlLong</con:type>
              <con:operator>exists</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue xsi:nil="true"/>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns2='http://edb.com/ws/WSCommon_v22';
declare namespace ns1='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns3='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns4='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns4:PaymentAccountSearchResponse[1]/ns3:ResponseState[1]/ns2:LogSequence[1]/@ns1:nil</con:xpath>
              <con:element>@xsi:nil</con:element>
              <con:type/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns5:PaymentAccountSearchResponse xmlns:ns8="urn:pins.payment.evry.com:ws:paymentutil:v2_0" xmlns:ns7="urn:pins.payment.evry.com:domain:paymentutil:v2_0" xmlns:ns6="urn:pins.payment.evry.com:domain:nationalinformation-nor:v2_0" xmlns:ns5="urn:pins.payment.evry.com:ws:paymentsearch:v2_0" xmlns:ns4="urn:pins.payment.evry.com:domain:complex-types:v2_0" xmlns:ns3="urn:pins.payment.evry.com:domain:search:v2_0" xmlns:ns2="urn:pins.payment.evry.com:domain:common:v2_0" xmlns="http://edb.com/ws/WSCommon_v22">
         <ns2:ResponseState>
            <ErrorCode>6485</ErrorCode>
            <Severity>2</Severity>
            <ComponentId>111</ComponentId>
            <Message>Not authorized for accounts</Message>
            <LogSequence xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns2:ResponseState>
      </ns5:PaymentAccountSearchResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="efbc7a04-a37a-4567-822f-c172ea4261e7" name="XPath Match_RECEIPT_ORDER_REMOVE">
          <con:configuration>
            <path>declare namespace ns5='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:domain:search:v2_0';
//ns5:PaymentAccountSearchResponse[1]/ns5:result[1]/ns3:result[1]/ns3:operationsArray</path>
            <content>*RECEIPT_ORDER_REMOVE*</content>
            <allowWildcards>true</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="4172656e-5f94-4a1f-a7ba-b76d9a8bb485" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v2_0/PINSPaymentSearch_V2_0PortType/PaymentAccountSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="8311c402-d597-40c2-bc8d-c1f4892fc3a1" name="PaymentAccountSearch_V1_9">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_9PortTypeSoap11</con:interface>
      <con:operation>PaymentAccountSearch</con:operation>
      <con:request name="PaymentAccountSearch_V1_9" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="69dde6bb-59cd-402c-bb5f-42399e8f9c37">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:22561/pin/services/PINSPaymentSearch_V1_9</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_9" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_9" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v8">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentAccountSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
            </urn1:commonCriteria>
            <urn1:accountCriteria>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId></urn1:accountCriteria>
         </urn:searchCriteria>
      </urn:PaymentAccountSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="93b4b2f8-7269-414a-a736-f2fa9a804177" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="21dfaa1c-dcfb-4564-a5b6-cfd88dccb843" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="499e7d44-a396-41d1-807e-600c3f88f288" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="c075d8d2-7388-4174-a850-0398d39cdc0d" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v1_9/PINSPaymentSearch_V1_9PortType/PaymentAccountSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="8ee9610d-fe31-420e-b8f9-12dd08b83aef" name="PaymentAccountSearch_V1_8">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_8PortTypeSoap11</con:interface>
      <con:operation>PaymentAccountSearch</con:operation>
      <con:request name="PaymentAccountSearch_V1_8" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="60ca6026-7e07-451a-8fe8-b75bf75d5f9f">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_8</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_8" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_8" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v7">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentAccountSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:accountCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:amountMaxMin>
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
               </urn1:requestedExecutionDate>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <!--Optional:-->
            </urn1:accountCriteria>
         </urn:searchCriteria>
      </urn:PaymentAccountSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="05721439-c93d-4874-a574-d4fb44b89060" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="645c8744-7197-4f7d-9eca-b72dbb670f61" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="5f601e1d-ae48-4ee8-815c-1670c695d502" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="e5d6f2dd-8635-4aa8-b884-862b58fc22b8" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v1_8/PINSPaymentSearch_V1_8PortType/PaymentAccountSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="e71a402d-b76e-48c6-814d-7dae08fa0ede" name="PaymentAccountSearch_V1_7">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_7PortTypeSoap11</con:interface>
      <con:operation>PaymentAccountSearch</con:operation>
      <con:request name="PaymentAccountSearch_V1_7" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="3a6c6549-e34f-4bd0-9e13-fd67bbb095b6">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_7</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_7" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_7" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.evry.com:domain:sepa-complex-types:v6">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentAccountSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
            </urn1:commonCriteria>
            <urn1:accountCriteria>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId></urn1:accountCriteria>
         </urn:searchCriteria>
      </urn:PaymentAccountSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="25934a46-3bcb-42fc-b1c0-8102a96ae54e" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="4bc2d7b0-eb5b-4bd2-93b0-8a915a995854" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="6a703567-20d3-4f98-a5ee-36bca3678b49" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="6b505e92-47da-4493-ae48-87c706229af6" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v1_7/PINSPaymentSearch_V1_7PortType/PaymentAccountSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="80c0f81c-72c9-447a-9652-964b21cfae60" name="PaymentAccountSearch_V1_6">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_6PortTypeSoap11</con:interface>
      <con:operation>PaymentAccountSearch</con:operation>
      <con:request name="PaymentAccountSearch_V1_6" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5429f611-c00c-47d5-88d4-bc9d53503ce6">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_6</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentsearch:v1_6" xmlns:urn1="urn:pins.payment.edb.com:domain:search:v1_6" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.edb.com:domain:sepa-complex-types:v5">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentAccountSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:accountCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:amountMaxMin>
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:dateFromTo>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:dateFromTo>
               </urn1:requestedExecutionDate>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <!--Optional:-->
            </urn1:accountCriteria>
         </urn:searchCriteria>
      </urn:PaymentAccountSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="5129309d-c244-4926-9745-aa6ae3f9a729" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="8ffb7db6-bc49-4157-8273-94841aefeb8d" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="ca78a68d-63f3-420b-9bc9-21345996fe69" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="ceaa1c00-f903-4c6e-a4b4-0e60aa729e96" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.edb.com:ws:paymentsearch:v1_6/PINSPaymentSearch_V1_6PortType/PaymentAccountSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="f0aa4a8d-ac33-465a-b3b5-7a2af52ac5a5" name="PaymentMessageSearch_V2_0">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V2_0PortTypeSoap11</con:interface>
      <con:operation>PaymentMessageSearch</con:operation>
      <con:request name="PaymentMessageSearch_V2_0" id="f4e5576a-b326-4343-bc99-8e8cd737f084">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app02.man.cosng.net:22411/pin/services/PINSPaymentSearch_V2_0</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v2_0" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v2_0" xmlns:urn2="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:urn3="urn:pins.payment.evry.com:domain:complex-types:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentMessageSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <urn2:StartIndex>0</urn2:StartIndex>
                  <urn2:MaximumNumberOfElements>10</urn2:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:messageCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 4 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn3:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn3:amountMaxMin>
                  <!--Optional:-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Zero or more repetitions:-->
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
               </urn1:requestedExecutionDate><urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:messageCriteria>
         </urn:searchCriteria>
      </urn:PaymentMessageSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="6c7e88f2-bcb8-47f9-a9b8-a86748843bbb" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="81e4cc61-889d-4150-8906-a1fd93df0414" name="Not SOAP Fault"/>
        <con:assertion type="MessageContentAssertion" id="3f2d1ab4-5e82-4090-8ed8-ef6d27f673fa" name="Message Content Assertion">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns3:PaymentMessageSearchResponse[1]/ns2:ResponseState[1]/ns1:ErrorCode[1]</con:xpath>
              <con:element>ErrorCode</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns3:PaymentMessageSearchResponse[1]/ns2:ResponseState[1]/ns1:Severity[1]</con:xpath>
              <con:element>Severity</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns3:PaymentMessageSearchResponse[1]/ns2:ResponseState[1]/ns1:ComponentId[1]</con:xpath>
              <con:element>ComponentId</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>111</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns3:PaymentMessageSearchResponse[1]/ns2:ResponseState[1]/ns1:Message[1]</con:xpath>
              <con:element>Message</con:element>
              <con:type>XmlString</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>Not authorized for accounts</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns3:PaymentMessageSearchResponse[1]/ns2:ResponseState[1]/ns1:LogSequence[1]</con:xpath>
              <con:element>LogSequence</con:element>
              <con:type>XmlLong</con:type>
              <con:operator>exists</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue xsi:nil="true"/>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns2='http://edb.com/ws/WSCommon_v22';
declare namespace ns1='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns3='urn:pins.payment.evry.com:domain:common:v2_0';
declare namespace ns4='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
//ns4:PaymentMessageSearchResponse[1]/ns3:ResponseState[1]/ns2:LogSequence[1]/@ns1:nil</con:xpath>
              <con:element>@xsi:nil</con:element>
              <con:type/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns5:PaymentMessageSearchResponse xmlns:ns8="urn:pins.payment.evry.com:ws:paymentutil:v2_0" xmlns:ns7="urn:pins.payment.evry.com:domain:paymentutil:v2_0" xmlns:ns6="urn:pins.payment.evry.com:domain:nationalinformation-nor:v2_0" xmlns:ns5="urn:pins.payment.evry.com:ws:paymentsearch:v2_0" xmlns:ns4="urn:pins.payment.evry.com:domain:complex-types:v2_0" xmlns:ns3="urn:pins.payment.evry.com:domain:search:v2_0" xmlns:ns2="urn:pins.payment.evry.com:domain:common:v2_0" xmlns="http://edb.com/ws/WSCommon_v22">
         <ns2:ResponseState>
            <ErrorCode>6485</ErrorCode>
            <Severity>2</Severity>
            <ComponentId>111</ComponentId>
            <Message>Not authorized for accounts</Message>
            <LogSequence xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns2:ResponseState>
      </ns5:PaymentMessageSearchResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="9da8ab3f-ceb8-4abf-a093-2afa2726d739" name="XPath Match_RECEIPT_ORDER_REMOVE">
          <con:configuration>
            <path>declare namespace ns5='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:domain:search:v2_0';
//ns5:PaymentMessageSearchResponse[1]/ns5:result[1]/ns3:transactionResult[1]/ns3:operationsArray</path>
            <content>*RECEIPT_ORDER_REMOVE*</content>
            <allowWildcards>true</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="1435eafb-92d5-4d66-8c37-b8ce01e47ca7" name="XPath Match_STICCKER_TAG">
          <con:configuration>
            <path>declare namespace ns6='urn:pins.payment.evry.com:domain:nationalinformation-nor:v2_0';
declare namespace ns5='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:domain:search:v2_0';
//ns5:PaymentMessageSearchResponse[1]/ns5:result[1]/ns3:transactionResult[1]/ns3:nationalSpecificPaymentInformation[1]/ns6:receiptOrder[1]</path>
            <content>${Properties#ReceiptOrder}</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="36d22ed6-f51c-4211-b83c-eacb3bd2736b" name="Validate_OperationalArray">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v2_0/PINSPaymentSearch_V2_0PortType/PaymentMessageSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="bc0357bb-5284-4705-b9e9-b5cd2dd6f69b" name="PaymentMessageSearch_V1_9">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_9PortTypeSoap11</con:interface>
      <con:operation>PaymentMessageSearch</con:operation>
      <con:request name="PaymentMessageSearch_V1_9" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="3bd21bbd-8c2c-41c5-ae84-146be97a9233">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_9</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_9" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_9" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v8">
   <soapenv:Header>
       <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentMessageSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
            </urn1:commonCriteria>
            <urn1:messageCriteria>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId></urn1:messageCriteria>
         </urn:searchCriteria>
      </urn:PaymentMessageSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="5e4bc391-d871-49b4-a0c3-510045d6e1d8" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="0d42f4d7-79a3-436f-b7df-92527290567c" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="a93ea9d5-701b-4602-9ed2-be75a8869a97" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="3abd549b-f4ca-42f9-b65e-a7d937963719" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v1_9/PINSPaymentSearch_V1_9PortType/PaymentMessageSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="b3b81f67-3f62-4a21-9fb1-81c5ffd51827" name="PaymentMessageSearch_V1_8">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_8PortTypeSoap11</con:interface>
      <con:operation>PaymentMessageSearch</con:operation>
      <con:request name="PaymentMessageSearch_V1_8" id="b443632c-9eb0-48db-80df-cad702689568">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app04.man.cosng.net:22641/pin/services/PINSPaymentSearch_V1_8</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_8" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_8" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v7">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentMessageSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:messageCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Zero or more repetitions:-->
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:requestedExecutionDate>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <!--Optional:-->
            </urn1:messageCriteria>
         </urn:searchCriteria>
      </urn:PaymentMessageSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="428d3e84-2ca7-4a53-86c2-afc6127d8ca5" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="4295ba43-0217-4d91-ada8-211b0afefc46" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="cb6a3c45-65b9-461a-8ecc-4726edda3fe9" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="cef8e810-4c0e-482a-9e95-129146905016" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v1_8/PINSPaymentSearch_V1_8PortType/PaymentMessageSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="b419bf03-d5f6-49e3-8fcb-a950fde25f94" name="PaymentMessageSearch_V1_7">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_7PortTypeSoap11</con:interface>
      <con:operation>PaymentMessageSearch</con:operation>
      <con:request name="PaymentMessageSearch_V1_7" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="81fd6c56-4c41-4906-a7ba-0013359446f0">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_7</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_7" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_7" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.evry.com:domain:sepa-complex-types:v6">
   <soapenv:Header>
       <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentMessageSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
            </urn1:commonCriteria>
            <urn1:messageCriteria>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId></urn1:messageCriteria>
         </urn:searchCriteria>
      </urn:PaymentMessageSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="1621a2ba-ccb1-475a-813a-e34bf370993f" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="cab7c96b-1b35-4bb9-97cd-36497b34e201" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="e40fb0c9-fefd-498b-bf21-9eb531949a85" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="c243e9a9-17bd-4ba5-9d8b-2f9fc2e17043" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v1_7/PINSPaymentSearch_V1_7PortType/PaymentMessageSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="20b5d94b-1e01-49e5-aff2-5eee93dc36af" name="PaymentMessageSearch_V1_6">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_6PortTypeSoap11</con:interface>
      <con:operation>PaymentMessageSearch</con:operation>
      <con:request name="PaymentMessageSearch_V1_6" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="bb3e7f90-5252-43a3-bf67-5a4bfbb923ec">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_6</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentsearch:v1_6" xmlns:urn1="urn:pins.payment.edb.com:domain:search:v1_6" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.edb.com:domain:sepa-complex-types:v5">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentMessageSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:messageCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:amountMaxMin>
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Zero or more repetitions:-->
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:dateFromTo>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:dateFromTo>
               </urn1:requestedExecutionDate>
               <!--Optional:-->
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
            </urn1:messageCriteria>
         </urn:searchCriteria>
      </urn:PaymentMessageSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="91cffcb9-fc11-494e-a0b0-8ff50e74f71f" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="cccb803d-4ba7-4b49-91e7-df8f35372f71" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="c0875e61-4c3b-449b-946a-db6f83820416" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="54d1128a-e10d-4db9-98be-254d184d1401" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.edb.com:ws:paymentsearch:v1_6/PINSPaymentSearch_V1_6PortType/PaymentMessageSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="1c6cbf4c-425f-4b82-9c2f-0ccf04fb34f6" name="PaymentTransactionSearch_V2_0">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V2_0PortTypeSoap11</con:interface>
      <con:operation>PaymentTransactionSearch</con:operation>
      <con:request name="PaymentTransactionSearch_V2_0" id="7638b8e1-70d4-4e75-809e-1d54db712e2b">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app02.man.cosng.net:22411/pin/services/PINSPaymentSearch_V2_0</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v2_0" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v2_0" xmlns:urn2="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:urn3="urn:pins.payment.evry.com:domain:complex-types:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentTransactionSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <urn2:StartIndex>0</urn2:StartIndex>
                  <urn2:MaximumNumberOfElements>10</urn2:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 4 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn3:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn3:amountMaxMin>
                  <!--Optional:-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Zero or more repetitions:-->
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId><urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:requestedExecutionDate>
               <!--Optional:-->
               <!--Optional:-->
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentTransactionSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="5f55896c-75d1-4f6c-9acb-25eb742fe0e0" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="60d368f0-95aa-452d-9d47-61aff0d328a2" name="Not SOAP Fault"/>
        <con:assertion type="XPath Match" id="7f327e12-1404-450c-b48c-ee6d2c8502ec" name="XPath Match_RECEIPT_ORDER_REMOVE">
          <con:configuration>
            <path>declare namespace ns5='urn:pins.payment.evry.com:ws:paymentsearch:v2_0';
declare namespace ns3='urn:pins.payment.evry.com:domain:search:v2_0';
//ns5:PaymentTransactionSearchResponse[1]/ns5:result[1]/ns3:result[1]/ns3:operationsArray</path>
            <content>*RECEIPT_ORDER_REMOVE*</content>
            <allowWildcards>true</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="fef9bb3a-e281-4f66-850e-8745a1bebf69" name="Validate_OperationalArray">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			assert receiptOrder.toString().toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v2_0/PINSPaymentSearch_V2_0PortType/PaymentTransactionSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="f1764847-4aa5-41c6-9a00-1be7f034645e" name="PaymentTransactionSearch_V1_9">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_9PortTypeSoap11</con:interface>
      <con:operation>PaymentTransactionSearch</con:operation>
      <con:request name="PaymentTransactionSearch_V1_9" id="aadf645f-2749-4957-a8a0-b7017697dc86">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app04.man.cosng.net:22641/pin/services/PINSPaymentSearch_V1_9</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_9" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_9" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v8">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentTransactionSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 4 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:amountMaxMin>
                  <!--Optional:-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Zero or more repetitions:-->
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:requestedExecutionDate>
               <!--Optional:-->
               <!--Optional:-->
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentTransactionSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="b776fbd8-ff0c-41ff-b514-1b0ce4b3d91b" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="83300c2a-74a2-42ba-9117-1deae74b5f17" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="bab344a8-026a-4ddf-a3b2-82857d3f43e6" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="e4afed71-6c10-44df-aa8b-fa4b1e5e0376" name="ReceiptOrderValidate">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v1_9/PINSPaymentSearch_V1_9PortType/PaymentTransactionSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="136f7bc9-347a-44fe-a346-7d8b39b68680" name="PaymentTransactionSearch_V1_8">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_8PortTypeSoap11</con:interface>
      <con:operation>PaymentTransactionSearch</con:operation>
      <con:request name="PaymentTransactionSearch_V1_8" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="7af65e03-3520-4295-9610-9c6be017a340">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_8</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_8" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_8" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v7">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentTransactionSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:amountMaxMin>
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Zero or more repetitions:-->
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId><urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
               </urn1:requestedExecutionDate>
               <!--Optional:-->
               <!--Optional:-->
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentTransactionSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="05d03fb1-5990-4ee3-9723-084b5f22ac49" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="ffa119d2-de6e-4b5b-9278-235fd480cddf" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="1f0a8029-76c2-430f-9e5c-cf3fb4d3f708" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="77d6719c-ff5f-4597-888b-c76a9d472180" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v1_8/PINSPaymentSearch_V1_8PortType/PaymentTransactionSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="a52fb663-b396-4441-b6bf-b8887de92aab" name="PaymentTransactionSearch_V1_7">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_7PortTypeSoap11</con:interface>
      <con:operation>PaymentTransactionSearch</con:operation>
      <con:request name="PaymentTransactionSearch_V1_7" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="2a6518aa-09d2-48b0-b50e-3fbc582c28ba">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_7</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_7" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_7" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.evry.com:domain:sepa-complex-types:v6">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentTransactionSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId></urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentTransactionSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="59aabcc7-3264-40c5-b574-5c790a97b9d8" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="f3c988c2-0e62-490c-a471-bc44f9c768b4" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="10736392-c798-4e19-9a66-4242b92c9e88" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="53cac538-45c4-49e6-abbe-04a24d7d2e5c" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v1_7/PINSPaymentSearch_V1_7PortType/PaymentTransactionSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="f684b67f-1984-495d-b281-1bd2745653df" name="PaymentTransactionSearch_V1_6">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_6PortTypeSoap11</con:interface>
      <con:operation>PaymentTransactionSearch</con:operation>
      <con:request name="PaymentTransactionSearch_V1_6" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="932e0766-ba31-4afa-9471-71ff884c7df3">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_6</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentsearch:v1_6" xmlns:urn1="urn:pins.payment.edb.com:domain:search:v1_6" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.edb.com:domain:sepa-complex-types:v5">
   <soapenv:Header>
       <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentTransactionSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     
                     <!--Optional:-->
                     
                  </urn2:amountMaxMin>
                  <!--Optional:-->
                  
               </urn1:amount>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Zero or more repetitions:-->
               
               <!--Zero or more repetitions:-->
               
               <!--Optional:-->
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId><urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
                  <urn2:dateFromTo>
                     <!--Optional:-->
                     
                     <!--Optional:-->
                     
                  </urn2:dateFromTo>
               </urn1:requestedExecutionDate>
               <!--Optional:-->
               
               <!--Optional:-->
               
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentTransactionSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="dc489511-51d8-4fbb-9c45-337a997d1056" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="7da00380-422e-47cf-9d5d-fd37d7891f5a" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="9f214ee0-36f7-4485-999b-aa0d469a68c3" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="fd35bf7d-0f93-42ef-90a8-3d4c5e21b7d9" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.edb.com:ws:paymentsearch:v1_6/PINSPaymentSearch_V1_6PortType/PaymentTransactionSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="86ee94a8-387c-4c1e-8910-015af35bfe30" name="PaymentPaymentInfoSearch_V2_0">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V2_0PortTypeSoap11</con:interface>
      <con:operation>PaymentPaymentInfoSearch</con:operation>
      <con:request name="PaymentPaymentInfoSearch_V2_0" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="34d5a517-58a5-480e-810e-83df08c729ca">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V2_0</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v2_0" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v2_0" xmlns:urn2="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:urn3="urn:pins.payment.evry.com:domain:complex-types:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentPaymentInfoSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <urn2:StartIndex>0</urn2:StartIndex>
                  <urn2:MaximumNumberOfElements>10</urn2:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:paymentInfoCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 4 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn3:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn3:amountMaxMin>
                  <!--Optional:-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
               </urn1:requestedExecutionDate><urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:paymentInfoCriteria>
         </urn:searchCriteria>
      </urn:PaymentPaymentInfoSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="2562cdeb-98c0-49b5-b78c-b1e3e31858a9" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="e2349c06-bbb2-4f17-86d7-f1f347d13ade" name="Not SOAP Fault"/>
        <con:assertion type="GroovyScriptAssertion" id="08689b24-f573-4e1d-b9c3-99305c8b4d85" name="Validate_operationsArray">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v2_0/PINSPaymentSearch_V2_0PortType/PaymentPaymentInfoSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="32c15858-80f3-409a-9a78-d53505c59635" name="PaymentPaymentInfoSearch_V1_9">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_9PortTypeSoap11</con:interface>
      <con:operation>PaymentPaymentInfoSearch</con:operation>
      <con:request name="PaymentPaymentInfoSearch_V1_9" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="b7521088-fb5d-4f73-9952-ffdfbb54a07e">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:22561/pin/services/PINSPaymentSearch_V1_9</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_9" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_9" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v8">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentPaymentInfoSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
            </urn1:commonCriteria>
            <urn1:paymentInfoCriteria>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId></urn1:paymentInfoCriteria>
         </urn:searchCriteria>
      </urn:PaymentPaymentInfoSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="af6fb876-c1c1-44ad-a5d7-5b2ae591cc67" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="d67f0974-049a-46c7-afda-a3a5d39c8959" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="32b1a45b-83ee-43d2-a408-1051c15a4401" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="07dedb08-feb5-4771-98cb-9d0c354bf41a" name="ReceiptOrder Validation">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v1_9/PINSPaymentSearch_V1_9PortType/PaymentPaymentInfoSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="f06b9d4e-fb4c-442f-b748-3c7c662a2953" name="PaymentPaymentInfoSearch_V1_8">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_8PortTypeSoap11</con:interface>
      <con:operation>PaymentPaymentInfoSearch</con:operation>
      <con:request name="PaymentPaymentInfoSearch_V1_8" id="15b73130-2def-4a79-a3a6-9dd878af80a6">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app04.man.cosng.net:22641/pin/services/PINSPaymentSearch_V1_8</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_8" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_8" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v7">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentPaymentInfoSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:paymentInfoCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:amountMaxMin>
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
               </urn1:requestedExecutionDate>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:paymentInfoCriteria>
         </urn:searchCriteria>
      </urn:PaymentPaymentInfoSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="035a31ac-bf6e-49d7-8a0d-a25ecc2d2b6f" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="36df566c-bea7-405f-8457-607eab3346df" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="28bf79de-539b-4f55-9b58-a38090c7bd9f" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="0f73eefe-852d-4c72-8076-8d4676ceaadf" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v1_8/PINSPaymentSearch_V1_8PortType/PaymentPaymentInfoSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="dfcd133c-93e2-457d-8555-30b69090d3d8" name="PaymentPaymentInfoSearch_V1_7">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_7PortTypeSoap11</con:interface>
      <con:operation>PaymentPaymentInfoSearch</con:operation>
      <con:request name="PaymentPaymentInfoSearch_V1_7" id="eefdd2a3-c805-4acb-b229-142de04d7bf2">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app04.man.cosng.net:22641/pin/services/PINSPaymentSearch_V1_7Service</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_7" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_7" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.evry.com:domain:sepa-complex-types:v6">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentPaymentInfoSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:paymentInfoCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:amountMaxMin>
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:dateFromTo>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:dateFromTo>
               </urn1:requestedExecutionDate>
               <urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:paymentInfoCriteria>
         </urn:searchCriteria>
      </urn:PaymentPaymentInfoSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="9a915e8b-cec8-47e6-84fa-5007433077cd" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="b1c75a51-512e-48eb-b464-c3421da8c532" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="f2853fcc-8e45-45a7-b1f4-ac2eb77e1d1b" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="7984ff68-0e73-4228-8152-b194579038b3" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v1_7/PINSPaymentSearch_V1_7PortType/PaymentPaymentInfoSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="a845a285-4524-46ee-9e66-a435dace70bf" name="PaymentPaymentInfoSearch_V1_6">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_6PortTypeSoap11</con:interface>
      <con:operation>PaymentPaymentInfoSearch</con:operation>
      <con:request name="PaymentPaymentInfoSearch_V1_6" id="a10341ec-ccea-436a-ae5b-b802a2538430">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.108:22641/pin/services/PINSPaymentSearch_V1_6Service</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentsearch:v1_6" xmlns:urn1="urn:pins.payment.edb.com:domain:search:v1_6" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.edb.com:domain:sepa-complex-types:v5">
   <soapenv:Header>
       <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#UserID}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentPaymentInfoSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
            </urn1:commonCriteria>
            <urn1:paymentInfoCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     
                     <!--Optional:-->
                     
                  </urn2:amountMaxMin>
                  <!--Optional:-->
                  
               </urn1:amount>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Zero or more repetitions:-->
               
               <!--Optional:-->
               <urn1:requestedExecutionDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
                  <urn2:dateFromTo>
                     <!--Optional:-->
                     
                     <!--Optional:-->
                     
                  </urn2:dateFromTo>
               </urn1:requestedExecutionDate><urn1:messageId>${Fetch LAFU Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
            </urn1:paymentInfoCriteria>
         </urn:searchCriteria>
      </urn:PaymentPaymentInfoSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="abc59953-985b-4645-ab11-825a3b1d50cd" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="c23ad11c-ed9f-4008-96ae-17f403d34bdb" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="98a80cf7-e54a-44bb-a6bb-c0913cb01862" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="6ada248e-cb01-4b69-8313-bd68bfbdcb27" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.edb.com:ws:paymentsearch:v1_6/PINSPaymentSearch_V1_6PortType/PaymentPaymentInfoSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>ConnectionString</con:name>
      <con:value>jdbc:oracle:thin:pendata/pen@//10.246.89.97:1530/pen_g_functional</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>8167094a-00a6-434a-9588-31a9de204fb8</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>921ce22c-5c29-4284-a083-a1a1a0117555</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>a70f8027-178c-4de6-8bc5-74ac99217e62</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>258ba11c-c48e-4bfc-a96a-d5f6470381a6</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>aaa0220f-b6d3-48f0-a5a7-a2b12983d00a</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>1c7ee62f-4466-469a-84ec-e66f85b086d2</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>35f8d9ed-12a3-4131-a1a3-47b30c8a0708</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>52921ec2-4da3-4a88-a87e-bdcb9e775726</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>42d775b8-c8f2-4bac-8646-ad15bb253f8e</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>08f617c7-e529-4c47-9316-68b8a02e3a43</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>1b2f72c5-5fc2-440a-ae62-c56eddb5b9ed</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>0e09f67d-e171-4e98-8285-08b7c36fd12b</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>b89e8b1b-311e-486d-aee3-3d830953f5aa</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>6bdcf5f6-a385-4959-a505-bc32cf6cb7be</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>835d482a-c761-4e42-9203-7295528903f3</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
</con:testCase>
