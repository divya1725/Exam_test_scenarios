<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="c49635be-774b-465d-aa36-986fccaef5e7" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="DeleteReservation_FiskPayment_FTS up and STOP payment _FTS down" searchProperties="true" timeout="0" disabled="true" xmlns:con="http://eviware.com/soapui/config">
  <con:description>Need to check the RETRY_COUNT  in table RESERVATION_ATTEMPTS where reservation type is D where payment status is 'STOP' and make FTS UP and then again check the RESERVATION_ATTEMPTS 
and RESERVATION_DETAILS tabls</con:description>
  <con:settings>
    <con:setting id="IncludeOverview">true</con:setting>
    <con:setting id="IncludeResults">true</con:setting>
    <con:setting id="FlowLayout">true</con:setting>
    <con:setting id="ErrorDetails">true</con:setting>
    <con:setting id="IncludeCoverage">true</con:setting>
    <con:setting id="c49635be-774b-465d-aa36-986fccaef5e7fileName">DeleteReservation_FiskPayment_FTS-up-and-STOP-payment-_FTS-down</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="manualTestStep" name="Pre-conditions" id="6c3b9db3-3dd2-4b37-9b9f-5b5286848188" disabled="true">
    <con:description>Configure Bank in application.yml file to set max-expiry-days

File path : /ebs/s1/pin/pin-daemon/i1/releases/LATEST/resources

Set bank and  max-expiry-days as below for advanced credit:

advance-credit:
  bank: 4201
  max-expiry-days: 25
  payment-statuses:
    - "REJC"
    - "CANC"
    - "STOP"
    - "TBAP"
  create-reservation:
    poll-rate-milliseconds: 6000
  delete-reservation:
    poll-rate-milliseconds: 6000
 PBD SETUP
Define code word "FISK" in PBD for selected bank by setting field as "instrDeb" and function should be "SEREPTA

Need to update incorrectly the FTS endpoint in Application-adcm.yml (EBS)before STOP the Payment
fts:
  endpoint:
    location: ${haproxy.address}:13610 -->13600  then restart the pin-daemon .
then check the reservation_attempts table  till retry count 10 and then reservation table</con:description>
    <con:settings/>
    <con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:expectedResult>Need to</con:expectedResult>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="FetchAccount" id="b99a69b5-2396-473c-8e46-65bd263cc604">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWH</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:pwhdata/pwh@(DESCRIPTION=(CONNECT_TIMEOUT=10)(RETRY_COUNT=3)(RETRY_DELAY=1)(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_d13)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select distinct (customerID),accountnumber,currency from v_authorisation 
where custbankID='4201' and currency='NOK'
fetch first 5 rows only</con:query>
      <con:assertion type="MessageContentAssertion" id="f7dd410f-886d-4512-9a60-87170535ab15" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/CUSTOMERID[1]</con:xpath>
            <con:element>CUSTOMERID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>01010077571</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>42125748338</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/CURRENCY[1]</con:xpath>
            <con:element>CURRENCY</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <CUSTOMERID>01010077571</CUSTOMERID>
         <ACCOUNTNUMBER>42125748338</ACCOUNTNUMBER>
         <CURRENCY>NOK</CURRENCY>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:assertion type="JDBC Status" id="ee91176c-b69d-4d9a-a028-aa8cdf2ba8aa" name="JDBC Status"/>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="SetAccount" id="4e17e565-6f29-4888-a0b8-3ec7cb680e47">
    <con:settings/>
    <con:config>
      <script>def customerID = context.expand( '${FetchAccount#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/CUSTOMERID[1]}' )
def debtorAccountNumber = context.expand( '${FetchAccount#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/ACCOUNTNUMBER[1]}' )
def creditorAccountNumber = context.expand( '${FetchAccount#ResponseAsXml#//Results[1]/ResultSet[1]/Row[2]/ACCOUNTNUMBER[1]}' )

testRunner.testCase.getTestStepByName("Properties").setPropertyValue("customerid",customerID)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("value2",customerID)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("userid",customerID)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("AccountID",debtorAccountNumber)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("creditorAccount",creditorAccountNumber)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="properties" name="Properties" id="6816d9e4-bb3f-45e0-89f0-487bf3ffb4ea">
    <con:settings/>
    <con:config xsi:type="con:PropertiesStep" saveFirst="true" createMissingOnLoad="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:properties>
        <con:property>
          <con:name>customerid</con:name>
          <con:value>22109415379</con:value>
        </con:property>
        <con:property>
          <con:name>DueDate</con:name>
          <con:value>${= java.time.LocalDateTime.now().plusDays(1).format(java.time.format.DateTimeFormatter.ofPattern('yyyy-MM-dd'))}</con:value>
        </con:property>
        <con:property>
          <con:name>MessageToSend</con:name>
          <con:value><![CDATA[<?xml version="1.0" encoding="UTF-8"?><Wrapper xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="urn:pin.payment.edb.com:authpain001wrapper:v1_0" ><auth><![CDATA[ <?xml version="1.0" encoding="UTF-8"?><AgreementAuthorizationRequest><authRequest><agreementData><agreementId>CUSTOMERID</agreementId><bankId>BANKORGID</bankId><userId>CUSTOMERID</userId><userFirstName>Tiril Jøran Brækken</userFirstName><userLastName>Ekeli</userLastName><userIdType>USAG</userIdType><productID>11</productID><organizationId>987290986</organizationId><preapproved>true</preapproved><rejectionLevel>TRANSACTION</rejectionLevel><origin>NDR</origin><allowPartialCancellation>false</allowPartialCancellation><allowCancellationPriorToPayment>false</allowCancellationPriorToPayment></agreementData><agreementAccount><accountNumber>ACCOUNTID</accountNumber><swiftAdress>BANKBIC</swiftAdress><currencyCode>NOK</currencyCode><accountType>CurrencyCoreFD</accountType><access>CREDIT_AND_DEBIT</access><bookingLevel>T</bookingLevel><approvalLimit>0</approvalLimit><registerLimit>0</registerLimit><numberOfVerifiers>0</numberOfVerifiers><numberOfApprovers>1</numberOfApprovers></agreementAccount><metaInformation><receivedTimestamp>2019-12-31T14:24:06</receivedTimestamp></metaInformation></authRequest></AgreementAuthorizationRequest> ]]]]>><![CDATA[</auth><content><![CDATA[ <?xml version="1.0" encoding="UTF-8"?><Document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:iso:std:iso:20022:tech:xsd:pain.001.001.04"><CstmrCdtTrfInitn><GrpHdr><MsgId>TIMESTAMP</MsgId><CreDtTm>2019-12-31T14:24:12.053+02:00</CreDtTm><Authstn><Cd>ILEV</Cd></Authstn><Authstn><Prtry>PAYMENT_TELEPAY</Prtry></Authstn><NbOfTxs>1</NbOfTxs><CtrlSum>100.00</CtrlSum><InitgPty><Nm>Mentor Medier AS</Nm><Id><OrgId><AnyBIC>BANKBIC</AnyBIC><Othr><Id>CUSTOMERID</Id><SchmeNm><Cd>BANK</Cd></SchmeNm></Othr><Othr><Id>CUSTOMERID</Id><SchmeNm><Cd>USAG</Cd></SchmeNm></Othr></OrgId></Id></InitgPty></GrpHdr><PmtInf><PmtInfId>TIMESTAMP.FISK_P1</PmtInfId><PmtMtd>TRF</PmtMtd><NbOfTxs>1</NbOfTxs><CtrlSum>100.00</CtrlSum><PmtTpInf><InstrPrty>NORM</InstrPrty><CtgyPurp><Cd>SUPP</Cd></CtgyPurp></PmtTpInf><ReqdExctnDt>DATE</ReqdExctnDt><Dbtr><Nm>Dagsavisen AS</Nm><PstlAdr><AdrTp>ADDR</AdrTp><AdrLine>Postboks 1183 Sentrum</AdrLine><AdrLine>0107 OSLO</AdrLine></PstlAdr><Id><OrgId><Othr><Id>980454347</Id><SchmeNm><Cd>CUST</Cd></SchmeNm></Othr></OrgId></Id></Dbtr><DbtrAcct><Id><Othr><Id>ACCOUNTID</Id><SchmeNm><Cd>BBAN</Cd></SchmeNm></Othr></Id></DbtrAcct><DbtrAgt><FinInstnId><BICFI>BANKBIC</BICFI></FinInstnId></DbtrAgt><InstrForDbtrAgt>SRPT</InstrForDbtrAgt><ChrgBr>SHAR</ChrgBr><CdtTrfTxInf><PmtId><InstrId>TIMESTAMP.FISK_P1T1</InstrId><EndToEndId>ENDID</EndToEndId></PmtId><PmtTpInf><LclInstrm><Prtry>TLB</Prtry></LclInstrm></PmtTpInf><Amt><InstdAmt Ccy="NOK">100.00</InstdAmt></Amt><CdtrAgt><FinInstnId><BICFI>BANKBIC</BICFI><PstlAdr><AdrTp>ADDR</AdrTp><Ctry>NO</Ctry></PstlAdr></FinInstnId></CdtrAgt><Cdtr><Nm>ROGER HERCZ</Nm><PstlAdr><AdrTp>ADDR</AdrTp><Ctry>NO</Ctry><AdrLine>45, HASHEMESH STREET</AdrLine><AdrLine>CAESAREAISRAEL</AdrLine></PstlAdr><CtryOfRes>NO</CtryOfRes></Cdtr><CdtrAcct><Id><Othr><Id>CREDITORACCOUNT</Id></Othr></Id></CdtrAcct><RmtInf><Strd><RfrdDocAmt><DuePyblAmt Ccy="NOK">100.00</DuePyblAmt></RfrdDocAmt><AddtlRmtInf>263009</AddtlRmtInf></Strd></RmtInf></CdtTrfTxInf></PmtInf></CstmrCdtTrfInitn></Document> ]]]]>><![CDATA[</content></Wrapper>]]></con:value>
        </con:property>
        <con:property>
          <con:name>messagetoSend_Updated</con:name>
          <con:value><![CDATA[<?xml version="1.0" encoding="UTF-8"?><Wrapper xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="urn:pin.payment.edb.com:authpain001wrapper:v1_0" ><auth><![CDATA[ <?xml version="1.0" encoding="UTF-8"?><AgreementAuthorizationRequest><authRequest><agreementData><agreementId>22109415379</agreementId><bankId>4201</bankId><userId>22109415379</userId><userFirstName>Tiril Jøran Brækken</userFirstName><userLastName>Ekeli</userLastName><userIdType>USAG</userIdType><productID>11</productID><organizationId>987290986</organizationId><preapproved>true</preapproved><rejectionLevel>TRANSACTION</rejectionLevel><origin>NDR</origin><allowPartialCancellation>false</allowPartialCancellation><allowCancellationPriorToPayment>false</allowCancellationPriorToPayment></agreementData><agreementAccount><accountNumber>42121411797</accountNumber><swiftAdress>SPTRNO22XXX</swiftAdress><currencyCode>NOK</currencyCode><accountType>CurrencyCoreFD</accountType><access>CREDIT_AND_DEBIT</access><bookingLevel>T</bookingLevel><approvalLimit>0</approvalLimit><registerLimit>0</registerLimit><numberOfVerifiers>0</numberOfVerifiers><numberOfApprovers>1</numberOfApprovers></agreementAccount><metaInformation><receivedTimestamp>2019-12-31T14:24:06</receivedTimestamp></metaInformation></authRequest></AgreementAuthorizationRequest> ]]]]>><![CDATA[</auth><content><![CDATA[ <?xml version="1.0" encoding="UTF-8"?><Document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:iso:std:iso:20022:tech:xsd:pain.001.001.04"><CstmrCdtTrfInitn><GrpHdr><MsgId>Exceeddays_231121015625</MsgId><CreDtTm>2019-12-31T14:24:12.053+02:00</CreDtTm><Authstn><Cd>ILEV</Cd></Authstn><Authstn><Prtry>PAYMENT_TELEPAY</Prtry></Authstn><NbOfTxs>1</NbOfTxs><CtrlSum>100.00</CtrlSum><InitgPty><Nm>Mentor Medier AS</Nm><Id><OrgId><AnyBIC>SPTRNO22XXX</AnyBIC><Othr><Id>22109415379</Id><SchmeNm><Cd>BANK</Cd></SchmeNm></Othr><Othr><Id>22109415379</Id><SchmeNm><Cd>USAG</Cd></SchmeNm></Othr></OrgId></Id></InitgPty></GrpHdr><PmtInf><PmtInfId>Exceeddays_231121015625.FISK_P1</PmtInfId><PmtMtd>TRF</PmtMtd><NbOfTxs>1</NbOfTxs><CtrlSum>100.00</CtrlSum><PmtTpInf><InstrPrty>NORM</InstrPrty><CtgyPurp><Cd>SUPP</Cd></CtgyPurp></PmtTpInf><ReqdExctnDt>2021-11-24</ReqdExctnDt><Dbtr><Nm>Dagsavisen AS</Nm><PstlAdr><AdrTp>ADDR</AdrTp><AdrLine>Postboks 1183 Sentrum</AdrLine><AdrLine>0107 OSLO</AdrLine></PstlAdr><Id><OrgId><Othr><Id>980454347</Id><SchmeNm><Cd>CUST</Cd></SchmeNm></Othr></OrgId></Id></Dbtr><DbtrAcct><Id><Othr><Id>42121411797</Id><SchmeNm><Cd>BBAN</Cd></SchmeNm></Othr></Id></DbtrAcct><DbtrAgt><FinInstnId><BICFI>SPTRNO22XXX</BICFI></FinInstnId></DbtrAgt><InstrForDbtrAgt>SRPT</InstrForDbtrAgt><ChrgBr>SHAR</ChrgBr><CdtTrfTxInf><PmtId><InstrId>Exceeddays_231121015625.FISK_P1T1</InstrId><EndToEndId>endtoend_231121015625</EndToEndId></PmtId><PmtTpInf><LclInstrm><Prtry>TLB</Prtry></LclInstrm></PmtTpInf><Amt><InstdAmt Ccy="NOK">100.00</InstdAmt></Amt><CdtrAgt><FinInstnId><BICFI>SPTRNO22XXX</BICFI><PstlAdr><AdrTp>ADDR</AdrTp><Ctry>NO</Ctry></PstlAdr></FinInstnId></CdtrAgt><Cdtr><Nm>ROGER HERCZ</Nm><PstlAdr><AdrTp>ADDR</AdrTp><Ctry>NO</Ctry><AdrLine>45, HASHEMESH STREET</AdrLine><AdrLine>CAESAREAISRAEL</AdrLine></PstlAdr><CtryOfRes>NO</CtryOfRes></Cdtr><CdtrAcct><Id><Othr><Id>42125928816</Id></Othr></Id></CdtrAcct><RmtInf><Strd><RfrdDocAmt><DuePyblAmt Ccy="NOK">100.00</DuePyblAmt></RfrdDocAmt><AddtlRmtInf>263009</AddtlRmtInf></Strd></RmtInf></CdtTrfTxInf></PmtInf></CstmrCdtTrfInitn></Document> ]]]]>><![CDATA[</content></Wrapper>]]></con:value>
        </con:property>
        <con:property>
          <con:name>EndtoEndID</con:name>
          <con:value>endtoend_231121015625</con:value>
        </con:property>
        <con:property>
          <con:name>AccountID</con:name>
          <con:value>42121411797</con:value>
        </con:property>
        <con:property>
          <con:name>MsgId</con:name>
          <con:value>Exceeddays_231121015625</con:value>
        </con:property>
        <con:property>
          <con:name>creditorAccount</con:name>
          <con:value>42125928816</con:value>
        </con:property>
        <con:property>
          <con:name>Messageid1</con:name>
          <con:value>2330</con:value>
        </con:property>
        <con:property>
          <con:name>paymentinfoid1</con:name>
          <con:value>2316</con:value>
        </con:property>
        <con:property>
          <con:name>transid</con:name>
          <con:value>2476</con:value>
        </con:property>
        <con:property>
          <con:name>item1</con:name>
          <con:value>PaymentChannel</con:value>
        </con:property>
        <con:property>
          <con:name>value1</con:name>
          <con:value>BES</con:value>
        </con:property>
        <con:property>
          <con:name>item2</con:name>
          <con:value>AgreementID</con:value>
        </con:property>
        <con:property>
          <con:name>value2</con:name>
          <con:value>22109415379</con:value>
        </con:property>
        <con:property>
          <con:name>item3</con:name>
          <con:value>LogRef</con:value>
        </con:property>
        <con:property>
          <con:name>value3</con:name>
          <con:value>${=java.util.UUID.randomUUID()}</con:value>
        </con:property>
        <con:property>
          <con:name>SourceApplication</con:name>
          <con:value>EVRYCPS</con:value>
        </con:property>
        <con:property>
          <con:name>userid</con:name>
          <con:value>22109415379</con:value>
        </con:property>
        <con:property>
          <con:name>credentials</con:name>
          <con:value>03110012010400425kglPboRi3h1Z4YUjUpQ0UB65Ta2kPKj1KWwkWemtrL+SoWqMxx/KuqxUVbNyTu6DsSaabKNt2t+xJppso23a37EmmmyjbdrffJeRiGWfHDGwxCWOpDYc2jgSxAz1+8eEsSaabKNt2t/XzlyjxYnxhcG46wcbIKp/sSaabKNt2t9wBUG0SyIoqFfig80Gq4uXVBtimDzTiu2xJppso23a37Emmmyjbdrf8wP73CNrvpw=apG4tU0NraPbbqKUp39erKDFa7xy6z+r4VDMr/6qBlkFniGaNeDXv4cZcZZQQI6JtwB3JYQk6WqLA7oyp1FWRM6n46ehgNmHVNly8fTnQbIuGJSF2LUyGI7aE92/dgtp8jv9bsGpNe58K+xb4LeIHwjb2nVVvt4/2oLtDQ8IPJE=</con:value>
        </con:property>
        <con:property>
          <con:name>orgid</con:name>
          <con:value>4201</con:value>
        </con:property>
      </con:properties>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="SetMessagefile" id="4ce300d7-2b07-431e-a3a8-da7294a79fde">
    <con:settings/>
    <con:config>
      <script>import com.eviware.soapui.support.GroovyUtils.*
import java.io.File 
import java.io.Reader
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

Date date = new Date();
SimpleDateFormat fn = new SimpleDateFormat("ddMyyhhmmss");
def datetime = fn.format(date)
log.info datetime

def endid = "endtoend_"+datetime;
log.info endid
def msgid = "Exceeddays_"+datetime;
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("EndtoEndID",endid );
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("MsgId",msgid );

def messageToSend = context.expand( '${Properties#MessageToSend}' )
log.info(messageToSend)

def Account = context.expand( '${Properties#AccountID}' )
def customerid = context.expand( '${Properties#customerid}' )
def dueDate = context.expand( '${Properties#DueDate}' )
def bankId = context.expand( '${#TestSuite#bankId}' )
def codewordFisk = context.expand( '${#TestSuite#codewordFisk}' )
def bankBic = context.expand( '${#TestSuite#bankBic}' )
def creditorAccount = context.expand( '${Properties#creditorAccount}' )

messageToSend = messageToSend.replaceAll("TIMESTAMP",msgid) ;
messageToSend = messageToSend.replaceAll("CUSTOMERID",customerid) ;
messageToSend = messageToSend.replaceAll("ACCOUNTID",Account) ;
messageToSend = messageToSend.replaceAll("DATE",dueDate) ;
messageToSend = messageToSend.replaceAll("ENDID",endid);
messageToSend = messageToSend.replaceAll("BANKORGID",bankId);
messageToSend = messageToSend.replaceAll("CODEWORDFORFISK",codewordFisk);
messageToSend = messageToSend.replaceAll("BANKBIC",bankBic);
messageToSend = messageToSend.replaceAll("CREDITORACCOUNT",creditorAccount);

log.info messageToSend

def update = testRunner.testCase.getTestStepByName("Properties").setPropertyValue("messagetoSend_Updated",messageToSend );</script>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="PushAndReceiveFilePayment" id="ef76eb19-8a50-46aa-b70d-a8af2a276476">
    <con:settings/>
    <con:config>
      <script>// File payment content property
import MQMessageUtils;
def filecontent = context.expand( '${Properties#messagetoSend_Updated#declare namespace ns1=\'urn:pin.payment.edb.com:authpain001wrapper:v1_0\'; //ns1:Wrapper[1]}' )

// Set MQ properties
def mQHostName = context.expand( '${#Project#mqHostname}' )
def int mQPort = context.expand( '${#Project#mqPort}' ) as Integer
def mQQueuemanager = context.expand( '${#Project#mqManager}' )
def mQChannelAuth = context.expand( '${#Project#mqChannelAuth}' )
def mQMessageQueueSend = context.expand( '${#Project#Sendqueue}' )
def mQMessageQueueRecieve = context.expand( '${#Project#Recievequeue}' )
def msgId = context.expand( '${Properties#MsgId}' )



// Create utility class object, Create MQ connection
MQMessageUtils mqMessageUtils = new MQMessageUtils(mQQueuemanager,mQHostName,mQPort,mQChannelAuth,log);
// Send Message to MQ
log.info ("Message Sent :" + mqMessageUtils.sendMessage(mQMessageQueueSend,filecontent));</script>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="FTS UP" id="0fb0142d-2207-4dfe-8c60-7611436d224a">
    <con:settings/>
    <con:config>
      <delay>50000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="FetchTransaction" id="334f6ee5-ac87-4a4d-878a-f57baac1e66b">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWH</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:pwhdata/pwh@(DESCRIPTION=(CONNECT_TIMEOUT=10)(RETRY_COUNT=3)(RETRY_DELAY=1)(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_d13)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>SELECT T.TRANSACTIONSID,M.MESSAGEID,P.PAYMENTINFOID,T.PAYMENTSTATUS,T.FK_PROCESSINGLINEID,T.RELEASEDATE,T.ISPC, I.INSTRUCTIONID,I.ADDITIONALINFO, I.INSTRUCTIONFUNCTION, I.INSTRUCTIONTYPE, I.INSTRUCTIONFIELD
FROM message M , paymentinfo P , TRANSACTIONS T ,INSTRUCTIONS I where 
M.messageid = P.fk_messageid and 
P.paymentinfoid = T.fk_paymentinfoid and
T.TRANSACTIONSID = I.FK_TRANSACTIONSID 
and M.messageidentification like '%${Properties#MsgId}%'</con:query>
      <con:assertion type="MessageContentAssertion" id="07e2d12e-c6af-4cea-9ba6-f1ad67561294" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]</con:xpath>
            <con:element>TRANSACTIONSID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>267437</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENTSTATUS[1]</con:xpath>
            <con:element>PAYMENTSTATUS</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>RFDD</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/FK_PROCESSINGLINEID[1]</con:xpath>
            <con:element>FK_PROCESSINGLINEID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>54</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INSTRUCTIONID[1]</con:xpath>
            <con:element>INSTRUCTIONID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>14228</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/ADDITIONALINFO[1]</con:xpath>
            <con:element>ADDITIONALINFO</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>${#TestSuite#codewordFisk}</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INSTRUCTIONFUNCTION[1]</con:xpath>
            <con:element>INSTRUCTIONFUNCTION</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>SEREPTA</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INSTRUCTIONTYPE[1]</con:xpath>
            <con:element>INSTRUCTIONTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>DEBTOR_AGENT</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INSTRUCTIONFIELD[1]</con:xpath>
            <con:element>INSTRUCTIONFIELD</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>instrDeb</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <TRANSACTIONSID>267437</TRANSACTIONSID>
         <MESSAGEID>63415</MESSAGEID>
         <PAYMENTINFOID>98260</PAYMENTINFOID>
         <PAYMENTSTATUS>REJC</PAYMENTSTATUS>
         <FK_PROCESSINGLINEID/>
         <RELEASEDATE>2020-12-20 00:00:00</RELEASEDATE>
         <INSTRUCTIONID>14228</INSTRUCTIONID>
         <ADDITIONALINFO>FISK</ADDITIONALINFO>
         <INSTRUCTIONFUNCTION/>
         <INSTRUCTIONTYPE>DEBTOR_AGENT</INSTRUCTIONTYPE>
         <INSTRUCTIONFIELD/>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:assertion type="JDBC Status" id="28644ec9-6149-4d5b-8781-5a6ed76d565b" name="JDBC Status"/>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Setdata" id="0b60f4ce-42f6-4da8-a5b5-a7a4e0f892f3">
    <con:settings/>
    <con:config>
      <script>def Messageid=context.expand( '${FetchTransaction#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}' )
def paymentinfoid=context.expand( '${FetchTransaction#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/PAYMENTINFOID[1]}' )
def transid=context.expand( '${FetchTransaction#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}' )

testRunner.testCase.getTestStepByName("Properties").setPropertyValue("Messageid1",Messageid)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("paymentinfoid1",paymentinfoid)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("transid",transid)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="CreateReservation" id="0e7a0727-4f65-4168-a15a-cee959633d82">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWH</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:pwhdata/pwh@(DESCRIPTION=(CONNECT_TIMEOUT=10)(RETRY_COUNT=3)(RETRY_DELAY=1)(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_d13)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select * from RESERVATION_DETAILS where FK_TRANSACTIONSID = '${FetchTransaction#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}'</con:query>
      <con:assertion type="MessageContentAssertion" id="83143af0-9ff9-4d19-aa13-0d69fcec7b5c" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RESERVATIONDETAILSID[1]</con:xpath>
            <con:element>RESERVATIONDETAILSID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>2123</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/FK_TRANSACTIONSID[1]</con:xpath>
            <con:element>FK_TRANSACTIONSID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>2476</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RESERVATIONTIME[1]</con:xpath>
            <con:element>RESERVATIONTIME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>2021-11-23 09:27:19</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RESERVEDAMOUNT[1]</con:xpath>
            <con:element>RESERVEDAMOUNT</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>100</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RESERVATION_TYPE[1]</con:xpath>
            <con:element>RESERVATION_TYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>C</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RESERVATIONREFERENCE[1]</con:xpath>
            <con:element>RESERVATIONREFERENCE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>102476</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <RESERVATIONDETAILSID>2123</RESERVATIONDETAILSID>
         <FK_TRANSACTIONSID>2476</FK_TRANSACTIONSID>
         <RESERVATIONTIME>2021-11-23 09:27:19</RESERVATIONTIME>
         <RESERVEDAMOUNT>100</RESERVEDAMOUNT>
         <CURRENCYCODE>NOK</CURRENCYCODE>
         <RESERVATION_TYPE>C</RESERVATION_TYPE>
         <RESERVATIONREFERENCE>102476</RESERVATIONREFERENCE>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="FTS Down" id="c5c1e23d-6613-481d-b82e-bd0e5e663e13">
    <con:settings/>
    <con:config>
      <delay>60000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="6b06d05e-ad61-4ce4-8d6a-722566c794ce" name="Authorization">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentAuthorization_V1_3PortTypeSoap11</con:interface>
      <con:operation>PaymentAuthorizationCreate</con:operation>
      <con:request name="Authorization" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="a8606912-f5a0-40e2-9ffc-418f3b5ee3ba">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          <con:setting id="com.eviware.soapui.support.editor.views.xml.form2.FormEditorView@ViewType">All</con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.245:15780/pin/services/PINSPaymentAuthorization_V1_3</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentauthorization:v1_3" xmlns:urn1="urn:pins.payment.evry.com:domain:paymentauthorization:v1_3" xmlns:urn2="urn:pins.payment.evry.com:domain:authorization:v1_3">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PIN</wsc:DestinationApplication>
         <wsc:Function>PIN Create</wsc:Function>
         <wsc:Version>V2_0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#userid}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>NBA</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <!--Optional:-->
            <wsc:orgunit>${Properties#orgid}</wsc:orgunit>
            <!--Optional:-->
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <!--Optional:-->
            <wsc:locale>en</wsc:locale>
            <wsc:ip>1.1.1.1</wsc:ip>
            <!--Zero or more repetitions:-->
            <wsc:item value="${Properties#value2}" key="${Properties#item2}"/>
            <wsc:item value="${Properties#value3}" key="${Properties#item3}"/>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentAuthorizationCreateRequest>
         <urn:cpsAuthorizationMessage>
            <urn1:cpsUserAuthorizationData>
               <urn2:agreementData>
                  <urn2:agreementId>${Properties#userid}</urn2:agreementId>
                  <!--Optional:-->
                  <urn2:bankId>${Properties#orgid}</urn2:bankId>
                  <urn2:customerID>${Properties#customerid}</urn2:customerID>
                  <urn2:productID>1234232</urn2:productID>
                  <urn2:corporateGrouping>
                     <urn2:customerId>${Properties#customerid}</urn2:customerId>
                     <urn2:agreementId>${Properties#userid}</urn2:agreementId>
                     <urn2:b2bPollingEnabled>false</urn2:b2bPollingEnabled>
                  </urn2:corporateGrouping>
                  <urn2:agreementAccount>
                     <urn2:accountNumber>${Properties#AccountID}</urn2:accountNumber>
                     <urn2:accountOwnerIdentifier>${Properties#customerid}</urn2:accountOwnerIdentifier>
                     <urn2:currencyCode>NOK</urn2:currencyCode>
                     <urn2:accountType>CoreAccount</urn2:accountType>
                     <urn2:numberOfVerifiers>0</urn2:numberOfVerifiers>
                     <urn2:numberOfApprovers>1</urn2:numberOfApprovers>
                     <urn2:access>CREDIT_AND_DEBIT</urn2:access>
                  </urn2:agreementAccount>
               </urn2:agreementData>
               <urn2:userData>
                  <urn2:userId>${Properties#userid}</urn2:userId>
                  <urn2:sessionID>qw24213</urn2:sessionID>
                  <urn2:firstName>Bond</urn2:firstName>
                  <urn2:lastName>Mad</urn2:lastName>
                  <!--Optional:-->
                  <urn2:socialSecurityNumber>${Properties#customerid}</urn2:socialSecurityNumber>
                  <!--Zero or more repetitions:-->
                  <urn2:userAccount>
                     <urn2:accountNumber>${Properties#AccountID}</urn2:accountNumber>
                     <!--Optional:-->
                     <!--Zero or more repetitions:-->
                     <urn2:role>View</urn2:role>
                     <urn2:role>Register</urn2:role>
                     <urn2:role>Appprove</urn2:role>
                     <urn2:role>Salary</urn2:role>
                     <urn2:role>Transfer</urn2:role>
                     <!--Optional:-->
                     <urn2:bookingLevel>T</urn2:bookingLevel>
                     <urn2:approvalLimit>9999999</urn2:approvalLimit>
                     <urn2:registerLimit>9999999</urn2:registerLimit>
                  </urn2:userAccount>
                  <!--Zero or more repetitions:-->
               </urn2:userData>
            </urn1:cpsUserAuthorizationData>
         </urn:cpsAuthorizationMessage>
      </urn:PaymentAuthorizationCreateRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="b21ba348-cbaa-4d60-90b1-901c2e5ab265" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="75bcdc56-71c9-4711-91f0-618735212935" name="Not SOAP Fault"/>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentauthorization:v1_3/PINSPaymentAuthorization_V1_3PortType/PaymentAuthorizationCreateRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="74f5dae0-fa40-49cc-936c-998e5df81a5e">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="0ee763c8-0653-4638-b440-f24184e45a11" name="PaymentStop">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentStatusUpdate_V2_0PortTypeSoap11</con:interface>
      <con:operation>PaymentStop</con:operation>
      <con:request name="PaymentStop" id="8da13395-64ad-47cd-8d86-3d0780172bcd">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentStatusUpdate_V2_0</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:pins.payment.evry.com:ws:paymentstatusupdate:v2_0" xmlns:urn1="urn:pins.payment.evry.com:domain:payment-status-update:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PIN</wsc:DestinationApplication>
         <wsc:Function>PIN Create</wsc:Function>
         <wsc:Version>V2_0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#userid}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>NBA</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <!--Optional:-->
            <wsc:orgunit>${Properties#orgid}</wsc:orgunit>
            <!--Optional:-->
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <!--Optional:-->
            <wsc:locale>en</wsc:locale>
            <wsc:ip>1.1.1.1</wsc:ip>
            <!--Zero or more repetitions:-->
            <wsc:item value="${Properties#value2}" key="${Properties#item2}"/>
            <wsc:item value="${Properties#value3}" key="${Properties#item3}"/>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentStopRequest>
         <!--You have a CHOICE of the next 4 items at this level-->
         
         <urn:transactionInput>
            <!--1 or more repetitions:-->
            <urn1:transactionId>${Properties#transid}</urn1:transactionId>
         </urn:transactionInput>
      </urn:PaymentStopRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Fault Assertion" id="ce78b6d2-cc4c-4d4e-be7c-5a9834473e69" name="Not SOAP Fault"/>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentstatusupdate:v2_0/PINSPaymentStatusUpdate_V2_0PortType/PaymentStopRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="FetchTransaction_STOP" id="17a99578-243a-4868-bcee-3c258547a360">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWH</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:pwhdata/pwh@(DESCRIPTION=(CONNECT_TIMEOUT=10)(RETRY_COUNT=3)(RETRY_DELAY=1)(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_d13)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>SELECT T.TRANSACTIONSID,M.MESSAGEID,P.PAYMENTINFOID,T.PAYMENTSTATUS,T.FK_PROCESSINGLINEID,T.RELEASEDATE,T.ISPC, I.INSTRUCTIONID,I.ADDITIONALINFO, I.INSTRUCTIONFUNCTION, I.INSTRUCTIONTYPE, I.INSTRUCTIONFIELD
FROM message M , paymentinfo P , TRANSACTIONS T ,INSTRUCTIONS I where 
M.messageid = P.fk_messageid and 
P.paymentinfoid = T.fk_paymentinfoid and
T.TRANSACTIONSID = I.FK_TRANSACTIONSID 
and M.messageidentification like '%${Properties#MsgId}%'</con:query>
      <con:assertion type="MessageContentAssertion" id="07e2d12e-c6af-4cea-9ba6-f1ad67561294" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]</con:xpath>
            <con:element>TRANSACTIONSID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>267437</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENTSTATUS[1]</con:xpath>
            <con:element>PAYMENTSTATUS</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>STOP</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/FK_PROCESSINGLINEID[1]</con:xpath>
            <con:element>FK_PROCESSINGLINEID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>54</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INSTRUCTIONID[1]</con:xpath>
            <con:element>INSTRUCTIONID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>14228</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/ADDITIONALINFO[1]</con:xpath>
            <con:element>ADDITIONALINFO</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>${#TestSuite#codewordFisk}</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INSTRUCTIONFUNCTION[1]</con:xpath>
            <con:element>INSTRUCTIONFUNCTION</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>SEREPTA</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INSTRUCTIONTYPE[1]</con:xpath>
            <con:element>INSTRUCTIONTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>DEBTOR_AGENT</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INSTRUCTIONFIELD[1]</con:xpath>
            <con:element>INSTRUCTIONFIELD</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>instrDeb</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <TRANSACTIONSID>267437</TRANSACTIONSID>
         <MESSAGEID>63415</MESSAGEID>
         <PAYMENTINFOID>98260</PAYMENTINFOID>
         <PAYMENTSTATUS>REJC</PAYMENTSTATUS>
         <FK_PROCESSINGLINEID/>
         <RELEASEDATE>2020-12-20 00:00:00</RELEASEDATE>
         <INSTRUCTIONID>14228</INSTRUCTIONID>
         <ADDITIONALINFO>FISK</ADDITIONALINFO>
         <INSTRUCTIONFUNCTION/>
         <INSTRUCTIONTYPE>DEBTOR_AGENT</INSTRUCTIONTYPE>
         <INSTRUCTIONFIELD/>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:assertion type="JDBC Status" id="28644ec9-6149-4d5b-8781-5a6ed76d565b" name="JDBC Status"/>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="Reservation_attempts" id="e5d1da60-2333-46e1-9e45-a38c76d86f39">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWH</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:pwhdata/pwh@(DESCRIPTION=(CONNECT_TIMEOUT=10)(RETRY_COUNT=3)(RETRY_DELAY=1)(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_d13)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select * from RESERVATION_ATTEMPTS 
where FK_TRANSACTIONSID='${FetchTransaction#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}'</con:query>
      <con:assertion type="JDBC Status" id="7b30c005-090e-4d95-abed-8e02a15b1740" name="JDBC Status"/>
      <con:assertion type="MessageContentAssertion" id="dea66dce-38fb-4282-acf2-ef4330d2e6f8" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/FK_TRANSACTIONSID[1]</con:xpath>
            <con:element>FK_TRANSACTIONSID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>2476</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RESERVATION_TYPE[1]</con:xpath>
            <con:element>RESERVATION_TYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>D</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RETRY_COUNT[1]</con:xpath>
            <con:element>RETRY_COUNT</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>0</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RESERVATIONREFERENCE[1]</con:xpath>
            <con:element>RESERVATIONREFERENCE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>102476</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <FK_TRANSACTIONSID>2476</FK_TRANSACTIONSID>
         <RESERVATION_TYPE>D</RESERVATION_TYPE>
         <RETRY_COUNT>0</RETRY_COUNT>
         <RESERVATIONREFERENCE>102476</RESERVATIONREFERENCE>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="FTS UP_DeleteReservation" id="eded05e1-54c5-4fdb-aa18-3ebc62f1e6bf">
    <con:settings/>
    <con:config>
      <delay>60000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="Delete_Reservation" id="fa44779a-bc00-4eb7-b8a9-5b00fd998d22">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWH</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:pwhdata/pwh@(DESCRIPTION=(CONNECT_TIMEOUT=10)(RETRY_COUNT=3)(RETRY_DELAY=1)(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_d13)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select * from RESERVATION_DETAILS where FK_TRANSACTIONSID = '${FetchTransaction#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}'</con:query>
      <con:assertion type="MessageContentAssertion" id="bf9b005e-288e-48c0-90b3-209beede3cb7" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]</con:xpath>
            <con:element>ResultSet</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage>&lt;Results>
   &lt;ResultSet fetchSize="10"/>
&lt;/Results></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="Reservation_attempts_Delete" id="a4efd029-969d-4b42-bfa4-3276a2eaf85f">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWH</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:pwhdata/pwh@(DESCRIPTION=(CONNECT_TIMEOUT=10)(RETRY_COUNT=3)(RETRY_DELAY=1)(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_d13)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select * from RESERVATION_ATTEMPTS 
where FK_TRANSACTIONSID='${FetchTransaction#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}'</con:query>
      <con:assertion type="JDBC Status" id="7b30c005-090e-4d95-abed-8e02a15b1740" name="JDBC Status"/>
      <con:assertion type="MessageContentAssertion" id="dea66dce-38fb-4282-acf2-ef4330d2e6f8" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/FK_TRANSACTIONSID[1]</con:xpath>
            <con:element>FK_TRANSACTIONSID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>2476</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RESERVATION_TYPE[1]</con:xpath>
            <con:element>RESERVATION_TYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>D</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RETRY_COUNT[1]</con:xpath>
            <con:element>RETRY_COUNT</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>0</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RESERVATIONREFERENCE[1]</con:xpath>
            <con:element>RESERVATIONREFERENCE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>102476</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <FK_TRANSACTIONSID>2476</FK_TRANSACTIONSID>
         <RESERVATION_TYPE>D</RESERVATION_TYPE>
         <RETRY_COUNT>0</RETRY_COUNT>
         <RESERVATIONREFERENCE>102476</RESERVATIONREFERENCE>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="pwh_alert" id="0473771d-4e4d-4217-91d9-6b3a6c8b227b">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWH</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:pwhdata/pwh@(DESCRIPTION=(CONNECT_TIMEOUT=10)(RETRY_COUNT=3)(RETRY_DELAY=1)(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_d13)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select * from pwh_alert where FAILURETYPE='RESERVATION_ATTEMPTS_EXCEEDED'
  order by OCCURRED  desc
  fetch first 1 rows only</con:query>
      <con:assertion type="MessageContentAssertion" id="f0f0f428-fade-4a8e-82d5-b71fb625bdc8" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/ALERTID[1]</con:xpath>
            <con:element>ALERTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1229</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/APP[1]</con:xpath>
            <con:element>APP</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>RESERVATION_ATTEMPTS_TRACKER</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/BANKID[1]</con:xpath>
            <con:element>BANKID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>0000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/USERID[1]</con:xpath>
            <con:element>USERID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>SYSTEM</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/FAILURETYPE[1]</con:xpath>
            <con:element>FAILURETYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>RESERVATION_ATTEMPTS_EXCEEDED</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/SEVERITY[1]</con:xpath>
            <con:element>SEVERITY</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>SYSTEM_ERROR</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/LOGREF[1]</con:xpath>
            <con:element>LOGREF</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>N/A</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/OCCURRED[1]</con:xpath>
            <con:element>OCCURRED</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>2021-11-22 12:53:33</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/NOTIFIED[1]</con:xpath>
            <con:element>NOTIFIED</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>2021-11-22 12:55:33</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/STACKTRACE[1]</con:xpath>
            <con:element>STACKTRACE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/MESSAGE[1]</con:xpath>
            <con:element>MESSAGE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>Reservation attempts exceeded : There are 1 Transactions exceeded the counter limit. Please look in to Reservation_Attempts table</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <ALERTID>1229</ALERTID>
         <APP>RESERVATION_ATTEMPTS_TRACKER</APP>
         <BANKID>0000</BANKID>
         <USERID>SYSTEM</USERID>
         <FAILURETYPE>RESERVATION_ATTEMPTS_EXCEEDED</FAILURETYPE>
         <SEVERITY>SYSTEM_ERROR</SEVERITY>
         <LOGREF>N/A</LOGREF>
         <OCCURRED>2021-11-22 12:53:33</OCCURRED>
         <NOTIFIED>2021-11-22 12:55:33</NOTIFIED>
         <STACKTRACE/>
         <MESSAGE>Reservation attempts exceeded : There are 1 Transactions exceeded the counter limit. Please look in to Reservation_Attempts table</MESSAGE>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>ConnectionString</con:name>
      <con:value/>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>a13779e1-8e86-48ac-afcc-4422d9270331</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>45419467-0a3c-4307-ad2d-0c4edc6098b0</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>42ba2f32-dcf1-4769-85bc-b7a80682d053</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>c0649243-ec6f-49c7-8087-283d2c459cc5</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>66df4ecf-b17c-4b21-822f-96b460d0aadf</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>ccd1f098-ca98-4b70-bc19-5a2bac79cfe7</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>dffed03f-a79e-4c1f-be01-afb78c5590ad</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>84cd09dc-2d5a-4b43-a45c-5667924fd28d</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>7c94da0c-2ef5-4723-bd60-c612e4c873f6</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>ae289377-0d2d-4944-b39b-a74d82b5b5e4</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>392c100e-c288-431e-b50a-da44a54aad5f</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>4f0dbe51-9150-4d75-8586-b8fdb350e88e</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>7a52aa83-9b05-49cb-9c04-fa10bbde522f</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>7a8990c1-1580-41af-82f1-afa8bbbf5783</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>afbe09c9-6a54-4690-86b7-845349fea5f2</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>cdbb57e4-80fc-4d73-b4fa-591e8aaab1f4</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>c9fe0671-daf1-4f83-ab16-5e950f8c2f64</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>07c8cfde-534b-4d44-bd8b-6b329b8fdb48</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>a6975f49-35c7-4246-a82d-5632e3d41a9e</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>4a9eee56-88cb-46c7-b82d-97875caaaf40</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>085651bd-9a43-4e5d-8b37-4bb09ce600dd</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>f6c54f49-3b0c-4ef5-85e9-d2796aa874b9</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>a8e0f3d9-14dc-494b-b830-f906d4413b77</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>22190b4b-5057-47e7-897f-356b085485ff</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>0ee763c8-0653-4638-b440-f24184e45a11</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>c5c1e23d-6613-481d-b82e-bd0e5e663e13</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>eded05e1-54c5-4fdb-aa18-3ebc62f1e6bf</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>0e7a0727-4f65-4168-a15a-cee959633d82</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>e5d1da60-2333-46e1-9e45-a38c76d86f39</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>fa44779a-bc00-4eb7-b8a9-5b00fd998d22</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>a4efd029-969d-4b42-bfa4-3276a2eaf85f</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>0b60f4ce-42f6-4da8-a5b5-a7a4e0f892f3</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:environmentSpec>
    <con:entry environmentId="0555037f-f4fb-4e93-ab2c-eb4b50d7d704">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="415b8404-c1f2-43a4-a761-29c767fc7b22">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="15bc0171-07d7-440e-b08e-dd951afab8be">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="aec41ae1-9dcf-401f-b7e3-a65b6f4ffdad">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="45007c9a-adad-4b85-bf0c-0c29278543f9">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="ac7a7eed-4708-481b-9ab7-6be7c3aab34e">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="f12cdac8-ed78-441c-b93a-315f75390e50">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="324d3316-6824-43fc-bc92-9ac25f095bf3">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="c359f457-01ec-4cbe-8283-2746209f9042">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="8e4f47ef-0fd8-44c4-86f7-6c3bb1794d4d">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="8f055548-1217-4da5-8caf-f02741e062e2">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
    <con:entry environmentId="c53eb540-84b6-4697-8a38-bedd9aabdd6e">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>
