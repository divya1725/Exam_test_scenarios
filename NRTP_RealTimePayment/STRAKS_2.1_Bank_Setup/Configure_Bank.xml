<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="d838a722-a247-403a-bc70-c81860ada2db" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="Configure_Bank" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="c0f71d20-2157-47c1-a3b8-ffc34cbc6bc5fileName">Configure_Bank</con:setting>
    <con:setting id="d838a722-a247-403a-bc70-c81860ada2dbfileName">Configure_Bank</con:setting>
  </con:settings>
  <con:testStep type="jdbc" name="PWH_PRODUCT_FEATURE" id="c160518d-bbab-4a6f-af82-7cc0e2c21862">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWHDATA</con:dbConnectionName>
      <con:driver>${#Project#JDBCDriver}</con:driver>
      <con:connectionString>${#Project#PWHDbString}</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>SELECT INITIATORBANKID, PRODUCT 
FROM PRODUCT_FEATURE 
WHERE PRODUCT = 'Straks-2.1'</con:query>
      <con:storedProcedure>false</con:storedProcedure>
      <con:assertion type="JDBC Status" id="266efb75-b6f0-4041-abb8-b71379cf3d0a" name="JDBC Status"/>
      <con:assertion type="DataAndMetadataAssertion" id="9c8147b5-ba49-4fd1-9e88-7d5fff08e637" name="Smart Assertion">
        <con:configuration xsi:type="con:DataAndMetadataAssertion">
          <con:mode>Received Data</con:mode>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/@fetchSize</con:path>
            <con:element>@fetchSize</con:element>
            <con:operatorId>8</con:operatorId>
            <con:enabled>true</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>true</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:path>
            <con:element>@rowNumber</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>true</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/USERID[1]</con:path>
            <con:element>USERID</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>19054210828</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTNUMBER[1]</con:path>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42024493606</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTTYPENAME[1]</con:path>
            <con:element>ACCOUNTTYPENAME</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>CoreAccount</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/CURRENCYCODE[1]</con:path>
            <con:element>CURRENCYCODE</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTROLENAME[1]</con:path>
            <con:element>ACCOUNTROLENAME</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>Register</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <USERID>19054210828</USERID>
         <ACCOUNTNUMBER>42024493606</ACCOUNTNUMBER>
         <ACCOUNTTYPENAME>CoreAccount</ACCOUNTTYPENAME>
         <CURRENCYCODE>NOK</CURRENCYCODE>
         <ACCOUNTROLENAME>Register</ACCOUNTROLENAME>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Groovy Script" id="1b68e5f4-b691-4142-8279-5ad5f4297429">
    <con:settings/>
    <con:config>
      <script>String propertyStepName = 'Properties';
setProductFeatureDetails(propertyStepName);

public setProductFeatureDetails(propertyStepName) {
	int productFeatureBankCount = context.expand( '${PWH_PRODUCT_FEATURE#ResponseAsXml#count(//Row)}' ).toInteger();
	for (int i = 1; i&lt;= productFeatureBankCount; i++) {
		String productFeatureBank = context.expand( '${PWH_PRODUCT_FEATURE#ResponseAsXml#//Results[1]/ResultSet[1]/Row['+i+']/INITIATORBANKID[1]}' )
		context.testCase.getTestStepByName(propertyStepName).setPropertyValue('Straks_2_1_orgid_'+productFeatureBank, productFeatureBank );
	}
}</script>
    </con:config>
  </con:testStep>
  <con:testStep type="properties" name="Properties" id="0d9b89d5-a1b1-46b6-bc0d-902e59318515">
    <con:settings/>
    <con:config xsi:type="con:PropertiesStep" saveFirst="true" discardValuesOnSave="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:properties>
        <con:property>
          <con:name>Straks_4201</con:name>
          <con:value xsi:nil="true"/>
        </con:property>
        <con:property>
          <con:name>Straks_1802</con:name>
          <con:value xsi:nil="true"/>
        </con:property>
      </con:properties>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Remove Properties" id="afe36a72-06b4-4fb4-be1f-b3c819ea412c" disabled="true">
    <con:settings/>
    <con:config>
      <script>String propertyStepName = 'Properties';
deleteProductFeatureDetails(propertyStepName);

public deleteProductFeatureDetails(propertyStepName) {
	int propertyCount = context.testCase.getTestStepByName(propertyStepName).propertyCount;
	for (int i=1; i&lt;= propertyCount ; i++ ) {
		context.testCase.getTestStepByName(propertyStepName).removeProperty('Straks_2_1_orgid_'+i);
	}
}</script>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="MIGRATE_BANK_TO_Straks-2.1" id="7311095c-cf63-4677-8c7f-0ec432e6379a" disabled="true">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWHDATA</con:dbConnectionName>
      <con:driver>${#Project#JDBCDriver}</con:driver>
      <con:connectionString>${#Project#PWHDbString}</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>UPDATE PRODUCT_FEATURE 
SET PRODUCT = 'Straks-2.1' 
WHERE INITIATORBANKID IN ('3625')</con:query>
      <con:storedProcedure>false</con:storedProcedure>
      <con:assertion type="JDBC Status" id="266efb75-b6f0-4041-abb8-b71379cf3d0a" name="JDBC Status"/>
      <con:assertion type="DataAndMetadataAssertion" id="9c8147b5-ba49-4fd1-9e88-7d5fff08e637" name="Smart Assertion">
        <con:configuration xsi:type="con:DataAndMetadataAssertion">
          <con:mode>Received Data</con:mode>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/@fetchSize</con:path>
            <con:element>@fetchSize</con:element>
            <con:operatorId>8</con:operatorId>
            <con:enabled>true</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>true</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:path>
            <con:element>@rowNumber</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>true</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/USERID[1]</con:path>
            <con:element>USERID</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>19054210828</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTNUMBER[1]</con:path>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42024493606</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTTYPENAME[1]</con:path>
            <con:element>ACCOUNTTYPENAME</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>CoreAccount</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/CURRENCYCODE[1]</con:path>
            <con:element>CURRENCYCODE</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTROLENAME[1]</con:path>
            <con:element>ACCOUNTROLENAME</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>Register</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <USERID>19054210828</USERID>
         <ACCOUNTNUMBER>42024493606</ACCOUNTNUMBER>
         <ACCOUNTTYPENAME>CoreAccount</ACCOUNTTYPENAME>
         <CURRENCYCODE>NOK</CURRENCYCODE>
         <ACCOUNTROLENAME>Register</ACCOUNTROLENAME>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="MIGRATE_BANK_TO_Straks-2.0" id="6cb1376c-2134-4109-b12c-d6dd63597eb6" disabled="true">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWHDATA</con:dbConnectionName>
      <con:driver>${#Project#JDBCDriver}</con:driver>
      <con:connectionString>${#Project#PWHDbString}</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>UPDATE PRODUCT_FEATURE 
SET PRODUCT = 'Straks-2.0' 
WHERE INITIATORBANKID IN ('3625')</con:query>
      <con:storedProcedure>false</con:storedProcedure>
      <con:assertion type="JDBC Status" id="266efb75-b6f0-4041-abb8-b71379cf3d0a" name="JDBC Status"/>
      <con:assertion type="DataAndMetadataAssertion" id="9c8147b5-ba49-4fd1-9e88-7d5fff08e637" name="Smart Assertion">
        <con:configuration xsi:type="con:DataAndMetadataAssertion">
          <con:mode>Received Data</con:mode>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/@fetchSize</con:path>
            <con:element>@fetchSize</con:element>
            <con:operatorId>8</con:operatorId>
            <con:enabled>true</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>true</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:path>
            <con:element>@rowNumber</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>true</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/USERID[1]</con:path>
            <con:element>USERID</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>19054210828</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTNUMBER[1]</con:path>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42024493606</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTTYPENAME[1]</con:path>
            <con:element>ACCOUNTTYPENAME</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>CoreAccount</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/CURRENCYCODE[1]</con:path>
            <con:element>CURRENCYCODE</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:path>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTROLENAME[1]</con:path>
            <con:element>ACCOUNTROLENAME</con:element>
            <con:operatorId>1</con:operatorId>
            <con:enabled>false</con:enabled>
            <con:expectedValue>Register</con:expectedValue>
            <con:caseSensitive>false</con:caseSensitive>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <USERID>19054210828</USERID>
         <ACCOUNTNUMBER>42024493606</ACCOUNTNUMBER>
         <ACCOUNTTYPENAME>CoreAccount</ACCOUNTTYPENAME>
         <CURRENCYCODE>NOK</CURRENCYCODE>
         <ACCOUNTROLENAME>Register</ACCOUNTROLENAME>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>Sample</con:name>
      <con:value>Sample</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
</con:testCase>
