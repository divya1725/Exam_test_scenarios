<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="2e4cb111-60bd-4190-922d-b85d36d647ae" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="SKKOPayment_Multiple message_BL-D" searchProperties="true" timeout="0" disabled="true" xmlns:con="http://eviware.com/soapui/config">
  <con:description>TC will create test data for Multiple transactions with same debit account for Booking level D</con:description>
  <con:settings>
    <con:setting id="2e4cb111-60bd-4190-922d-b85d36d647aefileName">SKKOPayment_Multiple-message_BL-D</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="request" id="5a4040a0-d818-43ba-b450-24937e5da197" name="PBDSkkoAccount">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PBDSSKKORegisterNumberInfo_V1_1PortTypeSoap11</con:interface>
      <con:operation>skkoRegisterNumberList</con:operation>
      <con:request name="PBDSkkoAccount" id="713023d5-d040-435b-95c3-5d3750dfc656">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.245:10780/pbdsrv/services/PBDSSKKORegisterNumberInfo_V1_1</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1" xmlns:urn1="urn:srv.pbd.fs.edb.com:domain:skkoregisternumber:v1_1" xmlns:urn2="urn:srv.pbd.fs.edb.com:domain:common:v1_0">
   <soapenv:Header>
     <wsc:AutHeader>
         <wsc:SourceApplication>SPINALIS</wsc:SourceApplication>
         <wsc:DestinationApplication>PINC1</wsc:DestinationApplication>
         <wsc:Function>PAYSPaymentCreate_V1_1Service</wsc:Function>
         <wsc:Version>1</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>E212985</wsc:userid>
            <wsc:credentials>03110012010400425kglPboRi3h1Z4YUjUpQ0UB65Ta2kPKj1KWwkWemtrL+SoWqMxx/KuqxUVbNyTu6DsSaabKNt2t+xJppso23a37EmmmyjbdrffJeRiGWfHDGwxCWOpDYc2jgSxAz1+8eEsSaabKNt2t/XzlyjxYnxhcG46wcbIKp/sSaabKNt2t9wBUG0SyIoqFfig80Gq4uXVBtimDzTiu2xJppso23a37Emmmyjbdrf8wP73CNrvpw=apG4tU0NraPbbqKUp39erKDFa7xy6z+r4VDMr/6qBlkFniGaNeDXv4cZcZZQQI6JtwB3JYQk6WqLA7oyp1FWRM6n46ehgNmHVNly8fTnQbIuGJSF2LUyGI7aE92/dgtp8jv9bsGpNe58K+xb4LeIHwjb2nVVvt4/2oLtDQ8IPJE=</wsc:credentials>
            <wsc:channel>NBA</wsc:channel>
            <wsc:orgid>4201</wsc:orgid>
            <wsc:customerid>12345</wsc:customerid>
            <wsc:ip>127.0.0.1</wsc:ip>
            <wsc:item key="ss" value="12"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:skkoRegisterNumberListRequest>
         <urn:skkoRegisterNumberCriteria>
            <!--Optional:-->
            
            <!--Optional:-->
            <urn1:bankId>${Properties#bankId}</urn1:bankId>
            <!--Optional:-->
            <urn1:status>ACTIVE</urn1:status>
            <!--Optional:-->
            
            <!--Optional:-->
            
         </urn:skkoRegisterNumberCriteria>
         <urn:pagingElement>
            <urn2:startIndex>0</urn2:startIndex>
            <urn2:pageSize>50</urn2:pageSize>
         </urn:pagingElement>
      </urn:skkoRegisterNumberListRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="fa2bc76e-25ee-48a1-b1ff-d4422777d8e0" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="a90826ca-d497-4b9a-bebb-c179e8282e0a" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="2d4f3579-9247-4ea1-8fd6-d110bf3c08ef" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="MessageContentAssertion" id="d2ff8a86-6fc0-43f3-8c1a-7c0daf8d4201" name="Message Content Assertion">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns2='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v21';
declare namespace ns3='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns3:skkoRegisterNumberListResponse[1]/ns2:ResponseState[1]/ns1:ErrorCode[1]</con:xpath>
              <con:element>ErrorCode</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns2='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v21';
declare namespace ns3='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns3:skkoRegisterNumberListResponse[1]/ns2:ResponseState[1]/ns1:Severity[1]</con:xpath>
              <con:element>Severity</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns2='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v21';
declare namespace ns3='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns3:skkoRegisterNumberListResponse[1]/ns2:ResponseState[1]/ns1:ComponentId[1]</con:xpath>
              <con:element>ComponentId</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>103</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns2='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v21';
declare namespace ns3='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns3:skkoRegisterNumberListResponse[1]/ns2:ResponseState[1]/ns1:StrErrorCode[1]</con:xpath>
              <con:element>StrErrorCode</con:element>
              <con:type>XmlString</con:type>
              <con:operator>exists</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue xsi:nil="true"/>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns3='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns2='http://edb.com/ws/WSCommon_v21';
declare namespace ns1='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns4='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns4:skkoRegisterNumberListResponse[1]/ns3:ResponseState[1]/ns2:StrErrorCode[1]/@ns1:nil</con:xpath>
              <con:element>@xsi:nil</con:element>
              <con:type/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns2='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v21';
declare namespace ns3='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns3:skkoRegisterNumberListResponse[1]/ns2:ResponseState[1]/ns1:Message[1]</con:xpath>
              <con:element>Message</con:element>
              <con:type>XmlString</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>OK</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns2='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v21';
declare namespace ns3='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns3:skkoRegisterNumberListResponse[1]/ns2:ResponseState[1]/ns1:NativeError[1]</con:xpath>
              <con:element>NativeError</con:element>
              <con:type>XmlString</con:type>
              <con:operator>exists</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue xsi:nil="true"/>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns3='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns2='http://edb.com/ws/WSCommon_v21';
declare namespace ns1='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns4='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns4:skkoRegisterNumberListResponse[1]/ns3:ResponseState[1]/ns2:NativeError[1]/@ns1:nil</con:xpath>
              <con:element>@xsi:nil</con:element>
              <con:type/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns2='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v21';
declare namespace ns3='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns3:skkoRegisterNumberListResponse[1]/ns2:ResponseState[1]/ns1:LogSequence[1]</con:xpath>
              <con:element>LogSequence</con:element>
              <con:type>XmlLong</con:type>
              <con:operator>exists</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue xsi:nil="true"/>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns3='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns2='http://edb.com/ws/WSCommon_v21';
declare namespace ns1='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns4='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns4:skkoRegisterNumberListResponse[1]/ns3:ResponseState[1]/ns2:LogSequence[1]/@ns1:nil</con:xpath>
              <con:element>@xsi:nil</con:element>
              <con:type/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='urn:srv.pbd.fs.edb.com:domain:skkoregisternumber:v1_1';
declare namespace ns2='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns2:skkoRegisterNumberListResponse[1]/ns2:skkoRegisterNumberDetails[1]/ns1:bankId[1]</con:xpath>
              <con:element>ns2:bankId</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>4201</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='urn:srv.pbd.fs.edb.com:domain:skkoregisternumber:v1_1';
declare namespace ns2='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns2:skkoRegisterNumberListResponse[1]/ns2:skkoRegisterNumberDetails[1]/ns1:skkoBankId[1]</con:xpath>
              <con:element>ns2:skkoBankId</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>4068</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='urn:srv.pbd.fs.edb.com:domain:skkoregisternumber:v1_1';
declare namespace ns2='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns2:skkoRegisterNumberListResponse[1]/ns2:skkoRegisterNumberDetails[1]/ns1:status[1]</con:xpath>
              <con:element>ns2:status</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>ACTIVE</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='urn:srv.pbd.fs.edb.com:domain:skkoregisternumber:v1_1';
declare namespace ns2='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns2:skkoRegisterNumberListResponse[1]/ns2:skkoRegisterNumberDetails[1]/ns1:startDate[1]</con:xpath>
              <con:element>ns2:startDate</con:element>
              <con:type>XmlDate</con:type>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>2017-02-08</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='urn:srv.pbd.fs.edb.com:domain:common:v1_0';
declare namespace ns2='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns2:skkoRegisterNumberListResponse[1]/ns2:pagingElement[1]/ns1:numberOfElements[1]</con:xpath>
              <con:element>ns4:numberOfElements</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>false</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns3:skkoRegisterNumberListResponse xmlns:ns7="http://edb.com/ws/WSCommon_v22" xmlns:ns6="urn:srv.pbd.fs.edb.com:ws:accountcontrol:v1_0" xmlns:ns5="urn:srv.pbd.fs.edb.com:domain:accountcontrol:v1_0" xmlns:ns4="urn:srv.pbd.fs.edb.com:domain:common:v1_0" xmlns:ns3="urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1" xmlns:ns2="urn:srv.pbd.fs.edb.com:domain:skkoregisternumber:v1_1" xmlns="http://edb.com/ws/WSCommon_v21">
         <ns4:ResponseState>
            <ErrorCode>0</ErrorCode>
            <Severity>0</Severity>
            <ComponentId>103</ComponentId>
            <StrErrorCode xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            <Message>OK</Message>
            <NativeError xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            <LogSequence xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns4:ResponseState>
         <ns3:skkoRegisterNumberDetails>
            <ns2:bankId>4201</ns2:bankId>
            <ns2:skkoBankId>4068</ns2:skkoBankId>
            <ns2:status>ACTIVE</ns2:status>
            <ns2:startDate>2017-02-08</ns2:startDate>
         </ns3:skkoRegisterNumberDetails>
         <ns3:pagingElement>
            <ns4:numberOfElements>1</ns4:numberOfElements>
         </ns3:pagingElement>
      </ns3:skkoRegisterNumberListResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1/PBDSSKKORegisterNumberInfo_V1_1PortType/skkoRegisterNumberListRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="PBDSKKOAccount" id="4fb407c6-f730-448a-99e2-b311c8f84a08">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true">
        <con:name>ns2:skkoBankId</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>PBDSkkoAccount</con:sourceStep>
        <con:sourcePath>declare namespace ns2='urn:srv.pbd.fs.edb.com:domain:skkoregisternumber:v1_1';
declare namespace ns3='urn:srv.pbd.fs.edb.com:ws:skkoregisternumberinfo:v1_1';
//ns3:skkoRegisterNumberListResponse[1]/ns3:skkoRegisterNumberDetails[1]/ns2:skkoBankId[1]</con:sourcePath>
        <con:targetType>PBDRegisterAccount</con:targetType>
        <con:targetStep>Properties</con:targetStep>
        <con:targetPath/>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="DB Account" id="186dde02-c77c-434a-8480-4ab2cdc392d2">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>Database</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:pwhdata/pwh@(DESCRIPTION=(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_s1)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select CUSTOMERID,ACCOUNTNUMBER  from V_authorisation 
where CUSTBANKID='${Properties#bankId}' 
and length(customerID)='11' AND ACCOUNTNUMBER like '${Properties#PBDRegisterAccount}%'
and ROWNUM =1</con:query>
      <con:storedProcedure>false</con:storedProcedure>
      <con:assertion type="MessageContentAssertion" id="8e97c887-32b1-4c89-8f5a-4e8a7d8c4bc2" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <CUSTOMERID>01010077571</CUSTOMERID>
         <ACCOUNTNUMBER>42125748338</ACCOUNTNUMBER>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="SetProperties" id="e95f1f13-8fa8-40ee-ac09-8502da03a695">
    <con:settings/>
    <con:config>
      <script>import java.text.SimpleDateFormat

def customerID = context.expand( '${DB Account#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/CUSTOMERID[1]}' )
def debtorAccountNumber = context.expand( '${DB Account#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/ACCOUNTNUMBER[1]}' )

testRunner.testCase.getTestStepByName("Properties").setPropertyValue("customerid",customerID)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("accountNumber",debtorAccountNumber)

Date date = new Date();
SimpleDateFormat fn = new SimpleDateFormat("ddMyyhhmmss");
def datetime = fn.format(date)
log.info datetime

def EndtoEndID = "skko"+datetime;
log.info EndtoEndID
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("MsgID",EndtoEndID );</script>
    </con:config>
  </con:testStep>
  <con:testStep type="properties" name="Properties" id="0204d9f5-924c-488d-9231-c26718e1030b">
    <con:settings/>
    <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:properties>
        <con:property>
          <con:name>customerid</con:name>
          <con:value>13027014202</con:value>
        </con:property>
        <con:property>
          <con:name>bankId</con:name>
          <con:value>4201</con:value>
        </con:property>
        <con:property>
          <con:name>accountNumber</con:name>
          <con:value>40680100278</con:value>
        </con:property>
        <con:property>
          <con:name>MessageToSendFormat</con:name>
          <con:value><![CDATA[<?xml version="1.0" encoding="UTF-8"?><Wrapper xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="urn:pin.payment.edb.com:authpain001wrapper:v1_0"><auth><![CDATA[<?xml version="1.0" encoding="UTF-8"?><AgreementAuthorizationRequest><authRequest><agreementData><agreementId>CUSTOMERID</agreementId><bankId>BANKID</bankId><userId>CUSTOMERID</userId><userFirstName>Ext.Telepay</userFirstName><userLastName>EvryFileArchive</userLastName><userIdType>EXTU</userIdType><productID>0</productID><organizationId>CUSTOMERID</organizationId><preapproved>true</preapproved><rejectionLevel>TRANSACTION</rejectionLevel><origin>PAYMUL</origin></agreementData><agreementAccount><accountNumber>ACCOUNTID</accountNumber><swiftAdress>SPTRNO22XXX</swiftAdress><currencyCode>NOK</currencyCode><accountType>CoreAccount</accountType><access>CREDIT_AND_DEBIT</access><bookingLevel>D</bookingLevel><approvalLimit>10000000</approvalLimit><registerLimit>10000000</registerLimit><numberOfVerifiers>0</numberOfVerifiers><numberOfApprovers>0</numberOfApprovers></agreementAccount><metaInformation><receivedTimestamp>DATET00:05:37</receivedTimestamp></metaInformation></authRequest></AgreementAuthorizationRequest>]]]]>><![CDATA[</auth><content><![CDATA[<?xml version="1.0" encoding="UTF-8"?><Document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:iso:std:iso:20022:tech:xsd:pain.001.001.04"><CstmrCdtTrfInitn><GrpHdr><MsgId>TIMESTAMP</MsgId><CreDtTm>DATET00:06:27.355+02:00</CreDtTm><NbOfTxs>2</NbOfTxs><CtrlSum>40.00</CtrlSum><InitgPty><Nm>Vin fjerner &amp; co.</Nm><Id><OrgId><AnyBIC>SPTRNO22XXX</AnyBIC><Othr><Id>630009</Id><SchmeNm><Cd>BANK</Cd></SchmeNm></Othr></OrgId></Id></InitgPty></GrpHdr><PmtInf><PmtInfId>TIMESTAMP_D</PmtInfId><PmtMtd>TRF</PmtMtd><NbOfTxs>1</NbOfTxs><CtrlSum>20.00</CtrlSum><PmtTpInf><InstrPrty>NORM</InstrPrty></PmtTpInf><ReqdExctnDt>DATE</ReqdExctnDt><Dbtr><Id><OrgId><Othr><Id>CUSTOMERID</Id></Othr></OrgId></Id></Dbtr><DbtrAcct><Id><Othr><Id>ACCOUNTID</Id><SchmeNm><Cd>BBAN</Cd></SchmeNm></Othr></Id></DbtrAcct><DbtrAgt><FinInstnId><BICFI>SPTRNO22XXX</BICFI></FinInstnId></DbtrAgt><ChrgBr>SHAR</ChrgBr><CdtTrfTxInf><PmtId><InstrId>TIMESTAMP_D</InstrId><EndToEndId>TIMESTAMP_D</EndToEndId></PmtId><PmtTpInf><InstrPrty>NORM</InstrPrty><CtgyPurp><Cd>SALA</Cd></CtgyPurp></PmtTpInf><Amt><InstdAmt Ccy="NOK">20.00</InstdAmt></Amt><Cdtr><Nm>DEN FRIE EVANGELISKE FORSAMLIN</Nm><PstlAdr><PstCd>1597</PstCd><TwnNm>MOSS</TwnNm><AdrLine>V]LERVEIEN 75</AdrLine></PstlAdr></Cdtr><CdtrAcct><Id><Othr><Id>42125748338</Id><SchmeNm><Prtry>BBAN</Prtry></SchmeNm></Othr></Id></CdtrAcct><RmtInf><Ustrd>TestRemittanceInfo</Ustrd></RmtInf></CdtTrfTxInf></PmtInf><PmtInf><PmtInfId>TIMESTAMP_D1</PmtInfId><PmtMtd>TRF</PmtMtd><NbOfTxs>1</NbOfTxs><CtrlSum>20.00</CtrlSum><PmtTpInf><InstrPrty>NORM</InstrPrty></PmtTpInf><ReqdExctnDt>DATE</ReqdExctnDt><Dbtr><Id><OrgId><Othr><Id>CUSTOMERID</Id></Othr></OrgId></Id></Dbtr><DbtrAcct><Id><Othr><Id>ACCOUNTID</Id><SchmeNm><Cd>BBAN</Cd></SchmeNm></Othr></Id></DbtrAcct><DbtrAgt><FinInstnId><BICFI>SPTRNO22XXX</BICFI></FinInstnId></DbtrAgt><ChrgBr>SHAR</ChrgBr><CdtTrfTxInf><PmtId><InstrId>TIMESTAMP_D1</InstrId><EndToEndId>TIMESTAMP_D1</EndToEndId></PmtId><PmtTpInf><InstrPrty>NORM</InstrPrty><CtgyPurp><Cd>SALA</Cd></CtgyPurp></PmtTpInf><Amt><InstdAmt Ccy="NOK">20.00</InstdAmt></Amt><Cdtr><Nm>DEN FRIE EVANGELISKE FORSAMLIN</Nm><PstlAdr><PstCd>1597</PstCd><TwnNm>MOSS</TwnNm><AdrLine>V]LERVEIEN 75</AdrLine></PstlAdr></Cdtr><CdtrAcct><Id><Othr><Id>42125748338</Id><SchmeNm><Prtry>BBAN</Prtry></SchmeNm></Othr></Id></CdtrAcct><RmtInf><Ustrd>TestRemittanceInfo</Ustrd></RmtInf></CdtTrfTxInf></PmtInf></CstmrCdtTrfInitn></Document>]]]]>><![CDATA[</content></Wrapper>]]></con:value>
        </con:property>
        <con:property>
          <con:name>DueDate</con:name>
          <con:value>${=def now = new Date();now.format("yyyy-MM-dd")}</con:value>
        </con:property>
        <con:property>
          <con:name>MsgID</con:name>
          <con:value>skko10820081933</con:value>
        </con:property>
        <con:property>
          <con:name>messagetoSend</con:name>
          <con:value><![CDATA[<?xml version="1.0" encoding="UTF-8"?><Wrapper xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="urn:pin.payment.edb.com:authpain001wrapper:v1_0"><auth><![CDATA[<?xml version="1.0" encoding="UTF-8"?><AgreementAuthorizationRequest><authRequest><agreementData><agreementId>13027014202</agreementId><bankId>4201</bankId><userId>13027014202</userId><userFirstName>Ext.Telepay</userFirstName><userLastName>EvryFileArchive</userLastName><userIdType>EXTU</userIdType><productID>0</productID><organizationId>13027014202</organizationId><preapproved>true</preapproved><rejectionLevel>TRANSACTION</rejectionLevel><origin>PAYMUL</origin></agreementData><agreementAccount><accountNumber>40680100278</accountNumber><swiftAdress>SPTRNO22XXX</swiftAdress><currencyCode>NOK</currencyCode><accountType>CoreAccount</accountType><access>CREDIT_AND_DEBIT</access><bookingLevel>D</bookingLevel><approvalLimit>10000000</approvalLimit><registerLimit>10000000</registerLimit><numberOfVerifiers>0</numberOfVerifiers><numberOfApprovers>0</numberOfApprovers></agreementAccount><metaInformation><receivedTimestamp>2020-08-10T00:05:37</receivedTimestamp></metaInformation></authRequest></AgreementAuthorizationRequest>]]]]>><![CDATA[</auth><content><![CDATA[<?xml version="1.0" encoding="UTF-8"?><Document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:iso:std:iso:20022:tech:xsd:pain.001.001.04"><CstmrCdtTrfInitn><GrpHdr><MsgId>skko10820081933</MsgId><CreDtTm>2020-08-10T00:06:27.355+02:00</CreDtTm><NbOfTxs>2</NbOfTxs><CtrlSum>40.00</CtrlSum><InitgPty><Nm>Vin fjerner &amp; co.</Nm><Id><OrgId><AnyBIC>SPTRNO22XXX</AnyBIC><Othr><Id>630009</Id><SchmeNm><Cd>BANK</Cd></SchmeNm></Othr></OrgId></Id></InitgPty></GrpHdr><PmtInf><PmtInfId>skko10820081933_D</PmtInfId><PmtMtd>TRF</PmtMtd><NbOfTxs>1</NbOfTxs><CtrlSum>20.00</CtrlSum><PmtTpInf><InstrPrty>NORM</InstrPrty></PmtTpInf><ReqdExctnDt>2020-08-10</ReqdExctnDt><Dbtr><Id><OrgId><Othr><Id>13027014202</Id></Othr></OrgId></Id></Dbtr><DbtrAcct><Id><Othr><Id>40680100278</Id><SchmeNm><Cd>BBAN</Cd></SchmeNm></Othr></Id></DbtrAcct><DbtrAgt><FinInstnId><BICFI>SPTRNO22XXX</BICFI></FinInstnId></DbtrAgt><ChrgBr>SHAR</ChrgBr><CdtTrfTxInf><PmtId><InstrId>skko10820081933_D</InstrId><EndToEndId>skko10820081933_D</EndToEndId></PmtId><PmtTpInf><InstrPrty>NORM</InstrPrty><CtgyPurp><Cd>SALA</Cd></CtgyPurp></PmtTpInf><Amt><InstdAmt Ccy="NOK">20.00</InstdAmt></Amt><Cdtr><Nm>DEN FRIE EVANGELISKE FORSAMLIN</Nm><PstlAdr><PstCd>1597</PstCd><TwnNm>MOSS</TwnNm><AdrLine>V]LERVEIEN 75</AdrLine></PstlAdr></Cdtr><CdtrAcct><Id><Othr><Id>42125748338</Id><SchmeNm><Prtry>BBAN</Prtry></SchmeNm></Othr></Id></CdtrAcct><RmtInf><Ustrd>TestRemittanceInfo</Ustrd></RmtInf></CdtTrfTxInf></PmtInf><PmtInf><PmtInfId>skko10820081933_D1</PmtInfId><PmtMtd>TRF</PmtMtd><NbOfTxs>1</NbOfTxs><CtrlSum>20.00</CtrlSum><PmtTpInf><InstrPrty>NORM</InstrPrty></PmtTpInf><ReqdExctnDt>2020-08-10</ReqdExctnDt><Dbtr><Id><OrgId><Othr><Id>13027014202</Id></Othr></OrgId></Id></Dbtr><DbtrAcct><Id><Othr><Id>40680100278</Id><SchmeNm><Cd>BBAN</Cd></SchmeNm></Othr></Id></DbtrAcct><DbtrAgt><FinInstnId><BICFI>SPTRNO22XXX</BICFI></FinInstnId></DbtrAgt><ChrgBr>SHAR</ChrgBr><CdtTrfTxInf><PmtId><InstrId>skko10820081933_D1</InstrId><EndToEndId>skko10820081933_D1</EndToEndId></PmtId><PmtTpInf><InstrPrty>NORM</InstrPrty><CtgyPurp><Cd>SALA</Cd></CtgyPurp></PmtTpInf><Amt><InstdAmt Ccy="NOK">20.00</InstdAmt></Amt><Cdtr><Nm>DEN FRIE EVANGELISKE FORSAMLIN</Nm><PstlAdr><PstCd>1597</PstCd><TwnNm>MOSS</TwnNm><AdrLine>V]LERVEIEN 75</AdrLine></PstlAdr></Cdtr><CdtrAcct><Id><Othr><Id>42125748338</Id><SchmeNm><Prtry>BBAN</Prtry></SchmeNm></Othr></Id></CdtrAcct><RmtInf><Ustrd>TestRemittanceInfo</Ustrd></RmtInf></CdtTrfTxInf></PmtInf></CstmrCdtTrfInitn></Document>]]]]>><![CDATA[</content></Wrapper>]]></con:value>
        </con:property>
        <con:property>
          <con:name>PBDRegisterAccount</con:name>
          <con:value>4068</con:value>
        </con:property>
        <con:property>
          <con:name>transactionsIds</con:name>
          <con:value>[187224, 187225]</con:value>
        </con:property>
        <con:property>
          <con:name>expectedPmtStatus</con:name>
          <con:value>['RFPE','COMP']</con:value>
        </con:property>
      </con:properties>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Set_Queue_Details_And_File" id="62c3541f-949c-4a45-a091-d9ee8aa604b4">
    <con:settings/>
    <con:config>
      <script>import com.eviware.soapui.support.GroovyUtils.*
import java.io.File 
import java.io.Reader

//MsgID
def MsgID = testRunner.testCase.getTestStepByName("Properties").getPropertyValue('MsgID');
log.info MsgID;

//Initial Message to send
def messageToSend = context.expand( '${Properties#MessageToSendFormat}' )
log.info(messageToSend)

//Parmeters needed in message
def Account = context.expand( '${Properties#accountNumber}' )
def customerid = context.expand( '${Properties#customerid}' )
def dueDate = context.expand( '${Properties#DueDate}' )
def BANKID = context.expand( '${Properties#bankId}' )


//Replace parmaeters in message by respective values
messageToSend = messageToSend.replaceAll("TIMESTAMP",MsgID) ;
messageToSend = messageToSend.replaceAll("CUSTOMERID",customerid) ;
messageToSend = messageToSend.replaceAll("ACCOUNTID",Account) ;
messageToSend = messageToSend.replaceAll("DATE",dueDate) ;
messageToSend = messageToSend.replaceAll("BANKID",BANKID) ;
log.info messageToSend

//Set 'messagetoSend_currentTC  property value with updated message
def update = testRunner.testCase.getTestStepByName("Properties").setPropertyValue("messagetoSend",messageToSend);</script>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="PreparePAIN001File" id="ff4ebf4e-8c8d-4d5a-ad27-d330db3caf3d">
    <con:settings/>
    <con:config>
      <script>// File payment content property
import MQMessageUtils;

def filecontent = context.expand( '${Properties#messagetoSend#declare namespace ns1=\'urn:pin.payment.edb.com:authpain001wrapper:v1_0\'; //ns1:Wrapper[1]}' )
log.info(filecontent)

// Set MQ properties
def mQHostName = context.expand( '${#Project#mqHostname}' )
def int mQPort = context.expand( '${#Project#mqPort}' ) as Integer
def mQQueuemanager = context.expand( '${#Project#mqManager}' )
def mQChannelAuth = context.expand( '${#Project#mqChannelAuth}' )
def mQMessageQueueSend = context.expand( '${#Project#sendQueuePAIN001}' )

// Create utility class object, Create MQ connection
MQMessageUtils mqMessageUtils = new MQMessageUtils(mQQueuemanager,mQHostName,mQPort,mQChannelAuth,log);
// Send Message to MQ
log.info ("Message Sent :" + mqMessageUtils.sendMessage(mQMessageQueueSend,filecontent));</script>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Delay" id="d1960c10-2e20-415d-a546-ad35b2bafb66">
    <con:settings/>
    <con:config>
      <delay>10000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="TRANSACTIONS" id="3ecff56f-a0bb-4dcd-8a05-e9c346d298e5">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>Database</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:pwhdata/pwh@(DESCRIPTION=(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_s1)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select unique(A.MESSAGEID),C.SKKOTYPE,A.ORIGINALCHANNEL,A.MARKETTYPE,A.CUSTOMERID,A.INITIATORID,A.INITIATORBANKID,A.MESSAGEIDENTIFICATION,C.ENDTOENDID,C.DEBITCOUNTERVALUEAMT,
 A.AGREEMENTID,A.ORIGINALFORMAT, A.NUMBEROFTRANSACTIONS,
A.SOURCEAPPLICATION,C.TRANSACTIONSID,C.RISKSTATUS,C.FK_PAYMENTINFOID,C.CHARGEBEARER,C.PAYMENTTYPE,C.PAYMENTSTATUS,C.MARKETPRODUCTNAME,C.ISPC,
C.FK_PROCESSINGLINEID,C.BOOKINGLEVEL,C.PRIORITIZED,C.DEBETACCOUNTNO,C.RELEASEDATE,C.REQUESTEDEXECUTIONDATE,
C.PAYMENT_REF,C.PROCESSINGBANKORGID,C.PEPROCESSINGLINE,
C.DEBIT_BOOKING_ID,C.TRANSFER_IN_SAME_BANK,C.DEBITTEXTCODE,C.CREDITTEXTCODE
from MESSAGE A,PAYMENTINFO B, TRANSACTIONS C, ADVICETRANSACTION D where
A.MESSAGEID = B.FK_MESSAGEID and B.PAYMENTINFOID = C.FK_PAYMENTINFOID and C.ENDTOENDID like ('${Properties#MsgID}%') order by C.ENDTOENDID asc</con:query>
      <con:storedProcedure>false</con:storedProcedure>
      <con:assertion type="MessageContentAssertion" id="ae41a809-cc43-4dae-b63e-cafa529c3743" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]</con:xpath>
            <con:element>MESSAGEID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>147305</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/ORIGINALCHANNEL[1]</con:xpath>
            <con:element>ORIGINALCHANNEL</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>BES</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/MARKETTYPE[1]</con:xpath>
            <con:element>MARKETTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>BM</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/CUSTOMERID[1]</con:xpath>
            <con:element>CUSTOMERID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>13027014202</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INITIATORID[1]</con:xpath>
            <con:element>INITIATORID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>13027014202</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INITIATORBANKID[1]</con:xpath>
            <con:element>INITIATORBANKID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>4201</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/MESSAGEIDENTIFICATION[1]</con:xpath>
            <con:element>MESSAGEIDENTIFICATION</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>skko10820115025</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/ENDTOENDID[1]</con:xpath>
            <con:element>ENDTOENDID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>skko10820115025_D</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/DEBITCOUNTERVALUEAMT[1]</con:xpath>
            <con:element>DEBITCOUNTERVALUEAMT</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>20</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>13027014202</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/ORIGINALFORMAT[1]</con:xpath>
            <con:element>ORIGINALFORMAT</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>PMUL</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/NUMBEROFTRANSACTIONS[1]</con:xpath>
            <con:element>NUMBEROFTRANSACTIONS</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>2</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/SOURCEAPPLICATION[1]</con:xpath>
            <con:element>SOURCEAPPLICATION</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>EVRYCPS</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]</con:xpath>
            <con:element>TRANSACTIONSID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>187042</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RISKSTATUS[1]</con:xpath>
            <con:element>RISKSTATUS</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/FK_PAYMENTINFOID[1]</con:xpath>
            <con:element>FK_PAYMENTINFOID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>162812</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/CHARGEBEARER[1]</con:xpath>
            <con:element>CHARGEBEARER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENTTYPE[1]</con:xpath>
            <con:element>PAYMENTTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>DOSA</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENTSTATUS[1]</con:xpath>
            <con:element>PAYMENTSTATUS</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>RFDD</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/MARKETPRODUCTNAME[1]</con:xpath>
            <con:element>MARKETPRODUCTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>PI Domestic</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/ISPC[1]</con:xpath>
            <con:element>ISPC</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>PAYCTDOMOUSALA</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/FK_PROCESSINGLINEID[1]</con:xpath>
            <con:element>FK_PROCESSINGLINEID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>50</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/BOOKINGLEVEL[1]</con:xpath>
            <con:element>BOOKINGLEVEL</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>D</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PRIORITIZED[1]</con:xpath>
            <con:element>PRIORITIZED</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>N</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/DEBETACCOUNTNO[1]</con:xpath>
            <con:element>DEBETACCOUNTNO</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>40680100278</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RELEASEDATE[1]</con:xpath>
            <con:element>RELEASEDATE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>2020-08-10 00:00:00</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/REQUESTEDEXECUTIONDATE[1]</con:xpath>
            <con:element>REQUESTEDEXECUTIONDATE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>2020-08-10 00:00:00</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENT_REF[1]</con:xpath>
            <con:element>PAYMENT_REF</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>187042</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PROCESSINGBANKORGID[1]</con:xpath>
            <con:element>PROCESSINGBANKORGID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>4201</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PEPROCESSINGLINE[1]</con:xpath>
            <con:element>PEPROCESSINGLINE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>PE_DOM_OUT</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/DEBIT_BOOKING_ID[1]</con:xpath>
            <con:element>DEBIT_BOOKING_ID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10008740000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/TRANSFER_IN_SAME_BANK[1]</con:xpath>
            <con:element>TRANSFER_IN_SAME_BANK</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>Y</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/DEBITTEXTCODE[1]</con:xpath>
            <con:element>DEBITTEXTCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>520</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/CREDITTEXTCODE[1]</con:xpath>
            <con:element>CREDITTEXTCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>13</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/SKKOTYPE[1]</con:xpath>
            <con:element>SKKOTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>D</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/PAYMENTSTATUS[1]</con:xpath>
            <con:element>PAYMENTSTATUS</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>RFDD</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/SKKOTYPE[1]</con:xpath>
            <con:element>SKKOTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>D</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/ORIGINALCHANNEL[1]</con:xpath>
            <con:element>ORIGINALCHANNEL</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>BES</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/MARKETTYPE[1]</con:xpath>
            <con:element>MARKETTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>BM</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/SOURCEAPPLICATION[1]</con:xpath>
            <con:element>SOURCEAPPLICATION</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>EVRYCPS</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/PEPROCESSINGLINE[1]</con:xpath>
            <con:element>PEPROCESSINGLINE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>PE_DOM_OUT</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <MESSAGEID>147305</MESSAGEID>
         <SKKOTYPE>D</SKKOTYPE>
         <ORIGINALCHANNEL>BES</ORIGINALCHANNEL>
         <MARKETTYPE>BM</MARKETTYPE>
         <CUSTOMERID>13027014202</CUSTOMERID>
         <INITIATORID>13027014202</INITIATORID>
         <INITIATORBANKID>4201</INITIATORBANKID>
         <MESSAGEIDENTIFICATION>skko10820115025</MESSAGEIDENTIFICATION>
         <ENDTOENDID>skko10820115025_D</ENDTOENDID>
         <DEBITCOUNTERVALUEAMT>20</DEBITCOUNTERVALUEAMT>
         <AGREEMENTID>13027014202</AGREEMENTID>
         <ORIGINALFORMAT>PMUL</ORIGINALFORMAT>
         <NUMBEROFTRANSACTIONS>2</NUMBEROFTRANSACTIONS>
         <SOURCEAPPLICATION>EVRYCPS</SOURCEAPPLICATION>
         <TRANSACTIONSID>187042</TRANSACTIONSID>
         <RISKSTATUS/>
         <FK_PAYMENTINFOID>162812</FK_PAYMENTINFOID>
         <CHARGEBEARER/>
         <PAYMENTTYPE>DOSA</PAYMENTTYPE>
         <PAYMENTSTATUS>RFPE</PAYMENTSTATUS>
         <MARKETPRODUCTNAME>PI Domestic</MARKETPRODUCTNAME>
         <ISPC>PAYCTDOMOUSALA</ISPC>
         <FK_PROCESSINGLINEID>50</FK_PROCESSINGLINEID>
         <BOOKINGLEVEL>D</BOOKINGLEVEL>
         <PRIORITIZED>N</PRIORITIZED>
         <DEBETACCOUNTNO>40680100278</DEBETACCOUNTNO>
         <RELEASEDATE>2020-08-10 00:00:00</RELEASEDATE>
         <REQUESTEDEXECUTIONDATE>2020-08-10 00:00:00</REQUESTEDEXECUTIONDATE>
         <PAYMENT_REF>187042</PAYMENT_REF>
         <PROCESSINGBANKORGID>4201</PROCESSINGBANKORGID>
         <PEPROCESSINGLINE>PE_DOM_OUT</PEPROCESSINGLINE>
         <DEBIT_BOOKING_ID>10008740000</DEBIT_BOOKING_ID>
         <TRANSFER_IN_SAME_BANK>Y</TRANSFER_IN_SAME_BANK>
         <DEBITTEXTCODE>520</DEBITTEXTCODE>
         <CREDITTEXTCODE>13</CREDITTEXTCODE>
      </Row>
      <Row rowNumber="2">
         <MESSAGEID>147305</MESSAGEID>
         <SKKOTYPE>D</SKKOTYPE>
         <ORIGINALCHANNEL>BES</ORIGINALCHANNEL>
         <MARKETTYPE>BM</MARKETTYPE>
         <CUSTOMERID>13027014202</CUSTOMERID>
         <INITIATORID>13027014202</INITIATORID>
         <INITIATORBANKID>4201</INITIATORBANKID>
         <MESSAGEIDENTIFICATION>skko10820115025</MESSAGEIDENTIFICATION>
         <ENDTOENDID>skko10820115025_D1</ENDTOENDID>
         <DEBITCOUNTERVALUEAMT>20</DEBITCOUNTERVALUEAMT>
         <AGREEMENTID>13027014202</AGREEMENTID>
         <ORIGINALFORMAT>PMUL</ORIGINALFORMAT>
         <NUMBEROFTRANSACTIONS>2</NUMBEROFTRANSACTIONS>
         <SOURCEAPPLICATION>EVRYCPS</SOURCEAPPLICATION>
         <TRANSACTIONSID>187043</TRANSACTIONSID>
         <RISKSTATUS/>
         <FK_PAYMENTINFOID>162813</FK_PAYMENTINFOID>
         <CHARGEBEARER/>
         <PAYMENTTYPE>DOSA</PAYMENTTYPE>
         <PAYMENTSTATUS>RFPE</PAYMENTSTATUS>
         <MARKETPRODUCTNAME>PI Domestic</MARKETPRODUCTNAME>
         <ISPC>PAYCTDOMOUSALA</ISPC>
         <FK_PROCESSINGLINEID>50</FK_PROCESSINGLINEID>
         <BOOKINGLEVEL>D</BOOKINGLEVEL>
         <PRIORITIZED>N</PRIORITIZED>
         <DEBETACCOUNTNO>40680100278</DEBETACCOUNTNO>
         <RELEASEDATE>2020-08-10 00:00:00</RELEASEDATE>
         <REQUESTEDEXECUTIONDATE>2020-08-10 00:00:00</REQUESTEDEXECUTIONDATE>
         <PAYMENT_REF>187043</PAYMENT_REF>
         <PROCESSINGBANKORGID>4201</PROCESSINGBANKORGID>
         <PEPROCESSINGLINE>PE_DOM_OUT</PEPROCESSINGLINE>
         <DEBIT_BOOKING_ID>10008740000</DEBIT_BOOKING_ID>
         <TRANSFER_IN_SAME_BANK>Y</TRANSFER_IN_SAME_BANK>
         <DEBITTEXTCODE>520</DEBITTEXTCODE>
         <CREDITTEXTCODE>13</CREDITTEXTCODE>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="setTransactions" id="84e1e29a-9dcc-4892-98a0-54d7eab0cf19">
    <con:settings/>
    <con:config>
      <script>def responseAsXml = context.expand( '${TRANSACTIONS#ResponseAsXml#//Results}' )

	def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context ) 
	def response = groovyUtils.getXmlHolder(responseAsXml)
	ArrayList&lt;String> transanctionList= response.getNodeValues("//*:TRANSACTIONSID")
	testRunner.testCase.getTestStepByName("Properties").setPropertyValue("transactionsIds",transanctionList.toString());</script>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>7ac37089-fb5d-4637-a84a-61afd3ee482d</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>f888a32b-2993-46b3-b104-5404a38eccf3</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>5a4040a0-d818-43ba-b450-24937e5da197</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:environmentSpec>
    <con:entry environmentId="657a20b2-d63b-4bf3-808e-2c92b686c769">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>
