<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="d25d6375-a731-41fa-bdbd-072762db6031" discardOkResults="false" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="Order Receipt NONE for COMP Payment" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" zephyrTestName="" zephyrTestId="" xmlns:con="http://eviware.com/soapui/config">
  <con:description>This testcase validates that PM user can order receipt(NONE)  when status is COMP and user can reorder Sticker multiple times.
Verifies tag in DB Hist &amp; RBS BK12 tables and operational array in all the Historic searches.</con:description>
  <con:settings>
    <con:setting id="d25d6375-a731-41fa-bdbd-072762db6031fileName">Order-Receipt-NONE-for-COMP-Payment</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="properties" name="Properties" id="03cd9e7e-fff5-47f5-9305-8c6772cbfd0f">
    <con:settings/>
    <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:properties>
        <con:property>
          <con:name>SourceApplication</con:name>
          <con:value>EVRYINT</con:value>
        </con:property>
        <con:property>
          <con:name>credentials</con:name>
          <con:value>03110012010400425kglPboRi3h1Z4YUjUpQ0UB65Ta2kPKj1KWwkWemtrL+SoWqMxx/KuqxUVbNyTu6DsSaabKNt2t+xJppso23a37EmmmyjbdrffJeRiGWfHDGwxCWOpDYc2jgSxAz1+8eEsSaabKNt2t/XzlyjxYnxhcG46wcbIKp/sSaabKNt2t9wBUG0SyIoqFfig80Gq4uXVBtimDzTiu2xJppso23a37Emmmyjbdrf8wP73CNrvpw=apG4tU0NraPbbqKUp39erKDFa7xy6z+r4VDMr/6qBlkFniGaNeDXv4cZcZZQQI6JtwB3JYQk6WqLA7oyp1FWRM6n46ehgNmHVNly8fTnQbIuGJSF2LUyGI7aE92/dgtp8jv9bsGpNe58K+xb4LeIHwjb2nVVvt4/2oLtDQ8IPJE=</con:value>
        </con:property>
        <con:property>
          <con:name>channel</con:name>
          <con:value>NBA</con:value>
        </con:property>
        <con:property>
          <con:name>orgid</con:name>
          <con:value>4201</con:value>
        </con:property>
        <con:property>
          <con:name>item1</con:name>
          <con:value>PaymentChannel</con:value>
        </con:property>
        <con:property>
          <con:name>value1</con:name>
          <con:value>INT</con:value>
        </con:property>
        <con:property>
          <con:name>item2</con:name>
          <con:value>LogRef</con:value>
        </con:property>
        <con:property>
          <con:name>value2</con:name>
          <con:value>${= java.time.LocalDateTime.now().plusDays(1).format(java.time.format.DateTimeFormatter.ofPattern('yyyy-MM-dd'))}-${=context.getCurrentStep().getTestCase().getLabel()}</con:value>
        </con:property>
        <con:property>
          <con:name>ReqExnDate</con:name>
          <con:value>${= java.time.LocalDateTime.now().plusDays(1).format(java.time.format.DateTimeFormatter.ofPattern('yyyy-MM-dd'))}</con:value>
        </con:property>
        <con:property>
          <con:name>ConnectionString</con:name>
          <con:value>jdbc:oracle:thin:forfall/forfall@//10.246.89.97:1530/rbst5_taf</con:value>
        </con:property>
        <con:property>
          <con:name>ReceiptOrder</con:name>
          <con:value>NONE</con:value>
        </con:property>
        <con:property>
          <con:name>PaymentStatus</con:name>
          <con:value>COMP</con:value>
        </con:property>
      </con:properties>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="Fetch COMP Data" id="8b6d31cc-c4a7-44e1-ab51-7db3ec88aa20">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWHDATA</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:PWHDATA/pwh@(DESCRIPTION=(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_s1_19c)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select C.TRANSACTIONSID,A.messageid,C.DEBETACCOUNTNO,A.CUSTOMERID,C.PAYMENTTYPE,C.PAYMENTSTATUS,C.RECEIPTORDER,A.MARKETTYPE,C.INITIATORBANKID
from HST_MESSAGE A,HST_PAYMENTINFO B, HST_TRANSACTIONS C where A.MARKETTYPE = 'PM' and
 A.MESSAGEID = B.FK_MESSAGEID and B.PAYMENTINFOID = C.FK_PAYMENTINFOID and C.PAYMENTSTATUS = 'COMP'
and  C.PAYMENTTYPE in ( 'DOKI', 'DOMM')
 and C.INITIATORBANKID = '4201' and C.DEBETACCOUNTNO ='42025449260' order by A.MESSAGEID desc fetch first row only</con:query>
      <con:assertion type="MessageContentAssertion" id="68103f0c-135c-449d-8964-d5e2304e7268" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]</con:xpath>
            <con:element>TRANSACTIONSID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>12063</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/DEBETACCOUNTNO[1]</con:xpath>
            <con:element>DEBETACCOUNTNO</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42022512891</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENTTYPE[1]</con:xpath>
            <con:element>PAYMENTTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>DOMM</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/PAYMENTSTATUS[1]</con:xpath>
            <con:element>PAYMENTSTATUS</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>COMP</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/RECEIPTORDER[1]</con:xpath>
            <con:element>RECEIPTORDER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NONE</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/MARKETTYPE[1]</con:xpath>
            <con:element>MARKETTYPE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>PM</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/INITIATORBANKID[1]</con:xpath>
            <con:element>INITIATORBANKID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>4201</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <TRANSACTIONSID>12063</TRANSACTIONSID>
         <DEBETACCOUNTNO>42022512891</DEBETACCOUNTNO>
         <PAYMENTTYPE>DOMM</PAYMENTTYPE>
         <PAYMENTSTATUS>COMP</PAYMENTSTATUS>
         <RECEIPTORDER>NONE</RECEIPTORDER>
         <MARKETTYPE>PM</MARKETTYPE>
         <INITIATORBANKID>4201</INITIATORBANKID>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="Fetch Account Data" id="dd9cc18e-e622-4249-be71-42b4bb6f248e">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWHDATA</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:PWHDATA/pwh@(DESCRIPTION=(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_s1_19c)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>select AGREEMENTID,ACCOUNTNUMBER,FIRSTNAME,CURRENCYCODE  from V_AUTH_USERINFO where ACCOUNTNUMBER = '${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/DEBETACCOUNTNO[1]}' and channel = 'INT' and AGREEMENTID = '${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/CUSTOMERID[1]}'</con:query>
      <con:assertion type="MessageContentAssertion" id="c01c4ad3-8a0b-48dc-9fbb-1bddaf4bb3e2" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/@fetchSize</con:xpath>
            <con:element>@fetchSize</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>1</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>Test</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[1]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>2</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>Test</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[2]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[3]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>3</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[3]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[3]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[3]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>Test</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[3]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[4]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>4</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[4]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[4]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[4]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>Test</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[4]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[5]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>5</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[5]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[5]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[5]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>Test</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[5]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[6]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>6</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[6]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[6]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[6]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[6]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[7]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>7</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[7]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[7]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[7]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[7]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[8]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>8</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[8]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[8]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[8]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[8]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[9]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>9</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[9]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[9]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[9]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[9]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[10]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>10</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[10]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[10]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[10]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[10]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[11]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>11</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[11]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[11]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[11]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[11]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[12]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>12</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[12]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[12]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[12]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[12]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[13]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>13</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[13]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[13]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[13]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[13]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[14]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>14</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[14]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[14]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[14]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[14]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[15]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[15]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[15]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[15]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[15]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[16]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>16</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[16]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[16]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[16]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[16]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[17]/@rowNumber</con:xpath>
            <con:element>@rowNumber</con:element>
            <con:type/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>17</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[17]/AGREEMENTID[1]</con:xpath>
            <con:element>AGREEMENTID</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>15106410000</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[17]/ACCOUNTNUMBER[1]</con:xpath>
            <con:element>ACCOUNTNUMBER</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>42023281230</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[17]/FIRSTNAME[1]</con:xpath>
            <con:element>FIRSTNAME</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>exists</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue xsi:nil="true"/>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:elements>
            <con:xpath>//Results[1]/ResultSet[1]/Row[17]/CURRENCYCODE[1]</con:xpath>
            <con:element>CURRENCYCODE</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>false</con:enabled>
            <con:expectedValue>NOK</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<Results>
   <ResultSet fetchSize="10">
      <Row rowNumber="1">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME>Test</FIRSTNAME>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="2">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME>Test</FIRSTNAME>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="3">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME>Test</FIRSTNAME>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="4">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME>Test</FIRSTNAME>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="5">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME>Test</FIRSTNAME>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="6">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="7">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="8">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="9">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="10">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="11">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="12">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="13">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="14">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="15">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="16">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
      <Row rowNumber="17">
         <AGREEMENTID>15106410000</AGREEMENTID>
         <ACCOUNTNUMBER>42023281230</ACCOUNTNUMBER>
         <FIRSTNAME/>
         <CURRENCYCODE>NOK</CURRENCYCODE>
      </Row>
   </ResultSet>
</Results>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="ClearDB_Receipt" id="1a2d8001-27e8-4bb8-a92e-4ddd6210ba3f">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>PWHDATA</con:dbConnectionName>
      <con:driver>oracle.jdbc.driver.OracleDriver</con:driver>
      <con:connectionString>jdbc:oracle:thin:PWHDATA/pwh@(DESCRIPTION=(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_s1_19c)))</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>Update HST_TRANSACTIONS set RECEIPTORDER= 'NONE' where 
TRANSACTIONSID = '${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}'</con:query>
      <con:assertion type="JDBC Status" id="25cb87be-0316-4df8-aa57-b91b1d51b4e5" name="JDBC Status"/>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="748a7df2-369f-47fd-846a-e14ab41ab6fe" name="Receipt Order">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentUtil_V1_1PortTypeSoap11</con:interface>
      <con:operation>ReceiptOrderUpdate</con:operation>
      <con:request name="Receipt Order" id="6cd07d24-ee48-4ef1-bcc5-cbee799104c4">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.108:22641/pin/services/PINSPaymentUtil_V1_1Service</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentutil:v1_1" xmlns:urn1="urn:pins.payment.edb.com:domain:paymentutil:v1_1">
    <soapenv:Header>
      <wsc:AutHeader>
      <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
      <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
      <wsc:Function>paymentAuthorizationCreate</wsc:Function>
      <wsc:Version>1.0</wsc:Version>
      <wsc:ClientContext>
         <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
         <wsc:credentials>${Properties#credentials}</wsc:credentials>
         <wsc:channel>${Properties#channel}</wsc:channel>
         <wsc:orgid>${Properties#orgid}</wsc:orgid>
         <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
         <wsc:ip>1.1.1.1</wsc:ip>
         <wsc:item key="${Properties#item1}" value="${Properties#value1}"/> 
         <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
      </wsc:ClientContext>
   </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:ReceiptOrderUpdateRequest>
         <urn:receiptOrder>
            <urn1:debitAccount>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/DEBETACCOUNTNO[1]}</urn1:debitAccount>
            <!--You have a CHOICE of the next 2 items at this level-->
            
            <urn1:transactionId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn1:transactionId><urn1:receiptType>NONE</urn1:receiptType>
         </urn:receiptOrder>
      </urn:ReceiptOrderUpdateRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="1475c7e8-a878-4dfa-adf8-19c2ba43a51d" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="4b7257ff-9a6c-4bd9-a3f9-01ffb7faebb0" name="Not SOAP Fault"/>
        <con:assertion type="Simple Contains" id="ee5a060f-3faf-4d07-878f-6a3553b5ffc0" name="Contains">
          <con:configuration>
            <token>Cannot remove receipt order while transaction status is COMPLETED</token>
            <ignoreCase>false</ignoreCase>
            <useRegEx>false</useRegEx>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.edb.com:ws:paymentutil:v1_1/PINSPaymentUtil_V1_1PortType/ReceiptOrderUpdateRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="42f65684-90fc-4c97-93a9-19102bf81398" name="PaymentHistoricRead_V2_0">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V2_0PortTypeSoap11</con:interface>
      <con:operation>PaymentHistoricRead</con:operation>
      <con:request name="PaymentHistoricRead_V2_0" id="f8ddd876-4764-4817-93ef-a02c896fd78f">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPayment_V2_0</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:pins.payment.evry.com:ws:paymentinitiation:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentHistoricReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         <urn:transactionId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId>
      </urn:PaymentHistoricReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="41c08765-1186-491c-a12b-6bb8e6b7a3c7" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="fbcc8f42-6a19-4b79-b3db-932e43719121" name="Not SOAP Fault"/>
        <con:assertion type="GroovyScriptAssertion" id="db34d93c-f325-4ac0-a260-77f89c03685c" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0')){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp;  (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			assert receiptOrder.toString().toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')					
					}
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')					
					}		
					break
				case [ 'RFDD', 'LAFU']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentinitiation:v2_0/PINSPayment_V2_0PortType/PaymentHistoricReadRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="b9885c9a-58e6-4f8b-80b2-eaba7a66256c" name="PaymentHistoricRead_V1_9">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V1_9PortTypeSoap11</con:interface>
      <con:operation>PaymentHistoricRead</con:operation>
      <con:request name="PaymentHistoricRead_V1_9" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="09f30fdd-4424-4d88-80aa-e2d974a51627">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPayment_V1_9</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentinitiation:v1_9">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentHistoricReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         <urn:transactionId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId>
      </urn:PaymentHistoricReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="761721c8-db8d-4830-ae99-82f20515de56" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="f58861bd-05e6-4c16-93d9-40a930982ded" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="328f0842-b33b-477a-9247-fe3aa1538202" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="9ed34a4e-4613-4bc6-9a0c-1ccf17716fd6" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentinitiation:v1_9/PINSPayment_V1_9PortType/PaymentHistoricReadRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="24578f45-01da-4bc7-83c1-97ce2a98d567" name="PaymentHistoricRead_V1_10">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V1_10PortTypeSoap11</con:interface>
      <con:operation>PaymentHistoricRead</con:operation>
      <con:request name="PaymentHistoricRead_V1_10" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="74ed1263-3041-4362-a361-3dcd520436f2">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPayment_V1_10</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentinitiation:v1_10">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentHistoricReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         <urn:transactionId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId>
      </urn:PaymentHistoricReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="109b0b00-bd1e-48f0-8e4f-0558fd663663" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="e9791c13-c17f-4406-9896-08b8b5066636" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="3c6b42c7-6e9c-40a8-aa9f-5cce6e7d24bf" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="dbfd1724-57d1-4c17-ba2a-aad88d90b083" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentinitiation:v1_10/PINSPayment_V1_10PortType/PaymentHistoricReadRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="57890845-1b6a-461e-bcc5-96ac61ab1ef3" name="PaymentHistoricRead_V1_8">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V1_8PortTypeSoap11</con:interface>
      <con:operation>PaymentHistoricRead</con:operation>
      <con:request name="PaymentHistoricRead_V1_8" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="b21a82e0-479b-49b0-8cab-f792e85b03e3">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPayment_V1_8</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentinitiation:v1_8">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentHistoricReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         <urn:transactionId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId>
      </urn:PaymentHistoricReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="0757e870-463f-4e95-bc8f-8712c633f5c3" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="71ce8020-4776-470f-89d0-e055db47ff5a" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="e3b7ae83-c176-4a60-b51d-d8aa0066793c" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="0d4d0271-470c-4cde-a0ab-82318cd74c09" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentinitiation:v1_8/PINSPayment_V1_8PortType/PaymentHistoricReadRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="3a6fda68-0848-449e-a258-1c6f04e2767e" name="PaymentHistoricRead_V1_7">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V1_7PortTypeSoap11</con:interface>
      <con:operation>PaymentHistoricRead</con:operation>
      <con:request name="PaymentHistoricRead_V1_7" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="00b41a81-390c-4e59-8025-f68baa94fdac">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPayment_V1_7</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentinitiation:v1_7">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentHistoricReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         <urn:transactionId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId>
      </urn:PaymentHistoricReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="5078d221-f076-4486-89ce-2a5728f979f4" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="61a6cf19-1f9c-433d-8ef8-c2050785ef13" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="69e9335b-7eea-40dc-824e-070b29f43407" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="70477118-81fc-4211-9396-0a15ce8b4fe8" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.edb.com:ws:paymentinitiation:v1_7/PINSPayment_V1_7PortType/PaymentHistoricReadRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="6abb0f29-d65c-4157-8a9c-4a0789facf18" name="PaymentHistoricRead_V1_6" disabled="true">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPayment_V1_6PortTypeSoap11</con:interface>
      <con:operation>PaymentHistoricRead</con:operation>
      <con:request name="PaymentHistoricRead_V1_6" id="f40c07e5-cf4c-4ca5-b1c2-985c13b44c9e">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app04.man.cosng.net:22641/pin/services/PINSPayment_V1_6</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentinitiation:v1_6">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentHistoricReadRequest>
         <!--You have a CHOICE of the next 2 items at this level-->
         <urn:transactionId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/TRANSACTIONSID[1]}</urn:transactionId>
      </urn:PaymentHistoricReadRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="2ec8870b-2ce6-4fca-b9ac-d3148f33e96a" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="47d435c7-5585-4d10-9855-55181b80c4d8" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="05b824ce-fca4-4f75-9b35-9f4a19f6ad31" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="0828c843-2885-4cab-9e37-8884fa09c2de" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.edb.com:ws:paymentinitiation:v1_6/PINSPayment_V1_6PortType/PaymentHistoricReadRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="26b7dd48-5aa0-4f7a-9758-a19e7b3554b2" name="PaymentPaymentInfoHistoricSearch_V2_0">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V2_0PortTypeSoap11</con:interface>
      <con:operation>PaymentPaymentInfoHistoricSearch</con:operation>
      <con:request name="PaymentPaymentInfoHistoricSearch_V2_0" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="dc311a69-33f3-48d3-a6fd-274044e391fb">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:22561/pin/services/PINSPaymentSearch_V2_0</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v2_0" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v2_0" xmlns:urn2="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:urn3="urn:pins.payment.evry.com:domain:complex-types:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentPaymentInfoHistoricSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <urn2:StartIndex>0</urn2:StartIndex>
                  <urn2:MaximumNumberOfElements>10</urn2:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 4 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn3:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn3:amountMaxMin>
                  <!--Optional:-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:messageId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <urn1:processedDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:processedDate>
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentPaymentInfoHistoricSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="c07df938-9862-490b-8dda-da32b17a6d30" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="7d28128a-3464-4cd5-a4aa-1871a717c820" name="Not SOAP Fault"/>
        <con:assertion type="GroovyScriptAssertion" id="d2a6c3f8-fb7c-4e1b-948c-6784e2892e66" name="Script Assertion 2">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')					
					}
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v2_0/PINSPaymentSearch_V2_0PortType/PaymentPaymentInfoHistoricSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="2dfd145c-94c6-421a-adaf-b1acacef70a4" name="PaymentPaymentInfoHistoricSearch_V1_9">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_9PortTypeSoap11</con:interface>
      <con:operation>PaymentPaymentInfoHistoricSearch</con:operation>
      <con:request name="PaymentPaymentInfoHistoricSearch_V1_9" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="56ed8147-d02d-45f0-887c-012288c1c6fa">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_9</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_9" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_9" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v8">
   <soapenv:Header>
     <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentPaymentInfoHistoricSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <urn1:messageId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId></urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentPaymentInfoHistoricSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="e748e82f-86d0-416b-b3dd-2d60e63e06c0" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="65d11047-8dae-4a93-873b-968d793facac" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="61f0fb95-8638-4389-bafb-9e362d2144fb" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="67f94ae1-c07a-454a-a7ce-320788849415" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v1_9/PINSPaymentSearch_V1_9PortType/PaymentPaymentInfoHistoricSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="503ec569-7e1f-4113-b5e3-754096ec7b88" name="PaymentPaymentInfoHistoricSearch_V1_8">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_8PortTypeSoap11</con:interface>
      <con:operation>PaymentPaymentInfoHistoricSearch</con:operation>
      <con:request name="PaymentPaymentInfoHistoricSearch_V1_8" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5a04b19a-0435-4ff7-8d71-1dc57d119aff">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:23621/pin/services/PINSPaymentSearch_V1_8</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_8" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_8" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v7">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentPaymentInfoHistoricSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:amountMaxMin>
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:messageId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <urn1:processedDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
               </urn1:processedDate>
               <!--Zero or more repetitions:-->
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentPaymentInfoHistoricSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="c56eb3b4-052e-4b0f-8ecb-cb6c55f85144" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="25187344-9926-4d31-97c7-4f65fc783469" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="8fd9bbca-2544-4c1c-bbbc-caeaed184ca1" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="8119d0cf-b6a5-4304-ab8f-0af73b7843c6" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v1_8/PINSPaymentSearch_V1_8PortType/PaymentPaymentInfoHistoricSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="c5132746-32eb-43ed-a9a2-0d64fb02419a" name="PaymentPaymentInfoHistoricSearch_V1_7">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_7PortTypeSoap11</con:interface>
      <con:operation>PaymentPaymentInfoHistoricSearch</con:operation>
      <con:request name="PaymentPaymentInfoHistoricSearch_V1_7" id="9a43c0b9-0c30-41e4-b263-bcfab30c6c3f">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app04.man.cosng.net:22641/pin/services/PINSPaymentSearch_V1_7Service</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_7" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_7" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.evry.com:domain:sepa-complex-types:v6">
   <soapenv:Header>
     <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentPaymentInfoHistoricSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     
                     <!--Optional:-->
                     
                  </urn2:amountMaxMin>
                  <!--Optional:-->
                  
               </urn1:amount>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:messageId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId><urn1:processedDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
                  <urn2:dateFromTo>
                     <!--Optional:-->
                     
                     <!--Optional:-->
                     
                  </urn2:dateFromTo>
               </urn1:processedDate>
               <!--Zero or more repetitions:-->
               
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentPaymentInfoHistoricSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="5019b196-77b4-4732-9db3-341d4fb70247" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="7c9d70c8-2170-46a4-9722-513117414eee" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="4992a37c-1a5f-4029-8de7-e5871cd8f608" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="b4f596a9-e517-425e-90db-0bd5a31f356a" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v1_7/PINSPaymentSearch_V1_7PortType/PaymentPaymentInfoHistoricSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="4dcaecfa-a64f-4507-b087-9bccce9a7491" name="PaymentPaymentInfoHistoricSearch_V1_6">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_6PortTypeSoap11</con:interface>
      <con:operation>PaymentPaymentInfoHistoricSearch</con:operation>
      <con:request name="PaymentPaymentInfoHistoricSearch_V1_6" id="4a4ce48b-3934-4c7f-bbd3-9b569f5979e2">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.108:22641/pin/services/PINSPaymentSearch_V1_6Service</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentsearch:v1_6" xmlns:urn1="urn:pins.payment.edb.com:domain:search:v1_6" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.edb.com:domain:sepa-complex-types:v5">\r
   <soapenv:Header>\r
      <wsc:AutHeader>\r
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>\r
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>\r
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>\r
         <wsc:Version>1.0</wsc:Version>\r
         <wsc:ClientContext>\r
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>\r
            <wsc:credentials>${Properties#credentials}</wsc:credentials>\r
            <wsc:channel>${Properties#channel}</wsc:channel>\r
            <wsc:orgid>${Properties#orgid}</wsc:orgid>\r
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>\r
            <wsc:ip>1.1.1.1</wsc:ip>\r
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>\r
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>\r
         </wsc:ClientContext>\r
      </wsc:AutHeader>\r
   </soapenv:Header>\r
   <soapenv:Body>\r
      <urn:PaymentPaymentInfoHistoricSearchRequest>\r
         <urn:searchCriteria>\r
            <urn1:commonCriteria>\r
               <urn1:elementControl>\r
                  <con:StartIndex>0</con:StartIndex>\r
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>\r
               </urn1:elementControl>\r
               <!--Zero or more repetitions:-->\r
               <!--Optional:-->\r
               <!--Optional:-->\r
            </urn1:commonCriteria>\r
            <urn1:transactionCriteria>\r
               <!--Optional:-->\r
               <urn1:amount>\r
                  <!--You have a CHOICE of the next 2 items at this level-->\r
                  <!--Optional:-->\r
                  <!--Optional:-->\r
                  <urn2:amountMaxMin>\r
                     <!--Optional:-->\r
                     <!--Optional:-->\r
                  </urn2:amountMaxMin>\r
                  <!--Optional:-->\r
               </urn1:amount>\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <urn1:showHidden>false</urn1:showHidden>\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <!--Optional:-->\r
               <urn1:messageId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>\r
               <urn1:processedDate>\r
                  <!--You have a CHOICE of the next 2 items at this level-->\r
                  <!--Optional:-->\r
                  <!--Optional:-->\r
                  <urn2:dateFromTo>\r
                     <!--Optional:-->\r
                     <!--Optional:-->\r
                  </urn2:dateFromTo>\r
               </urn1:processedDate>\r
               <!--Zero or more repetitions:-->\r
            </urn1:transactionCriteria>\r
         </urn:searchCriteria>\r
      </urn:PaymentPaymentInfoHistoricSearchRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="df7c0d75-7c96-42f0-badf-10c711f179fe" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="4615039b-ccf1-4bbd-82e6-bb8b282511fb" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="d39d1e03-287b-4faf-93e9-205fb4738524" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="4de80246-ed1d-4836-a21f-8af8b0794539" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.edb.com:ws:paymentsearch:v1_6/PINSPaymentSearch_V1_6PortType/PaymentPaymentInfoHistoricSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="8f1b1045-fab6-421c-9716-b7883e8d7242" name="PaymentTransactionHistoricSearch_V2_0">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V2_0PortTypeSoap11</con:interface>
      <con:operation>PaymentTransactionHistoricSearch</con:operation>
      <con:request name="PaymentTransactionHistoricSearch_V2_0" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="748da3a5-596a-4bef-8719-befa2c312e55">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.107:22561/pin/services/PINSPaymentSearch_V2_0</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v2_0" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v2_0" xmlns:urn2="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:urn3="urn:pins.payment.evry.com:domain:complex-types:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentTransactionHistoricSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <urn2:StartIndex>0</urn2:StartIndex>
                  <urn2:MaximumNumberOfElements>10</urn2:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 4 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn3:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn3:amountMaxMin>
                  <!--Optional:-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:messageId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId><urn1:processedDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:processedDate>
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentTransactionHistoricSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="240eadb6-336b-4f2b-a9f0-016f0bf6745f" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="ab72eedf-6474-4481-963b-cf49c70992e7" name="Not SOAP Fault"/>
        <con:assertion type="GroovyScriptAssertion" id="09a19c85-7885-4ce6-9f59-5925508c3ea7" name="Validate_OperationArray">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0')){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp;  (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
 			assert receiptOrder.toString().toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')					
					}
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')					
					}		
					break
				case [ 'RFDD', 'LAFU']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="29779f10-b6ec-4070-b09b-eb3146993af7" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')					
					}
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:pins.payment.evry.com:ws:paymentsearch:v2_0/PINSPaymentSearch_V2_0PortType/PaymentTransactionHistoricSearchRequest"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="d190dfc9-61ea-4c8b-9b9e-64a1dd2d3951" name="PaymentTransactionHistoricSearch_V1_9">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_9PortTypeSoap11</con:interface>
      <con:operation>PaymentTransactionHistoricSearch</con:operation>
      <con:request name="PaymentTransactionHistoricSearch_V1_9" id="dd18dec3-2839-4ed5-960b-911d2adbf013">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app04.man.cosng.net:22641/pin/services/PINSPaymentSearch_V1_9</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_9" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_9" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v8">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentTransactionHistoricSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 4 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:amountMaxMin>
                  <!--Optional:-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:messageId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId>
               <urn1:processedDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <urn2:dateFromTo>
                     <!--Optional:-->
                     <!--Optional:-->
                  </urn2:dateFromTo>
               </urn1:processedDate>
               <!--Zero or more repetitions:-->
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentTransactionHistoricSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="adb17361-150e-4d73-af51-9fef4a289795" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="c54080df-a756-4948-8bcb-0ee3041996f7" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="88324d1a-69b9-4431-b9b8-257dec398927" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="427926ac-291c-42db-a219-15c45c0105f7" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v1_9/PINSPaymentSearch_V1_9PortType/PaymentTransactionHistoricSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="7971eb73-0ea3-4080-a9f0-8ec167a2efce" name="PaymentTransactionHistoricSearch_V1_8">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_8PortTypeSoap11</con:interface>
      <con:operation>PaymentTransactionHistoricSearch</con:operation>
      <con:request name="PaymentTransactionHistoricSearch_V1_8" id="32dbbe85-6d38-4fee-b827-d5caf382432f">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app04.man.cosng.net:22641/pin/services/PINSPaymentSearch_V1_8</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_8" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_8" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pins.payment.evry.com:domain:sepa-complex-types:v7">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentTransactionHistoricSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               <!--Optional:-->
               <!--Optional:-->
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <!--Optional:-->
                  <!--Optional:-->
               </urn1:amount>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <urn1:messageId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId><urn1:processedDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->

                  <!--Optional:-->
               </urn1:processedDate>
               <!--Zero or more repetitions:-->
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentTransactionHistoricSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="d99619a2-23d4-4ba1-9017-aa3658b5a14a" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="9767dd3f-6fc7-4ec9-8622-e0570dd80b6f" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="3200464d-3587-4f28-bf64-22450bf5e871" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="2a00f6d7-133d-49e0-b030-0cf8b85ba9ad" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v1_8/PINSPaymentSearch_V1_8PortType/PaymentTransactionHistoricSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="5d6c5cba-da1a-4633-9135-d36d9a7821e1" name="PaymentTransactionHistoricSearch_V1_7">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_7PortTypeSoap11</con:interface>
      <con:operation>PaymentTransactionHistoricSearch</con:operation>
      <con:request name="PaymentTransactionHistoricSearch_V1_7" id="c636ab2a-2f0d-43a9-9e4b-a1050b4edd00">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://ald-eos-g-app04.man.cosng.net:22641/pin/services/PINSPaymentSearch_V1_7Service</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.evry.com:ws:paymentsearch:v1_7" xmlns:urn1="urn:pins.payment.evry.com:domain:search:v1_7" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.evry.com:domain:sepa-complex-types:v6">
   <soapenv:Header>
     <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentTransactionHistoricSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     
                     <!--Optional:-->
                     
                  </urn2:amountMaxMin>
                  <!--Optional:-->
                  
               </urn1:amount>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:messageId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId><urn1:processedDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
                  <urn2:dateFromTo>
                     <!--Optional:-->
                     
                     <!--Optional:-->
                     
                  </urn2:dateFromTo>
               </urn1:processedDate>
               <!--Zero or more repetitions:-->
               
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentTransactionHistoricSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="84be7dc9-fceb-428d-8621-b9efb6cc25ae" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="05a8b2b3-066f-4265-afe9-d115206e9f77" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="db645186-f4c2-4c31-a581-428ab607ea7f" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="bc6ee168-1458-4f82-a5a9-b02867933ce4" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.evry.com:ws:paymentsearch:v1_7/PINSPaymentSearch_V1_7PortType/PaymentTransactionHistoricSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="69de3302-33da-40c9-8715-f0b1c7a2d436" name="PaymentTransactionHistoricSearch_V1_6">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSPaymentSearch_V1_6PortTypeSoap11</con:interface>
      <con:operation>PaymentTransactionHistoricSearch</con:operation>
      <con:request name="PaymentTransactionHistoricSearch_V1_6" id="a916be53-dc69-4283-a21a-51e7724f494b">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.108:22641/pin/services/PINSPaymentSearch_V1_6Service</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v21" xmlns:urn="urn:pins.payment.edb.com:ws:paymentsearch:v1_6" xmlns:urn1="urn:pins.payment.edb.com:domain:search:v1_6" xmlns:con="http://control.ws.payment.edb.com" xmlns:urn2="urn:pays.payment.edb.com:domain:sepa-complex-types:v5">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PINS</wsc:DestinationApplication>
         <wsc:Function>paymentAuthorizationCreate</wsc:Function>
         <wsc:Version>1.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>${Properties#channel}</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:customerid>${Fetch Account Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/AGREEMENTID[1]}</wsc:customerid>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item key="${Properties#item1}" value="${Properties#value1}"/>
            <wsc:item key="${Properties#item2}" value="${Properties#value2}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:PaymentTransactionHistoricSearchRequest>
         <urn:searchCriteria>
            <urn1:commonCriteria>
               <urn1:elementControl>
                  <con:StartIndex>0</con:StartIndex>
                  <con:MaximumNumberOfElements>10</con:MaximumNumberOfElements>
               </urn1:elementControl>
               <!--Zero or more repetitions:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
            </urn1:commonCriteria>
            <urn1:transactionCriteria>
               <!--Optional:-->
               <urn1:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
                  <urn2:amountMaxMin>
                     <!--Optional:-->
                     
                     <!--Optional:-->
                     
                  </urn2:amountMaxMin>
                  <!--Optional:-->
                  
               </urn1:amount>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:showHidden>false</urn1:showHidden>
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:bankEmployeeInitiated>false</urn1:bankEmployeeInitiated>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:filterByOrgUnit>false</urn1:filterByOrgUnit>
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               
               <!--Optional:-->
               <urn1:messageId>${Fetch COMP Data#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MESSAGEID[1]}</urn1:messageId><urn1:processedDate>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  
                  <!--Optional:-->
                  <urn2:dateFromTo>
                     <!--Optional:-->
                     
                     <!--Optional:-->
                     
                  </urn2:dateFromTo>
               </urn1:processedDate>
               <!--Zero or more repetitions:-->
               
            </urn1:transactionCriteria>
         </urn:searchCriteria>
      </urn:PaymentTransactionHistoricSearchRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="Valid HTTP Status Codes" id="9674adca-0a4b-41df-8248-22d42d4db06c" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="d1d94ac6-bb11-48ae-87c1-28e534cf0164" name="Not SOAP Fault"/>
        <con:assertion type="Schema Compliance" id="2638750d-34e7-48fb-83eb-d03f37330842" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="5c7d151b-e4ae-403f-8b61-0b1dacc3e2e5" name="Script Assertion">
          <con:configuration>
            <scriptText>def testStepName
def xmlHold
//def testStepName
//def xmlHold
def receiptOrder
def slurperResponse
def receiptOrderRes
def paymentStatus
def OpeArrayRes
def ReadOrSearchFlag
def PaymentHistoricReadFlag = false
def PaymentReadFlag = false

def PaymentMessageSearchFlag = false
def PaymentAccountSearchFlag = false
def PaymentPaymentInfoSearchFlag = false
def PaymentTransactionSearchFlag = false
def PaymentTransactionHistoricSearchFlag = false
def PaymentPaymentInfoHistoricSearchFlag = false



	 receiptOrder = context.expand( '${Properties#ReceiptOrder}' )
      paymentStatus = context.expand( '${Properties#PaymentStatus}' )
      
	testStepName = messageExchange.modelItem.testStep.name   //to get the Test Step Name
	xmlHold = messageExchange.responseContentAsXml.toString()  //to store the response as Xml string
	
	slurperResponse = new XmlSlurper().parseText(xmlHold)
	
	if (xmlHold.contains("PaymentHistoricReadResponse")){
	 	log.info "PaymentHistoricReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentHistoricReadFlag = true
	 }

    if (xmlHold.contains("PaymentReadResponse")){
	 	log.info "PaymentReadResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentReadResponse.paymentResult.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentReadResponse.paymentResult.operationsArray
	 	ReadOrSearchFlag = 'READ'
	 	PaymentReadFlag = true
	 }

	 if (xmlHold.contains("PaymentMessageSearchResponse")){
	 	log.info "PaymentMessageSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentMessageSearchResponse.result.transactionResult.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentMessageSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentAccountSearchResponse")){
	 	log.info "PaymentAccountSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentAccountSearchResponse.result.result.transaction.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentAccountSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentAccountSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentPaymentInfoSearchResponse")){
	 	log.info "PaymentPaymentInfoSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	 	PaymentPaymentInfoSearchFlag = true
	 }

	  if (xmlHold.contains("PaymentTransactionSearchResponse")){
	 	log.info "PaymentTransactionSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionSearchFlag = true
	 }
	  if (xmlHold.contains("PaymentTransactionHistoricSearchResponse")){
	 	log.info "PaymentTransactionHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentTransactionHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentTransactionHistoricSearchFlag = true
	 }
  if (xmlHold.contains("PaymentPaymentInfoHistoricSearchResponse")){
	 	log.info "PaymentPaymentInfoHistoricSearchResponse-->"
	 	receiptOrderRes =  slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.nationalSpecificPaymentInformation.receiptOrder.toString()
	 	OpeArrayRes = slurperResponse.Body.PaymentPaymentInfoHistoricSearchResponse.result.result.operationsArray
	 	ReadOrSearchFlag = 'SEARCH'
	    PaymentPaymentInfoHistoricSearchFlag = true
	 }

	 
def versionCheck = testStepName.substring(( testStepName.split('_')[0]).length() +1) 	 	
log.info "versionCheck-->" +  versionCheck


 switch(versionCheck){
 	case ['V2_0' , 'V1_6', 'V1_7' , 'V1_8' , 'V1_9','V1_10']:
 		if (ReadOrSearchFlag.equalsIgnoreCase('READ') ){
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()
 		}else if (ReadOrSearchFlag.equalsIgnoreCase('SEARCH') &amp;&amp; versionCheck.equalsIgnoreCase('V2_0') &amp;&amp;   (PaymentMessageSearchFlag || PaymentTransactionSearchFlag ||
 			PaymentPaymentInfoHistoricSearchFlag || PaymentTransactionHistoricSearchFlag) ){
 			 
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
			assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  
 		}
 		else{
			log.info "Receipt Order tag not required"
 			log.info "receiptOrderRes--" + receiptOrderRes + "\\n" + "ReadOrSearchFlag -" + ReadOrSearchFlag + "******" + versionCheck
 			assert receiptOrderRes.toUpperCase()  == ""
 		}
	break;
//	case ['V1_5']:
//	
// 	break;

 	default :
 	assert false , "Version not available for ReadOrSearchFlag check"
 }
//log.info "receiptOrderRes--" + receiptOrderRes
//assert receiptOrder.toString().toUpperCase()  == receiptOrderRes.toUpperCase()  


def  operationalArrayList = [ ]

//def x = slurperResponse.Body.PaymentHistoricReadResponse.paymentResult.operationsArray.'**'.findAll {	
OpeArrayRes.'**'.findAll {	
	operationalArrayList.add(it.text()	)	
}

log.info "operationalArrayList-->" + operationalArrayList
def tempList = [ ]
switch(versionCheck){ //Verify Operational Array
	case 'V2_0':			
				log.info "versionCheck -->" + versionCheck + "paymentStatus-->" + paymentStatus
				switch (paymentStatus){
				case 'COMP':
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_STICKER')					
					}		
					break
				case [ 'RFDD', 'LAFU','STOP']:
					if (receiptOrder == 'NONE' )  {
						tempList.add ('RECEIPT_ORDER_STICKER')
						tempList.add ('RECEIPT_ORDER_PRINT')
					}
					else if ( receiptOrder == 'STICKER'){
						tempList.add ('RECEIPT_ORDER_PRINT')		
						tempList.add ('RECEIPT_ORDER_REMOVE')						
					}		
					else if ( receiptOrder == 'PRINT'){
						tempList.add ('RECEIPT_ORDER_STICKER')		
						tempList.add ('RECEIPT_ORDER_REMOVE')			
					}
					break
				default:
				assert false,'No case found for operationalArrayList'
//					log.info "No case found"	
				}
	
	break;
	default:
	tempList.add ('REORDER_STICKER')
	
	}

log.info "operationalArray found in response-->" + operationalArrayList
log.info "operationalArray expected-->" + tempList
assert operationalArrayList.containsAll(tempList)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig action="urn:pins.payment.edb.com:ws:paymentsearch:v1_6/PINSPaymentSearch_V1_6PortType/PaymentTransactionHistoricSearchRequest" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="bfc46098-7126-4e7a-9bb8-a84a8c09bdf4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8de4f088-ed70-4c0c-8902-4d113b89b9c9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="606de439-9af0-4a56-8685-3b41eae80c54">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="7e7d541d-7700-4e30-b618-2383a86673d0">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a9fe1c68-a44a-47a3-92a0-597ac3558eed">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="62d35584-b9e8-4224-9147-332b8581935f">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="89ad1e7e-0554-4e47-a121-4b99b2e5bb7a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>ConnectionString</con:name>
      <con:value>jdbc:oracle:thin:pendata/pen@//10.246.89.97:1530/pen_g_functional</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>8167094a-00a6-434a-9588-31a9de204fb8</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>921ce22c-5c29-4284-a083-a1a1a0117555</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>a70f8027-178c-4de6-8bc5-74ac99217e62</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>258ba11c-c48e-4bfc-a96a-d5f6470381a6</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>aaa0220f-b6d3-48f0-a5a7-a2b12983d00a</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>1c7ee62f-4466-469a-84ec-e66f85b086d2</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>35f8d9ed-12a3-4131-a1a3-47b30c8a0708</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>52921ec2-4da3-4a88-a87e-bdcb9e775726</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>42d775b8-c8f2-4bac-8646-ad15bb253f8e</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>08f617c7-e529-4c47-9316-68b8a02e3a43</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>1b2f72c5-5fc2-440a-ae62-c56eddb5b9ed</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>0e09f67d-e171-4e98-8285-08b7c36fd12b</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>6e649eb7-eba4-4618-9f73-5921c14b7750</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>58f20662-295b-4b14-a99d-c5306dafe17f</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>748a7df2-369f-47fd-846a-e14ab41ab6fe</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
</con:testCase>