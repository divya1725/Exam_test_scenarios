<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="8bbf8290-f84e-48b7-a821-84b17ff8d10d" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="OK Response-KYC Validation" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config"><con:description>create PM SO for crossBorder to  validate KYC with success response</con:description><con:settings><con:setting id="8bbf8290-f84e-48b7-a821-84b17ff8d10dfileName">OK-Response-KYC-Validation</con:setting></con:settings><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="jdbc" name="RBS_Fetch Customer" id="7e6636fc-79af-4a61-852c-66f50c50b950"><con:settings><con:setting id="prettyPrintResponse">true</con:setting></con:settings><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName>RBS_t5</con:dbConnectionName><con:driver>oracle.jdbc.driver.OracleDriver</con:driver><con:connectionString>jdbc:oracle:thin:pay/pay@dlt-exa853-scan.unix.cosng.net:1530/rbs_g_s1</con:connectionString><con:password/><con:connectionProperties/><con:query>select * from RISK.RISK_CUSTOMER_COUNTRY where length(CUSTOMERID)='11' and COUNTRY_CODE='NO' and ROWNUM=1</con:query><con:assertion type="JDBC Status" id="8880863f-a137-4467-85f4-ed19441b9b42" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Fetch Account" id="943b0583-b434-41f1-a5a6-7ab426569823"><con:settings><con:setting id="prettyPrintResponse">true</con:setting></con:settings><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName>PWH</con:dbConnectionName><con:driver>oracle.jdbc.driver.OracleDriver</con:driver><con:connectionString>jdbc:oracle:thin:PWHDATA/pwh@(DESCRIPTION=(ADDRESS_LIST=(LOAD_BALANCE=ON)(FAILOVER=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=dlt-exa853-scan.unix.cosng.net)(PORT=1530)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=pwh_g_s1_19c)))</con:connectionString><con:password/><con:connectionProperties/><con:query>select A.CUSTOMERID,A.ACCOUNTNUMBER,A.CUSTOMERTYPE,A.CUSTBANKID,A.CURRENCY
from V_AUTHORISATION A where A.ROLETYPE = 'EIER'and CUSTOMERTYPE='P' and CUSTOMERID = ${RBS_Fetch Customer#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/CUSTOMERID[1]} and
A.ACCOUNTNUMBER IN (SELECT ACCOUNTNUMBER FROM V_AUTHORISATION where ROLETYPE = 'DISP' and  CUSTOMERID = ${RBS_Fetch Customer#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/CUSTOMERID[1]} )
fetch first 1 rows only</con:query><con:assertion type="JDBC Status" id="266efb75-b6f0-4041-abb8-b71379cf3d0a" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="Set Properties" id="57724eaa-2086-4731-978d-63f9b61fc339"><con:settings/><con:config><script>def customerid = context.expand( '${RBS_Fetch Customer#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/CUSTOMERID[1]}' )
def debitAccount = context.expand( '${Fetch Account#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/ACCOUNTNUMBER[1]}' )
def debitAcntccy = context.expand( '${Fetch Account#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/CURRENCY[1]}' )
def Amount = context.expand( '${RBS_Fetch Customer#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MAX_AMOUNT_TRX[1]}' )



customerid= customerid.toString().replaceAll("[^a-zA-Z0-9]+","")
debitAccount= debitAccount.toString().replaceAll("[^a-zA-Z0-9]+","")
debitAcntccy= debitAcntccy.toString().replaceAll("[^a-zA-Z0-9]+","")

Double instrAmount1 = Double.parseDouble(Amount)
instrAmount1= instrAmount1-1
instrAmount2 = instrAmount1
int instrAmount = (int) Math.round(instrAmount2);

testRunner.testCase.getTestStepByName("Properties").setPropertyValue("customerid",customerid)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("userid",customerid)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("value2",customerid)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("agreementid",customerid)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("debitAccount",debitAccount)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("debitAcntccy",debitAcntccy)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("instrAmount",instrAmount.toString())
</script></con:config></con:testStep><con:testStep type="properties" name="Properties" id="655c084c-1c69-450a-9142-bdeac9d571ec"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>SourceApplication</con:name><con:value>EVRYINT</con:value></con:property><con:property><con:name>userid</con:name><con:value>12045503435</con:value></con:property><con:property><con:name>value2</con:name><con:value>12045503435</con:value></con:property><con:property><con:name>credentials</con:name><con:value>03110012010400425kglPboRi3h1Z4YUjUpQ0UB65Ta2kPKj1KWwkWemtrL+SoWqMxx/KuqxUVbNyTu6DsSaabKNt2t+xJppso23a37EmmmyjbdrffJeRiGWfHDGwxCWOpDYc2jgSxAz1+8eEsSaabKNt2t/XzlyjxYnxhcG46wcbIKp/sSaabKNt2t9wBUG0SyIoqFfig80Gq4uXVBtimDzTiu2xJppso23a37Emmmyjbdrf8wP73CNrvpw=apG4tU0NraPbbqKUp39erKDFa7xy6z+r4VDMr/6qBlkFniGaNeDXv4cZcZZQQI6JtwB3JYQk6WqLA7oyp1FWRM6n46ehgNmHVNly8fTnQbIuGJSF2LUyGI7aE92/dgtp8jv9bsGpNe58K+xb4LeIHwjb2nVVvt4/2oLtDQ8IPJE=</con:value></con:property><con:property><con:name>orgid</con:name><con:value>4201</con:value></con:property><con:property><con:name>customerid</con:name><con:value>12045503435</con:value></con:property><con:property><con:name>debitAccount</con:name><con:value>96570125432</con:value></con:property><con:property><con:name>debitAcntccy</con:name><con:value>NOK</con:value></con:property><con:property><con:name>debitAgentBic</con:name><con:value>asdfsa</con:value></con:property><con:property><con:name>item1</con:name><con:value>PaymentChannel</con:value></con:property><con:property><con:name>value1</con:name><con:value>INT</con:value></con:property><con:property><con:name>item2</con:name><con:value>agreement111</con:value></con:property><con:property><con:name>item3</con:name><con:value>SelfService</con:value></con:property><con:property><con:name>value3</con:name><con:value>true</con:value></con:property><con:property><con:name>item4</con:name><con:value>LogRef</con:value></con:property><con:property><con:name>value4</con:name><con:value>${=java.util.UUID.randomUUID()}</con:value></con:property><con:property><con:name>ReqExnDate</con:name><con:value>${= java.time.LocalDateTime.now().format(java.time.format.DateTimeFormatter.ofPattern('yyyy-MM-dd'))}</con:value></con:property><con:property><con:name>intCredAgentBic</con:name><con:value>ESSESESSXXX</con:value></con:property><con:property><con:name>intCreditAccount</con:name><con:value>SE4550000000058398257466</con:value></con:property><con:property><con:name>ReqExnDateTmrw</con:name><con:value>${=new Date().format("yyyy-MM-dd")}</con:value></con:property><con:property><con:name>intCredAgentCountry</con:name><con:value>SE</con:value></con:property><con:property><con:name>agreementid</con:name><con:value>12045503435</con:value></con:property><con:property><con:name>instrAmount</con:name><con:value>999</con:value></con:property><con:property><con:name>PFCRequestLog</con:name><con:value>{"Verify":["VERIFY_CUSTOMERLIMITS_COUNTRY"],"CountryCode":"SE","Amount":{"Amount":999,"Currency":"NOK"},"Immediate":"NON_IMMEDIATE","Domestic":"CROSSBORDER","AccountOwner":"12045503435","Market":"PM"}</con:value></con:property><con:property><con:name>PFCResponseLog</con:name><con:value>{"Code":0,"Description":"OK"}</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" id="0f51e06a-4399-4b43-97dd-3e5ac912ed7d" name="Create SO"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PINSStandingOrder_V2_0ServicePortTypeSoap11</con:interface><con:operation>standingOrderCreate</con:operation><con:request name="Create SO" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="cebf7dc4-76d4-4aad-bc33-1f38fd7ee3e4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://${#Project#G_D5}/pin/services/PINSStandingOrder_V2_0Service</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:srv.stord.fs.evry.com:ws:standingorder:v2_0" xmlns:urn1="urn:srv.stord.fs.evry.com:domain:standingorder:v2_0" xmlns:urn2="urn:pins.payment.evry.com:domain:complex-types:v2_0" xmlns:urn3="urn:srv.stord.fs.evry.com:domain:debtor:v2_0" xmlns:urn4="urn:srv.stord.fs.evry.com:domain:creditor:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PIN</wsc:DestinationApplication>
         <wsc:Function>PIN Create</wsc:Function>
         <wsc:Version>V2.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#userid}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>NBA</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:orgunit>${Properties#orgid}</wsc:orgunit>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:locale>en</wsc:locale>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item value="${Properties#value1}" key="${Properties#item1}"/>
            <wsc:item value="${Properties#value4}" key="${Properties#item4}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:standingOrderCreateRequest>
         <urn:standingOrder>
            <!--Optional:-->
            <urn1:recurrence>MONTHLY</urn1:recurrence>
            <urn1:dueDates>
               <urn1:dueDate>${Properties#ReqExnDate}</urn1:dueDate>
            </urn1:dueDates>
            <urn1:bankHolidayAdjustment>BEFORE</urn1:bankHolidayAdjustment>
            <urn1:paymentInfo>
               <urn3:debtorAccount>
                  <urn2:identification>${Properties#debitAccount}</urn2:identification>
                  <urn2:currency>${Properties#debitAcntccy}</urn2:currency>
               </urn3:debtorAccount>
            </urn1:paymentInfo>
            <urn1:transaction>
               <!--Optional:-->
               <urn4:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <urn2:instructedAmount currency="NOK">
                     <urn2:amount>${Properties#instrAmount}</urn2:amount>
                  </urn2:instructedAmount>
               </urn4:amount>
               <urn4:chargeBearer>DEBT</urn4:chargeBearer>
               <urn4:creditorAgent>
                  <!--Optional:-->
                  <urn2:bic>${Properties#intCredAgentBic}</urn2:bic>
                  <urn2:postalAddress>
                     <urn2:postCode>520312314</urn2:postCode>
                     <urn2:townName>Test</urn2:townName>
                     <urn2:countrySubDivision>Oslo</urn2:countrySubDivision>
                     <urn2:country>${Properties#intCredAgentCountry}</urn2:country>
                  </urn2:postalAddress>
               </urn4:creditorAgent>
               <urn4:creditor>
                  <urn2:name>SO Cred</urn2:name>
                  <urn2:postalAddress>
                     <urn2:postCode>45022</urn2:postCode>
                     <urn2:townName>test</urn2:townName>
                     <urn2:countrySubDivision>test</urn2:countrySubDivision>
                     <urn2:country>${Properties#intCredAgentCountry}</urn2:country>
                     <urn2:addressLine>asdfasdfs</urn2:addressLine>
                  </urn2:postalAddress>
               </urn4:creditor>
               <urn4:creditorAccount>
                  <urn2:identification>${Properties#intCreditAccount}</urn2:identification>
                  <!--Optional:-->
               </urn4:creditorAccount>
            </urn1:transaction>
            <urn1:standingOrderType>PERIODIC</urn1:standingOrderType>
            <urn1:chargesRequired>false</urn1:chargesRequired>
         </urn:standingOrder>
      </urn:standingOrderCreateRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="Valid HTTP Status Codes" id="280d28e7-c914-455d-b06f-0c0cf05e3c66" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="MessageContentAssertion" id="0e721155-77be-4fce-aec5-eee81d8e4348" name="Message Content Assertion"><con:configuration xsi:type="con:MessageContentAssertion"><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderCreateResponse[1]/ns2:ResponseState[1]/ns1:ErrorCode[1]</con:xpath><con:element>ErrorCode</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>0</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderCreateResponse[1]/ns2:ResponseState[1]/ns1:Severity[1]</con:xpath><con:element>Severity</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>0</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderCreateResponse[1]/ns2:ResponseState[1]/ns1:ComponentId[1]</con:xpath><con:element>ComponentId</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>111</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderCreateResponse[1]/ns2:ResponseState[1]/ns1:Message[1]</con:xpath><con:element>Message</con:element><con:type>XmlString</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>OK</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderCreateResponse[1]/ns2:ResponseState[1]/ns1:LogSequence[1]</con:xpath><con:element>LogSequence</con:element><con:type>XmlLong</con:type><con:operator>exists</con:operator><con:enabled>false</con:enabled><con:expectedValue xsi:nil="true"/><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns4='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns2='http://edb.com/ws/WSCommon_v22';
declare namespace ns1='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns3='urn:pins.payment.evry.com:domain:common:v2_0';
//ns4:standingOrderCreateResponse[1]/ns3:ResponseState[1]/ns2:LogSequence[1]/@ns1:nil</con:xpath><con:element>@xsi:nil</con:element><con:type/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>true</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderCreateResponse[1]/ns2:standingOrderKey[1]/ns1:agreementId[1]</con:xpath><con:element>ns2:agreementId</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>1789</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderCreateResponse[1]/ns2:standingOrderKey[1]/ns1:agreementVersion[1]</con:xpath><con:element>ns2:agreementVersion</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>1</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderCreateResponse[1]/ns2:futureTransactions[1]/ns1:dueDate[1]</con:xpath><con:element>ns2:dueDate</con:element><con:type>XmlDate</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>2021-02-05+01:00</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderCreateResponse[1]/ns2:futureTransactions[1]/ns1:identifier[1]</con:xpath><con:element>ns2:identifier</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>Payment Identifier not generated</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns6:standingOrderCreateResponse xmlns:ns10="urn:pins.payment.evry.com:domain:nationalinformation-nor:v2_0" xmlns:ns9="urn:pins.payment.evry.com:ws:paymentutil:v2_0" xmlns:ns8="urn:pins.payment.evry.com:domain:paymentutil:v2_0" xmlns:ns7="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:ns6="urn:srv.stord.fs.evry.com:ws:standingorder:v2_0" xmlns:ns5="urn:srv.stord.fs.evry.com:domain:creditor:v2_0" xmlns:ns4="urn:srv.stord.fs.evry.com:domain:debtor:v2_0" xmlns:ns3="urn:pins.payment.evry.com:domain:complex-types:v2_0" xmlns:ns2="urn:srv.stord.fs.evry.com:domain:standingorder:v2_0" xmlns="http://edb.com/ws/WSCommon_v22">
         <ns7:ResponseState>
            <ErrorCode>0</ErrorCode>
            <Severity>0</Severity>
            <ComponentId>111</ComponentId>
            <Message>OK</Message>
            <LogSequence xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns7:ResponseState>
         <ns6:standingOrderKey>
            <ns2:agreementId>1789</ns2:agreementId>
            <ns2:agreementVersion>1</ns2:agreementVersion>
         </ns6:standingOrderKey>
         <ns6:futureTransactions>
            <ns2:dueDate>2021-02-05+01:00</ns2:dueDate>
            <ns2:identifier>Payment Identifier not generated</ns2:identifier>
         </ns6:futureTransactions>
      </ns6:standingOrderCreateResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage></con:configuration></con:assertion><con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:srv.stord.fs.evry.com:ws:standingorder:v2_0/PINSStandingOrder_V2_0ServicePortType/standingOrderCreateRequest"/><con:wsrmConfig version="1.2"/><con:environmentSpec><con:entry environmentId="bea9dfac-4336-4511-919b-c1077cf3341b"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="19c095a6-5221-4f8f-8c89-15dd3a84437f"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="7bb21693-0f5a-4ff2-914b-038016c05b6b"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="1ea86b4c-0692-4dda-b897-6f3c93da8c59"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="c521ccc6-967a-4b88-84c4-aed2f81eb1b6"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="ddf02c5e-10c0-4950-8698-02d6f300ed37"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="5dc74fda-b4b0-47c0-ab22-d941e38392b6"><con:authProfile>No Authorization</con:authProfile></con:entry></con:environmentSpec></con:request></con:config></con:testStep><con:testStep type="request" name="SO_Confirm" id="a94b77d4-4358-47b3-b251-d65d4d504cdd">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSStandingOrder_V2_0ServicePortTypeSoap11</con:interface>
      <con:operation>standingOrderStatusUpdate</con:operation>
      <con:request name="SO_Confirm" id="bf05e061-1891-4888-80ff-ae16c808be39">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.108:29221/pin/services/PINSStandingOrder_V2_0Service</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header>
      <wsc:AutHeader xmlns:wsc="http://edb.com/ws/WSCommon_v22">
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PIN</wsc:DestinationApplication>
         <wsc:Function>PIN Create</wsc:Function>
         <wsc:Version>V2.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#userid}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>NBA</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:orgunit>${Properties#orgid}</wsc:orgunit>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:locale>en</wsc:locale>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item value="${Properties#value1}" key="${Properties#item1}"/>
            <wsc:item value="${Properties#value4}" key="${Properties#item4}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:standingOrderStatusUpdateRequest xmlns:urn="urn:srv.stord.fs.evry.com:ws:standingorder:v2_0">
         <urn:standingOrderKey>
            <urn1:agreementId xmlns:urn1="urn:srv.stord.fs.evry.com:domain:standingorder:v2_0">${Create SO#Response#declare namespace ns6='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0'; declare namespace ns2='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0'; //ns6:standingOrderCreateResponse[1]/ns6:standingOrderKey[1]/ns2:agreementId[1]}</urn1:agreementId>
            <urn1:agreementVersion xmlns:urn1="urn:srv.stord.fs.evry.com:domain:standingorder:v2_0">${Create SO#Response#declare namespace ns6='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0'; declare namespace ns2='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0'; //ns6:standingOrderCreateResponse[1]/ns6:standingOrderKey[1]/ns2:agreementVersion[1]}</urn1:agreementVersion>
         </urn:standingOrderKey>
         <urn:standingOrderAction>CONFIRM</urn:standingOrderAction>
      </urn:standingOrderStatusUpdateRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        
        <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="29a560c6-9de8-4453-93a2-b637149ce5b0">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        
        <con:assertion type="MessageContentAssertion" id="75ed593b-bca7-417a-8904-d53f76d69b31" name="Message Content Assertion"><con:configuration xsi:type="con:MessageContentAssertion"><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderStatusUpdateResponse[1]/ns2:ResponseState[1]/ns1:ErrorCode[1]</con:xpath><con:element>ErrorCode</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>0</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderStatusUpdateResponse[1]/ns2:ResponseState[1]/ns1:Severity[1]</con:xpath><con:element>Severity</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>0</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderStatusUpdateResponse[1]/ns2:ResponseState[1]/ns1:ComponentId[1]</con:xpath><con:element>ComponentId</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>111</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderStatusUpdateResponse[1]/ns2:ResponseState[1]/ns1:Message[1]</con:xpath><con:element>Message</con:element><con:type>XmlString</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>OK</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderStatusUpdateResponse[1]/ns2:ResponseState[1]/ns1:LogSequence[1]</con:xpath><con:element>LogSequence</con:element><con:type>XmlLong</con:type><con:operator>exists</con:operator><con:enabled>false</con:enabled><con:expectedValue xsi:nil="true"/><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns4='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns2='http://edb.com/ws/WSCommon_v22';
declare namespace ns1='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns3='urn:pins.payment.evry.com:domain:common:v2_0';
//ns4:standingOrderStatusUpdateResponse[1]/ns3:ResponseState[1]/ns2:LogSequence[1]/@ns1:nil</con:xpath><con:element>@xsi:nil</con:element><con:type/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>true</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns1='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
//ns1:standingOrderStatusUpdateResponse[1]/ns1:standingOrderStatus[1]</con:xpath><con:element>ns6:standingOrderStatus</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>ACTIVE</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns6:standingOrderStatusUpdateResponse xmlns:ns10="urn:pins.payment.evry.com:domain:nationalinformation-nor:v2_0" xmlns:ns9="urn:pins.payment.evry.com:ws:paymentutil:v2_0" xmlns:ns8="urn:pins.payment.evry.com:domain:paymentutil:v2_0" xmlns:ns7="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:ns6="urn:srv.stord.fs.evry.com:ws:standingorder:v2_0" xmlns:ns5="urn:srv.stord.fs.evry.com:domain:creditor:v2_0" xmlns:ns4="urn:srv.stord.fs.evry.com:domain:debtor:v2_0" xmlns:ns3="urn:pins.payment.evry.com:domain:complex-types:v2_0" xmlns:ns2="urn:srv.stord.fs.evry.com:domain:standingorder:v2_0" xmlns="http://edb.com/ws/WSCommon_v22">
         <ns7:ResponseState>
            <ErrorCode>0</ErrorCode>
            <Severity>0</Severity>
            <ComponentId>111</ComponentId>
            <Message>OK</Message>
            <LogSequence xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns7:ResponseState>
         <ns6:standingOrderStatus>ACTIVE</ns6:standingOrderStatus>
      </ns6:standingOrderStatusUpdateResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage></con:configuration></con:assertion><con:credentials>
          <con:selectedAuthProfile>Inherit From Parent</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="6f14c36d-a5ca-4b42-824d-faf4a974241a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f17c3c7b-97d1-475e-8fd3-edb989665099">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        <con:entry environmentId="bea9dfac-4336-4511-919b-c1077cf3341b"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="19c095a6-5221-4f8f-8c89-15dd3a84437f"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="7bb21693-0f5a-4ff2-914b-038016c05b6b"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="1ea86b4c-0692-4dda-b897-6f3c93da8c59"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="c521ccc6-967a-4b88-84c4-aed2f81eb1b6"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="ddf02c5e-10c0-4950-8698-02d6f300ed37"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="5dc74fda-b4b0-47c0-ab22-d941e38392b6"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep><con:testStep type="request" id="11261f0c-c1ae-494a-b84a-9e4f34560a49" name="SO update"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PINSStandingOrder_V2_0ServicePortTypeSoap11</con:interface><con:operation>standingOrderUpdate</con:operation><con:request name="SO update" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="27730baf-990d-45e6-a0c3-2b814328a142"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://${#Project#G_D5}/pin/services/PINSStandingOrder_V2_0Service</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsc="http://edb.com/ws/WSCommon_v22" xmlns:urn="urn:srv.stord.fs.evry.com:ws:standingorder:v2_0" xmlns:urn1="urn:srv.stord.fs.evry.com:domain:standingorder:v2_0" xmlns:urn2="urn:pins.payment.evry.com:domain:complex-types:v2_0" xmlns:urn3="urn:srv.stord.fs.evry.com:domain:debtor:v2_0" xmlns:urn4="urn:srv.stord.fs.evry.com:domain:creditor:v2_0">
   <soapenv:Header>
      <wsc:AutHeader>
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PIN</wsc:DestinationApplication>
         <wsc:Function>PIN Create</wsc:Function>
         <wsc:Version>V2.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#userid}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>NBA</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:orgunit>${Properties#orgid}</wsc:orgunit>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:locale>en</wsc:locale>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item value="${Properties#value1}" key="${Properties#item1}"/>
            <wsc:item value="${Properties#value4}" key="${Properties#item4}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:standingOrderUpdateRequest>
         <urn:standingOrder>
            <!--Optional:-->
            <urn1:recurrence>WEEKLY</urn1:recurrence>
            <urn1:dueDates>
               <urn1:dueDate>${= java.time.LocalDateTime.now().format(java.time.format.DateTimeFormatter.ofPattern('yyyy-MM-dd'))}</urn1:dueDate>
            </urn1:dueDates>
            <urn1:bankHolidayAdjustment>BEFORE</urn1:bankHolidayAdjustment>
            <urn1:exemptions>
               <urn1:exemption>
                  <urn1:startDate>${= java.time.LocalDateTime.now().plusDays(10).format(java.time.format.DateTimeFormatter.ofPattern('yyyy-MM-dd'))}</urn1:startDate>
                  <urn1:endDate>${= java.time.LocalDateTime.now().plusDays(15).format(java.time.format.DateTimeFormatter.ofPattern('yyyy-MM-dd'))}</urn1:endDate>
                  <urn1:recurring>false</urn1:recurring>
               </urn1:exemption>
            </urn1:exemptions>
            <urn1:paymentInfo>
               <urn3:debtorAccount>
                  <urn2:identification>${Properties#debitAccount}</urn2:identification>
                  <urn2:currency>${Properties#debitAcntccy}</urn2:currency>
               </urn3:debtorAccount>
            </urn1:paymentInfo>
            <urn1:transaction>
               <!--Optional:-->
               <urn4:amount>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <urn2:instructedAmount currency="NOK">
                     <urn2:amount>9</urn2:amount>
                  </urn2:instructedAmount>
               </urn4:amount>
               <urn4:chargeBearer>DEBT</urn4:chargeBearer>
               <urn4:creditorAgent>
                  <!--Optional:-->
                  <urn2:bic>${Properties#intCredAgentBic}</urn2:bic>
                  <urn2:postalAddress>
                     <urn2:postCode>520312312314</urn2:postCode>
                     <urn2:townName>Test</urn2:townName>
                     <urn2:countrySubDivision>Oslo</urn2:countrySubDivision>
                     <urn2:country>${Properties#intCredAgentCountry}</urn2:country>
                  </urn2:postalAddress>
               </urn4:creditorAgent>
               <urn4:creditor>
                  <urn2:name>SO Cred</urn2:name>
                  <urn2:postalAddress>
                     <urn2:postCode>45022</urn2:postCode>
                     <urn2:townName>test</urn2:townName>
                     <urn2:countrySubDivision>test</urn2:countrySubDivision>
                     <urn2:country>${Properties#intCredAgentCountry}</urn2:country>
                     <urn2:addressLine>asdfasdfs</urn2:addressLine>
                  </urn2:postalAddress>
               </urn4:creditor>
               <urn4:creditorAccount>
                  <urn2:identification>${Properties#intCreditAccount}</urn2:identification>
                  <!--Optional:-->
               </urn4:creditorAccount>
            </urn1:transaction>
            <urn1:standingOrderKey>
               <urn1:agreementId>${Create SO#Response#declare namespace ns6='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0'; declare namespace ns2='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0'; //ns6:standingOrderCreateResponse[1]/ns6:standingOrderKey[1]/ns2:agreementId[1]}</urn1:agreementId>
               <!--Optional:-->
               <urn1:agreementVersion>${Create SO#Response#declare namespace ns6='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0'; declare namespace ns2='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0'; //ns6:standingOrderCreateResponse[1]/ns6:standingOrderKey[1]/ns2:agreementVersion[1]}</urn1:agreementVersion>
            </urn1:standingOrderKey>
            <urn1:standingOrderType>PERIODIC</urn1:standingOrderType>
            <!--Optional:-->
            <urn1:chargesRequired>false</urn1:chargesRequired>
         </urn:standingOrder>
      </urn:standingOrderUpdateRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="Valid HTTP Status Codes" id="2fbb28b9-77d1-4b8b-b059-c26628a6a048" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="MessageContentAssertion" id="54e768e7-9955-4f17-a2e0-03ed56edbab0" name="Message Content Assertion"><con:configuration xsi:type="con:MessageContentAssertion"><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderUpdateResponse[1]/ns2:ResponseState[1]/ns1:ErrorCode[1]</con:xpath><con:element>ErrorCode</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>0</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderUpdateResponse[1]/ns2:ResponseState[1]/ns1:Severity[1]</con:xpath><con:element>Severity</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>0</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderUpdateResponse[1]/ns2:ResponseState[1]/ns1:ComponentId[1]</con:xpath><con:element>ComponentId</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>111</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderUpdateResponse[1]/ns2:ResponseState[1]/ns1:Message[1]</con:xpath><con:element>Message</con:element><con:type>XmlString</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>OK</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderUpdateResponse[1]/ns2:ResponseState[1]/ns1:LogSequence[1]</con:xpath><con:element>LogSequence</con:element><con:type>XmlLong</con:type><con:operator>exists</con:operator><con:enabled>false</con:enabled><con:expectedValue xsi:nil="true"/><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns4='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns2='http://edb.com/ws/WSCommon_v22';
declare namespace ns1='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns3='urn:pins.payment.evry.com:domain:common:v2_0';
//ns4:standingOrderUpdateResponse[1]/ns3:ResponseState[1]/ns2:LogSequence[1]/@ns1:nil</con:xpath><con:element>@xsi:nil</con:element><con:type/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>true</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:standingOrderKey[1]/ns1:agreementId[1]</con:xpath><con:element>ns2:agreementId</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>1789</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:standingOrderKey[1]/ns1:agreementVersion[1]</con:xpath><con:element>ns2:agreementVersion</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>2</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:futureTransactions[1]/ns1:dueDate[1]</con:xpath><con:element>ns2:dueDate</con:element><con:type>XmlDate</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>2021-01-12+01:00</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:futureTransactions[1]/ns1:identifier[1]</con:xpath><con:element>ns2:identifier</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>Payment Identifier not generated</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:futureTransactions[2]/ns1:dueDate[1]</con:xpath><con:element>ns2:dueDate</con:element><con:type>XmlDate</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>2021-01-26+01:00</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:futureTransactions[2]/ns1:identifier[1]</con:xpath><con:element>ns2:identifier</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>Payment Identifier not generated</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:futureTransactions[3]/ns1:dueDate[1]</con:xpath><con:element>ns2:dueDate</con:element><con:type>XmlDate</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>2021-02-02+01:00</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:futureTransactions[3]/ns1:identifier[1]</con:xpath><con:element>ns2:identifier</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>Payment Identifier not generated</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:futureTransactions[4]/ns1:dueDate[1]</con:xpath><con:element>ns2:dueDate</con:element><con:type>XmlDate</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>2021-02-09+01:00</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:futureTransactions[4]/ns1:identifier[1]</con:xpath><con:element>ns2:identifier</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>Payment Identifier not generated</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:futureTransactions[5]/ns1:dueDate[1]</con:xpath><con:element>ns2:dueDate</con:element><con:type>XmlDate</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>2021-02-16+01:00</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns2='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0';
//ns2:standingOrderUpdateResponse[1]/ns2:futureTransactions[5]/ns1:identifier[1]</con:xpath><con:element>ns2:identifier</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>Payment Identifier not generated</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns6:standingOrderUpdateResponse xmlns:ns10="urn:pins.payment.evry.com:domain:nationalinformation-nor:v2_0" xmlns:ns9="urn:pins.payment.evry.com:ws:paymentutil:v2_0" xmlns:ns8="urn:pins.payment.evry.com:domain:paymentutil:v2_0" xmlns:ns7="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:ns6="urn:srv.stord.fs.evry.com:ws:standingorder:v2_0" xmlns:ns5="urn:srv.stord.fs.evry.com:domain:creditor:v2_0" xmlns:ns4="urn:srv.stord.fs.evry.com:domain:debtor:v2_0" xmlns:ns3="urn:pins.payment.evry.com:domain:complex-types:v2_0" xmlns:ns2="urn:srv.stord.fs.evry.com:domain:standingorder:v2_0" xmlns="http://edb.com/ws/WSCommon_v22">
         <ns7:ResponseState>
            <ErrorCode>0</ErrorCode>
            <Severity>0</Severity>
            <ComponentId>111</ComponentId>
            <Message>OK</Message>
            <LogSequence xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns7:ResponseState>
         <ns6:standingOrderKey>
            <ns2:agreementId>1789</ns2:agreementId>
            <ns2:agreementVersion>2</ns2:agreementVersion>
         </ns6:standingOrderKey>
         <ns6:futureTransactions>
            <ns2:dueDate>2021-01-12+01:00</ns2:dueDate>
            <ns2:identifier>Payment Identifier not generated</ns2:identifier>
         </ns6:futureTransactions>
         <ns6:futureTransactions>
            <ns2:dueDate>2021-01-26+01:00</ns2:dueDate>
            <ns2:identifier>Payment Identifier not generated</ns2:identifier>
         </ns6:futureTransactions>
         <ns6:futureTransactions>
            <ns2:dueDate>2021-02-02+01:00</ns2:dueDate>
            <ns2:identifier>Payment Identifier not generated</ns2:identifier>
         </ns6:futureTransactions>
         <ns6:futureTransactions>
            <ns2:dueDate>2021-02-09+01:00</ns2:dueDate>
            <ns2:identifier>Payment Identifier not generated</ns2:identifier>
         </ns6:futureTransactions>
         <ns6:futureTransactions>
            <ns2:dueDate>2021-02-16+01:00</ns2:dueDate>
            <ns2:identifier>Payment Identifier not generated</ns2:identifier>
         </ns6:futureTransactions>
      </ns6:standingOrderUpdateResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage></con:configuration></con:assertion><con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:srv.stord.fs.evry.com:ws:standingorder:v2_0/PINSStandingOrder_V2_0ServicePortType/standingOrderUpdateRequest"/><con:wsrmConfig version="1.2"/><con:environmentSpec><con:entry environmentId="bea9dfac-4336-4511-919b-c1077cf3341b"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="19c095a6-5221-4f8f-8c89-15dd3a84437f"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="7bb21693-0f5a-4ff2-914b-038016c05b6b"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="1ea86b4c-0692-4dda-b897-6f3c93da8c59"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="c521ccc6-967a-4b88-84c4-aed2f81eb1b6"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="ddf02c5e-10c0-4950-8698-02d6f300ed37"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="5dc74fda-b4b0-47c0-ab22-d941e38392b6"><con:authProfile>No Authorization</con:authProfile></con:entry></con:environmentSpec></con:request></con:config></con:testStep><con:testStep type="request" name="SO_update-Confirm" id="b88264d1-c4e5-41e6-b24e-aa268cba81f8">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PINSStandingOrder_V2_0ServicePortTypeSoap11</con:interface>
      <con:operation>standingOrderStatusUpdate</con:operation>
      <con:request name="SO_update-Confirm" id="bf05e061-1891-4888-80ff-ae16c808be39">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://10.246.89.108:29221/pin/services/PINSStandingOrder_V2_0Service</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header>
      <wsc:AutHeader xmlns:wsc="http://edb.com/ws/WSCommon_v22">
         <wsc:SourceApplication>${Properties#SourceApplication}</wsc:SourceApplication>
         <wsc:DestinationApplication>PIN</wsc:DestinationApplication>
         <wsc:Function>PIN Create</wsc:Function>
         <wsc:Version>V2.0</wsc:Version>
         <wsc:ClientContext>
            <wsc:userid>${Properties#userid}</wsc:userid>
            <wsc:credentials>${Properties#credentials}</wsc:credentials>
            <wsc:channel>NBA</wsc:channel>
            <wsc:orgid>${Properties#orgid}</wsc:orgid>
            <wsc:orgunit>${Properties#orgid}</wsc:orgunit>
            <wsc:customerid>${Properties#customerid}</wsc:customerid>
            <wsc:locale>en</wsc:locale>
            <wsc:ip>1.1.1.1</wsc:ip>
            <wsc:item value="${Properties#value1}" key="${Properties#item1}"/>
            <wsc:item value="${Properties#value4}" key="${Properties#item4}"/>
         </wsc:ClientContext>
      </wsc:AutHeader>
   </soapenv:Header>
   <soapenv:Body>
      <urn:standingOrderStatusUpdateRequest xmlns:urn="urn:srv.stord.fs.evry.com:ws:standingorder:v2_0">
         <urn:standingOrderKey>
            <urn1:agreementId xmlns:urn1="urn:srv.stord.fs.evry.com:domain:standingorder:v2_0">${SO update#Response#declare namespace ns6='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0'; declare namespace ns2='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0'; //ns6:standingOrderUpdateResponse[1]/ns6:standingOrderKey[1]/ns2:agreementId[1]}</urn1:agreementId>
            <urn1:agreementVersion xmlns:urn1="urn:srv.stord.fs.evry.com:domain:standingorder:v2_0">${SO update#Response#declare namespace ns6='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0'; declare namespace ns2='urn:srv.stord.fs.evry.com:domain:standingorder:v2_0'; //ns6:standingOrderUpdateResponse[1]/ns6:standingOrderKey[1]/ns2:agreementVersion[1]}</urn1:agreementVersion>
         </urn:standingOrderKey>
         <urn:standingOrderAction>CONFIRM</urn:standingOrderAction>
      </urn:standingOrderStatusUpdateRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        
        <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="29a560c6-9de8-4453-93a2-b637149ce5b0">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        
        <con:assertion type="MessageContentAssertion" id="0dac9dca-6f7e-4dcb-ac2f-d410e1d2bf04" name="Message Content Assertion"><con:configuration xsi:type="con:MessageContentAssertion"><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderStatusUpdateResponse[1]/ns2:ResponseState[1]/ns1:ErrorCode[1]</con:xpath><con:element>ErrorCode</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>0</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderStatusUpdateResponse[1]/ns2:ResponseState[1]/ns1:Severity[1]</con:xpath><con:element>Severity</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>0</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderStatusUpdateResponse[1]/ns2:ResponseState[1]/ns1:ComponentId[1]</con:xpath><con:element>ComponentId</con:element><con:type>XmlInt</con:type><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>111</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderStatusUpdateResponse[1]/ns2:ResponseState[1]/ns1:Message[1]</con:xpath><con:element>Message</con:element><con:type>XmlString</con:type><con:operator>=</con:operator><con:enabled>true</con:enabled><con:expectedValue>OK</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns3='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns1='http://edb.com/ws/WSCommon_v22';
declare namespace ns2='urn:pins.payment.evry.com:domain:common:v2_0';
//ns3:standingOrderStatusUpdateResponse[1]/ns2:ResponseState[1]/ns1:LogSequence[1]</con:xpath><con:element>LogSequence</con:element><con:type>XmlLong</con:type><con:operator>exists</con:operator><con:enabled>false</con:enabled><con:expectedValue xsi:nil="true"/><con:hasValue>false</con:hasValue><con:numberType>true</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns4='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
declare namespace ns2='http://edb.com/ws/WSCommon_v22';
declare namespace ns1='http://www.w3.org/2001/XMLSchema-instance';
declare namespace ns3='urn:pins.payment.evry.com:domain:common:v2_0';
//ns4:standingOrderStatusUpdateResponse[1]/ns3:ResponseState[1]/ns2:LogSequence[1]/@ns1:nil</con:xpath><con:element>@xsi:nil</con:element><con:type/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>true</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:elements><con:xpath>declare namespace ns1='urn:srv.stord.fs.evry.com:ws:standingorder:v2_0';
//ns1:standingOrderStatusUpdateResponse[1]/ns1:standingOrderStatus[1]</con:xpath><con:element>ns6:standingOrderStatus</con:element><con:type xsi:nil="true"/><con:operator>=</con:operator><con:enabled>false</con:enabled><con:expectedValue>ACTIVE</con:expectedValue><con:hasValue>false</con:hasValue><con:numberType>false</con:numberType></con:elements><con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns6:standingOrderStatusUpdateResponse xmlns:ns10="urn:pins.payment.evry.com:domain:nationalinformation-nor:v2_0" xmlns:ns9="urn:pins.payment.evry.com:ws:paymentutil:v2_0" xmlns:ns8="urn:pins.payment.evry.com:domain:paymentutil:v2_0" xmlns:ns7="urn:pins.payment.evry.com:domain:common:v2_0" xmlns:ns6="urn:srv.stord.fs.evry.com:ws:standingorder:v2_0" xmlns:ns5="urn:srv.stord.fs.evry.com:domain:creditor:v2_0" xmlns:ns4="urn:srv.stord.fs.evry.com:domain:debtor:v2_0" xmlns:ns3="urn:pins.payment.evry.com:domain:complex-types:v2_0" xmlns:ns2="urn:srv.stord.fs.evry.com:domain:standingorder:v2_0" xmlns="http://edb.com/ws/WSCommon_v22">
         <ns7:ResponseState>
            <ErrorCode>0</ErrorCode>
            <Severity>0</Severity>
            <ComponentId>111</ComponentId>
            <Message>OK</Message>
            <LogSequence xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns7:ResponseState>
         <ns6:standingOrderStatus>ACTIVE</ns6:standingOrderStatus>
      </ns6:standingOrderStatusUpdateResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage></con:configuration></con:assertion><con:credentials>
          <con:selectedAuthProfile>Inherit From Parent</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="6f14c36d-a5ca-4b42-824d-faf4a974241a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f17c3c7b-97d1-475e-8fd3-edb989665099">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        <con:entry environmentId="bea9dfac-4336-4511-919b-c1077cf3341b"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="19c095a6-5221-4f8f-8c89-15dd3a84437f"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="7bb21693-0f5a-4ff2-914b-038016c05b6b"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="1ea86b4c-0692-4dda-b897-6f3c93da8c59"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="c521ccc6-967a-4b88-84c4-aed2f81eb1b6"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="ddf02c5e-10c0-4950-8698-02d6f300ed37"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="5dc74fda-b4b0-47c0-ab22-d941e38392b6"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep><con:testStep type="groovy" name="PFC_JaxrspayloadLog" id="3badc29d-a147-43cd-a66d-957a5bfcd780"><con:settings/><con:config><script>import com.jcraft.jsch.*
import org.apache.commons.io.FileUtils

// Properties
def  eosHost = context.expand( '${#Project#EOSHost}' )
def  Port =  context.expand( '${#Project#Port}' );
def  ftpUsername = context.expand( '${#Project#UserName}' )
def  ftpPassword = context.expand( '${#Project#Password}' )
def env = testRunner.testCase.testSuite.project.getActiveEnvironmentName().toLowerCase()
env=env.substring(2)

def  SourcePath = "/eos/$env/pin/i1/logs/pin"

def logRef = context.expand( '${Create SO#RawRequest#declare namespace wsc=\'http://edb.com/ws/WSCommon_v22\'; //wsc:AutHeader[1]/wsc:ClientContext[1]/wsc:item[2]/@value}' )

if (!(ServerConnect.Connect(eosHost ,ftpUsername, ftpPassword, Integer.parseInt(Port)) == "PASS"))
	assert false,"Failed to conenct to linux server!!"
else
	assert true
	
String commandToExecute = "cd $SourcePath;  grep  -A 6 $logRef  jaxrspayload.log"
def CommandOutput = ServerConnect.execCommand(commandToExecute)

if (!(ServerConnect.closeConnection()))
	assert false," Failed to close linux server!!"
else
 	assert true
 	
def splitOutput = CommandOutput.split('\\n\\n')
def requestTemp = splitOutput[0].split('Payload: ')[1]
def responseTemp =  splitOutput[1].split('Payload: ')[1]


testRunner.testCase.testSteps['Properties'].setPropertyValue('PFCRequestLog',requestTemp)
testRunner.testCase.testSteps['Properties'].setPropertyValue('PFCResponseLog',responseTemp)</script></con:config></con:testStep><con:testStep type="groovy" name="ValidatePFClogs" id="fbc2dc0e-e5fe-498a-be73-fa5247e74d27"><con:settings/><con:config><script>import org.apache.commons.io.FileUtils

// PFC Request Validation
def FeatureName = context.expand( '${Properties#PFCRequestLog#$[\'Verify\'][0]}' )
def CountryCode = context.expand( '${Properties#PFCRequestLog#$[\'CountryCode\']}' )
def TransferCurrency = context.expand( '${Properties#PFCRequestLog#$[\'Amount\'][\'Currency\']}' )
def ImmediateTransfer = context.expand( '${Properties#PFCRequestLog#$[\'Immediate\']}' )
def PaymentType = context.expand( '${Properties#PFCRequestLog#$[\'Domestic\']}' )
def CustId = context.expand( '${Properties#PFCRequestLog#$[\'AccountOwner\']}' )
def MarketType = context.expand( '${Properties#PFCRequestLog#$[\'Market\']}' )

def CredAgentCountry = context.expand( '${Properties#intCredAgentCountry}' )
def customerid = context.expand( '${Properties#customerid}' )


assert FeatureName == "VERIFY_CUSTOMERLIMITS_COUNTRY","feature name not valid"
assert CountryCode == CredAgentCountry,"CountryCode not valid"
assert TransferCurrency == "NOK","TransferCurrency not valid"
assert ImmediateTransfer == "NON_IMMEDIATE","ImmediateTransfer not valid"
assert PaymentType == "CROSSBORDER","PaymentType is not valid"
assert CustId == customerid,"CustId not valid"
assert MarketType == "PM","MarketType is not valid"


// ==========================================

// PFC Response Validation
def ResponseCode = context.expand( '${Properties#PFCResponseLog#$[\'Code\']}' )
def Description = context.expand( '${Properties#PFCResponseLog#$[\'Description\']}' )

assert ResponseCode == "0","ResponseCode is not valid"
assert Description == "OK","Description is not valid"
</script></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>952e5277-f948-4261-bf89-3b4d962b7d54</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7e6636fc-79af-4a61-852c-66f50c50b950</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>943b0583-b434-41f1-a5a6-7ab426569823</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>57724eaa-2086-4731-978d-63f9b61fc339</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>